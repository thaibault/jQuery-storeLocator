#!/usr/bin/env node
// -*- coding: utf-8 -*-
'use strict'
module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!*******************!*\
  !*** multi index ***!
  \*******************/
/***/ function(module, exports, __webpack_require__) {

	module.exports = __webpack_require__(/*! test */3);


/***/ },
/* 1 */
/*!*************************!*\
  !*** external "jquery" ***!
  \*************************/
/***/ function(module, exports) {

	eval("module.exports = require(\"jquery\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImpxdWVyeVwiPzBiNzYiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJqcXVlcnlcIlxuICoqIG1vZHVsZSBpZCA9IDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 2 */
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(module) {// #!/usr/bin/env node\n// -*- coding: utf-8 -*-\n/** @module jQuery-storeLocator */'use strict'; /* !\n    region header\n    [Project page](http://torben.website/jQuery-storeLocator)\n\n    Copyright Torben Sickert (info[\"~at~\"]torben.website) 16.12.2012\n\n    License\n    -------\n\n    This library written by Torben Sickert stand under a creative commons\n    naming 3.0 unported license.\n    See http://creativecommons.org/licenses/by/3.0/deed.de\n    endregion\n*/ // region imports\nexports.__esModule=true;var _typeof=typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol?\"symbol\":typeof obj;};var _jquery=__webpack_require__(/*! jquery */ 1);var _jquery2=_interopRequireDefault(_jquery);__webpack_require__(/*! jQuery-tools */ 8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;} /*\n    NOTE: Bind marker clusters google instance to an empty object first to add\n    the runtime evaluated instance later to.\n*/var googleMarkerClusterer=void 0; /* eslint-disable no-undef */ // IgnoreTypeCheck\nif(false){require('googleMarkerClusterer'); // IgnoreTypeCheck\ngoogleMarkerClusterer={Class:MarkerClusterer};}else  // IgnoreTypeCheck\ngoogleMarkerClusterer=__webpack_require__(/*! exports?Class=MarkerClusterer,google=google!imports?google=>{}!googleMarkerClusterer */ 4); /* eslint-enable no-undef */ /* eslint-disable no-duplicate-imports */ /* eslint-enable no-duplicate-imports */ // endregion\n// region types\n// endregion\nvar context=function(){if(_jquery2.default.type(window)==='undefined'){if(_jquery2.default.type(global)==='undefined')return _jquery2.default.type(module)==='undefined'?{}:module;return global;}return window;}();if(!context.hasOwnProperty('document')&&_jquery2.default.hasOwnProperty('context'))context.document=_jquery2.default.context; // region plugins/classes\n/**\n * A jQuery storelocator plugin.\n * Expected store data format:\n * {latitude: NUMBER, longitude: NUMBER, markerIconFileName: STRING}\n * @property static:maps - Holds the currently used maps class.\n * @property static:_name - Defines this class name to allow retrieving them\n * after name mangling.\n * @property static:_apiLoad - Holds the currently promise to retrieve a new\n * maps api.\n * @property currentSearchResults - Saves last found search results.\n * @property currentSearchText - Saves last searched string.\n * @property resultsDomNode - Saves currently opened results dom node or null\n * if no results exists yet.\n * @property currentSearchResultsDomNode - Saves current search results content\n * dom node.\n * @property currentlyOpenWindow - Saves currently opened window instance.\n * @property currentlyHighlightedMarker - Saves currently highlighted marker\n * instance.\n * @property searchResultsDirty - Indicates weather current search results\n * aren't valid anymore.\n * @property seenLocations - Saves all seen locations to recognize duplicates.\n * @property markers - Saves all recognized markers.\n * @property currentSearchResultRange - Public editable property to set current\n * search result range. This is useful for pagination implementations in\n * template level.\n * @property _options - Saves all plugin interface options.\n * @property _options.stores\n * {string|Array.<string>|Object.<string, number|Function>} - URL to retrieve\n * stores, list of stores or object describing bounds to create random stores\n * within. If a \"generateProperties\" function is given it will be called to\n * retrieve additional properties for each store. The specified store will be\n * given to the function.\n * @property _options.addtionalStoreProperties {Object.<string, mixed>} -\n * Additional static store properties which will be available to each store.\n * @property _options.iconPath {string} - Path prefix to search for marker\n * icons.\n * @property _options.defaultMarkerIconFileName {string} - Specifies a fallback\n * marker\n * icon (if no store specific icon was set). If set to \"null\" google will place\n * a fallback icon.\n * @property _options.startLocation {null|Object} - If not provided we\n * initialize the map with center in current location determined by internet\n * protocol address. If an object is given a \"latitude\" and \"longitude\" with a\n * saved float are assumed.\n * @property _options.fallbackLocation {Object} - Fallback location if\n * automatic location determination has failed.\n * @property _options.fallbackLocation.latitude {number} - Latitude value.\n * @property _options.fallbackLocation.longitude {number} - Longitude value.\n * @property _options.ip {null|string} - If provided given ip will be used to\n * determine current location instead of automatically determined one.\n * @property _options.ipToLocation {Object} - Configuration for ip to location\n * conversion.\n * @property _options.ipToLocation.applicationInterfaceURL {string} - IP to\n * location determination application interface url. {1} and {2} represents\n * currently used protocol and potentially given ip.\n * @property _options.ipToLocation.timeoutInMilliseconds {number} - Time to\n * wait for ip resolve. If time is up initialize on given fallback location.\n * @property _options.ipToLocation.bounds\n * {Object.<string, Object.<string, number>>} - Defines bound withing\n * determined locations should be. If resolved location isn't within this\n * location it will be ignored.\n * @property _options.ipToLocation.bound.northEast {Object.<string, number>} -\n * Defines north east bound.\n * @property _options.ipToLocation.bound.northEast.latitude {number} - North\n * east latitude bond.\n * @property _options.ipToLocation.bound.northEast.longitude {number} - North\n * east longitude bond.\n * @property _options.ipToLocation.bound.southWest {Object.<string, number>} -\n * Defined south west bound.\n * @property _options.ipToLocation.bound.southWest.latitude {number} - South\n * east latitude bound.\n * @property _options.ipToLocation.bound.southWest.longitude {number} - South\n * west longitude bound.\n * @property _options.map {Object} - Initial view properties.\n * @property _options.showInputAfterLoadedDelayInMilliseconds {number} - Delay\n * before we show search input field.\n * @property _options.inputFadeInOption {Object.<string, mixed>} - Transition\n * options to show search input field.\n * @property _options.distanceToMoveByDuplicatedEntries {number} - Distance to\n * move if stores are determined with same latitude and longitude.\n * @property _options.marker {Object|null} - Options passed to the marker\n * cluster. If set to \"null\" no marker cluster will appear.\n * @property _options.icon {Object} - Options passed to the icon.\n * @property _options.successfulSearchZoom {number} - Specifies a zoom value\n * wich will be adjusted after successfully picked a search result. If set to\n * \"null\" no zoom change happens.\n * @property _options.infoWindow {Object.<string, mixed>} - Info window\n * options.\n * @property _options.infoWindow.content {Function|string|null} - Function or\n * string returning or representing the info box. If a function is given and a\n * promise is returned the info box will be filled with the given loading\n * content and updated with the resolved data. The function becomes the\n * corresponding marker as first argument and the store locator instance as\n * second argument. If nothing is provided all available data will be listed in\n * a generic info window.\n * @property _options.infoWindow.additionalMoveToBottomInPixel {number} -\n * Additional move to bottom relative to the marker if an info window has been\n * opened.\n * @property _options.infoWindow.loadingContent {string} - Content to show in\n * the info window during info window load.\n * @property _options.searchBox {number|Object} - If a number is given a\n * generic search will be provided and given number will be interpret as search\n * result precision tolerance to identify a marker as search result. If an\n * object is given it indicates what should be search for. The object can hold\n * up to nine keys. \"properties\" to specify which store data should contain\n * given search text, \"maximumNumberOfResults\" to limit the auto complete\n * result, \"loadingContent\" to display while the results are loading,\n * \"numberOfAdditionalGenericPlaces\" a tuple describing a range of minimal to\n * maximal limits of additional generic google suggestions depending on number\n * of local search results, \"maximalDistanceInMeter\" to specify maximal\n * distance from current position to search suggestions, \"genericPlaceFilter\"\n * specifies a function which gets a relevant place to decide if the place\n * should be included (returns a boolean value), \"prefereGenericResults\"\n * specifies a boolean value indicating if generic search results should be the\n * first results, \"genericPlaceSearchOptions\" specifies how a generic place\n * search should be done (google maps request object specification) and\n * \"content\" to render the search results. \"content\" can be a function or\n * string returning or representing the search results. If a function is given\n * and a promise is returned the info box will be filled with the given loading\n * content and updated with the resolved data. The function becomes search\n * results as first argument, a boolean value as second argument indicating if\n * the maximum number of search results was reached and the store locator\n * instance as third argument. If nothing is provided all available data will\n * be listed in a generic info window.\n * @property _options.onInfoWindowOpen {Function} - Triggers if a marker info\n * window will be opened.\n * @property _options.onInfoWindowOpened {Function} - Triggers if a marker info\n * window has finished opening.\n * @property _options.onAddSearchResults {Function} - Triggers before new\n * search results appears.\n * @property _options.onRemoveSearchResults {Function} - Triggers before old\n * search results will be removed.\n * @property _options.onOpenSearchResults {Function} - Triggers before search\n * result box appears.\n * @property _options.onCloseSearchResults {Function} - Triggers before search\n * result box will be hidden.\n * @property _options.onMarkerHighlighted {Function} - Triggers after a marker\n * starts to highlight.\n */var StoreLocator=function(_$$Tools$class){_inherits(StoreLocator,_$$Tools$class);function StoreLocator(){_classCallCheck(this,StoreLocator);return _possibleConstructorReturn(this,_$$Tools$class.apply(this,arguments));} // endregion\n/**\n     * Entry point for object orientated jQuery plugin.\n     * @param options - Options to overwrite default ones.\n     * @returns Currently selected dom node.\n     */ // endregion\n// region dynamic properties\nStoreLocator.prototype.initialize=function initialize(){var _this2=this;var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0]; // region properties\nthis.currentSearchResults=[];this.currentSearchText=null;this.resultsDomNode=null;this.currentSearchResultsDomNode=null;this.currentlyOpenWindow=null;this.currentlyHighlightedMarker=null;this.searchResultsDirty=false;this.seenLocations=[];this.markers=[];this.currentSearchResultRange=null;this._options={api:{url:'https://maps.googleapis.com/maps/api/js'+'?v=3&sensor=false&libraries=places,geometry&callback={1}',callbackName:null},stores:{northEast:{latitude:85,longitude:180},southWest:{latitude:-85,longitude:-180},number:100,generateProperties:function generateProperties(store){return store;}},addtionalStoreProperties:{},iconPath:'/webAsset/image/storeLocator/',defaultMarkerIconFileName:null,startLocation:null,fallbackLocation:{latitude:51.124213,longitude:10.147705},ip:null,ipToLocation:{applicationInterfaceURL:'{1}://freegeoip.net/json/{2}',timeoutInMilliseconds:5000,bounds:{northEast:{latitude:85,longitude:180},southWest:{latitude:-85,longitude:-180}}},map:{zoom:3},showInputAfterLoadedDelayInMilliseconds:500,inputFadeInOption:{duration:'fast'},distanceToMoveByDuplicatedEntries:0.0001,marker:{cluster:{gridSize:100,maxZoom:11,imagePath:'https://cdn.rawgit.com/googlemaps/'+'js-marker-clusterer/gh-pages/images/m'},icon:{size:{width:44,height:49,unit:'px'},scaledSize:{width:44,height:49,unit:'px'}}},successfulSearchZoom:12,infoWindow:{content:null,additionalMoveToBottomInPixel:120,loadingContent:'<div class=\"idle\">loading...</div>'},searchBox:50,onInfoWindowOpen:_jquery2.default.noop,onInfoWindowOpened:_jquery2.default.noop,onAddSearchResults:_jquery2.default.noop,onRemoveSearchResults:_jquery2.default.noop,onOpenSearchResults:_jquery2.default.noop,onCloseSearchResults:_jquery2.default.noop,onMarkerHighlighted:_jquery2.default.noop}; // endregion\n// Merges given options with default options recursively.\n_$$Tools$class.prototype.initialize.call(this,options);var loadInitialized=true;if(_typeof(this.constructor._apiLoad)!=='object'){loadInitialized=false;this.constructor._apiLoad=_jquery2.default.Deferred();}var result=this.constructor._apiLoad.then(this.getMethod(this.bootstrap));if('google' in context&&'maps' in context.google){this.constructor.maps=context.google.maps;if(this.constructor._apiLoad.state()!=='resolved')setTimeout(function(){return _this2.constructor._apiLoad.resolve(_this2.$domNode);});}else if('google' in context.window&&'maps' in context.window.google){this.constructor.maps=context.window.google.maps;if(this.constructor._apiLoad.state()!=='resolved')setTimeout(function(){return _this2.constructor._apiLoad.resolve(_this2.$domNode);});}else if(!loadInitialized){var callbackName=void 0;if(this._options.api.callbackName)callbackName=this._options.api.callbackName;else callbackName=this.constructor.determineUniqueScopeName();context.window[callbackName]=function(){_this2.constructor.maps=context.window.google.maps;_this2.constructor._apiLoad.resolve(_this2.$domNode);};_jquery2.default.getScript(this.constructor.stringFormat(this._options.api.url,'window.'+callbackName)).catch(function(response,error){return _this2.constructor._apiLoad.reject(error);});}return result;}; /**\n     * Determines useful location cluster, info windows and marker.\n     * @returns The current instance.\n     */ // region static properties\nStoreLocator.prototype.bootstrap=function bootstrap(){var _this3=this;if(this._options.startLocation)return this.initializeMap();this._options.startLocation=this._options.fallbackLocation; /*\n            NOTE: If request is slower than the timeout parameter for jsonp\n            request the padding function isn't set anymore so an error\n            occurs. That's why we use our own timeout implementation.\n        */var loaded=false;var $deferred=_jquery2.default.Deferred();var fallbackTimeoutID=setTimeout(function(){loaded=true;_this3.initializeMap().then(function(){return $deferred.resolve(_this3.$domNode);});},this._options.ipToLocation.timeoutInMilliseconds);_jquery2.default.ajax({url:this.constructor.stringFormat(this._options.ipToLocation.applicationInterfaceURL,document.location.protocol.substring(0,document.location.protocol.length-1),this._options.ip||''),dataType:'jsonp',cache:true}).always(function(currentLocation,textStatus){if(!loaded){clearTimeout(fallbackTimeoutID);loaded=true;if(textStatus==='success') /*\n                        Check if determined location is within defined\n                        bounds.\n                    */if(!_this3._options.ipToLocation.bounds||new _this3.constructor.maps.LatLngBounds(new _this3.constructor.maps.LatLng(_this3._options.ipToLocation.bounds.southWest.latitude,_this3._options.ipToLocation.bounds.southWest.longitude),new _this3.constructor.maps.LatLng(_this3._options.ipToLocation.bounds.northEast.latitude,_this3._options.ipToLocation.bounds.northEast.longitude)).contains(new _this3.constructor.maps.LatLng(currentLocation.latitude,currentLocation.longitude)))_this3._options.startLocation=currentLocation;_this3.initializeMap().then(function(){return $deferred.resolve(_this3.$domNode);});}});return $deferred;}; /**\n     * Initializes cluster, info windows and marker.\n     * @returns The current instance.\n     */StoreLocator.prototype.initializeMap=function initializeMap(){var _this4=this;this._options.map.center=new this.constructor.maps.LatLng(this._options.startLocation.latitude,this._options.startLocation.longitude);this.map=new this.constructor.maps.Map((0,_jquery2.default)('<div>').appendTo(this.$domNode)[0],this._options.map);var markerCluster=null;if(this._options.marker.cluster){googleMarkerClusterer.google.maps=this.constructor.maps;markerCluster=new googleMarkerClusterer.Class(this.map,[],this._options.marker.cluster);} // Add a marker for each retrieved store.\nvar $addMarkerDeferred=_jquery2.default.Deferred();var markerList=[];if(_jquery2.default.isArray(this._options.stores)){for(var _iterator=this._options.stores,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++];}else {_i=_iterator.next();if(_i.done)break;_ref=_i.value;}var _store=_ref;_jquery2.default.extend(true,_store,this._options.addtionalStoreProperties);var marker=this.createMarker(_store);if(markerCluster)markerCluster.addMarker(marker);markerList.push(marker);$addMarkerDeferred.resolve(markerList);}}else if(_jquery2.default.type(this._options.stores)==='string')_jquery2.default.getJSON(this._options.stores,function(stores){for(var _iterator2=stores,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++];}else {_i2=_iterator2.next();if(_i2.done)break;_ref2=_i2.value;}var store=_ref2;_jquery2.default.extend(true,store,_this4._options.addtionalStoreProperties);var _marker=_this4.createMarker(store);if(markerCluster)markerCluster.addMarker(_marker);markerList.push(_marker);}$addMarkerDeferred.resolve(markerList);});else {var southWest=new this.constructor.maps.LatLng(this._options.stores.southWest.latitude,this._options.stores.southWest.longitude);var northEast=new this.constructor.maps.LatLng(this._options.stores.northEast.latitude,this._options.stores.northEast.longitude);for(var index=0;index<this._options.stores.number;index++){var store=_jquery2.default.extend({latitude:southWest.lat()+(northEast.lat()-southWest.lat())*Math.random(),longitude:southWest.lng()+(northEast.lng()-southWest.lng())*Math.random()},this._options.addtionalStoreProperties);var _marker2=this.createMarker(_jquery2.default.extend(store,this._options.stores.generateProperties(store)));if(markerCluster)markerCluster.addMarker(_marker2);markerList.push(_marker2);}$addMarkerDeferred.resolve(markerList);} // Create the search box and link it to the UI element.\nconsole.log('A',this.$domNode.find('input'));this.map.controls[this.constructor.maps.ControlPosition.TOP_LEFT].push(this.$domNode.find('input')[0]);if(_jquery2.default.type(this._options.searchBox)==='number')this.initializeGenericSearchBox();else {this.constructor.maps.event.addListener(this.map,'click',function(){return _this4.closeSearchResults();});this.constructor.maps.event.addListener(this.map,'dragstart',function(){return _this4.closeSearchResults();});this._options.searchBox=_jquery2.default.extend(true,{maximumNumberOfResults:50,numberOfAdditionalGenericPlaces:[2,5],maximalDistanceInMeter:1000000,loadingContent:this._options.infoWindow.loadingContent,genericPlaceFilter:function genericPlaceFilter(place){return place.formatted_address.indexOf(' Deutschland')!==-1||place.formatted_address.indexOf(' Germany')!==-1;},prefereGenericResults:true,genericPlaceSearchOptions:{radius:'50000'}},this._options.searchBox);this.initializeDataSourceSearchBox();} // Close marker if zoom level is bigger than the aggregation.\nthis.constructor.maps.event.addListener(this.map,'zoom_changed',function(){if(_typeof(_this4.currentlyOpenWindow)==='object'&&_this4.currentlyOpenWindow&&_this4.currentlyOpenWindow.isOpen&&_this4.map.getZoom()<=_this4._options.marker.cluster.maxZoom){_this4.currentlyOpenWindow.isOpen=false;_this4.currentlyOpenWindow.close();}});var $mapLoadedDeferred=_jquery2.default.Deferred();this.constructor.maps.event.addListenerOnce(this.map,'idle',function(){return $addMarkerDeferred.then(function(){return $mapLoadedDeferred.resolve(_this4.$domNode);});});return $mapLoadedDeferred;}; /**\n     * Position search results right below the search input field.\n     * @returns The current instance.\n     */StoreLocator.prototype.initializeDataSourceSearchResultsBox=function initializeDataSourceSearchResultsBox(){var cssProperties={};var _arr=['position','width','top','left','border'];for(var _i3=0;_i3<_arr.length;_i3++){var propertyName=_arr[_i3];cssProperties[propertyName]=this.$domNode.find('input').css(propertyName);}cssProperties.marginTop=this.$domNode.find('input').outerHeight(true); // Prepare search result positioning.\nthis.resultsDomNode=(0,_jquery2.default)('<div>').addClass(this.constructor.stringCamelCaseToDelimited(this.__name__+'SearchResults')).css(cssProperties); // Inject the final search results into the dom tree.\nthis.$domNode.find('input').after(this.resultsDomNode);return this;}; /**\n     * Initializes a data source based search box to open and focus them\n     * matching marker.\n     * @returns The current instance.\n     */StoreLocator.prototype.initializeDataSourceSearchBox=function initializeDataSourceSearchBox(){var _this5=this;this.on(this.$domNode,'keydown',function(event){ /*\n                NOTE: Events that doesn't occurs in search context are handled\n                by the native map implementation and won't be propagated so we\n                doesn't have to care about that.\n            */if(_this5.currentSearchResults.length){if(_this5.currentSearchResultRange)_this5.currentSearchResultRange=[Math.max(0,_this5.currentSearchResultRange[0]),Math.min(_this5.currentSearchResults.length-1, // IgnoreTypeCheck\n_this5.currentSearchResultRange[1])];else _this5.currentSearchResultRange=[0,_this5.currentSearchResults.length-1];var currentIndex=-1;if(_this5.currentlyHighlightedMarker)currentIndex=_this5.currentSearchResults.indexOf(_this5.currentlyHighlightedMarker);if(event.keyCode===_this5.keyCode.DOWN){if(currentIndex===-1||_this5.currentSearchResultRange[1]<currentIndex+1)_this5.highlightMarker(_this5.currentSearchResults[_this5.currentSearchResultRange[0]],event);else _this5.highlightMarker(_this5.currentSearchResults[currentIndex+1],event);}else if(event.keyCode===_this5.keyCode.UP){if([_this5.currentSearchResultRange[0],-1].includes(currentIndex))_this5.highlightMarker(_this5.currentSearchResults[ // IgnoreTypeCheck\n_this5.currentSearchResultRange[1]],event);else _this5.highlightMarker(_this5.currentSearchResults[currentIndex-1],event);}else if(event.keyCode===_this5.keyCode.ENTER&&_this5.currentlyHighlightedMarker){event.stopPropagation();if(_this5.currentlyHighlightedMarker)if(_this5.currentlyHighlightedMarker.infoWindow)_this5.openMarker(_this5.currentlyHighlightedMarker,event);else _this5.openPlace(_this5.currentlyHighlightedMarker.data,event);}}});this.on(this.$domNode.find('input'),'focus',function(){if(_this5.currentSearchText)_this5.openSearchResults();});this.on(this.$domNode.find('input'),'keydown',function(event){for(var name in _this5.keyCode){if(_this5.keyCode.hasOwnProperty(name)&&event.keyCode===_this5.keyCode[name]&&name!=='DOWN')return;}});if(this.currentSearchText)this.openSearchResults();this.on(this.$domNode.find('input'),'click',function(){if(_this5.currentSearchText)_this5.openSearchResults();});this.constructor.maps.event.addListener(this.map,'center_changed',function(){ // NOTE: Search results depends on current position.\nif(_this5.currentSearchText&&_this5.resultsDomNode)_this5.searchResultsDirty=true;});this.on(this.$domNode.find('input'),'keyup',this.getUpdateSearchResultsHandler());return this;}; /**\n     * Triggers on each search request.\n     * @returns The current instance.\n     */StoreLocator.prototype.getUpdateSearchResultsHandler=function getUpdateSearchResultsHandler(){var _this6=this;var placesService=new this.constructor.maps.places.PlacesService(this.map);return this.debounce(function(event){for(var name in _this6.keyCode){if(event&&event.keyCode===_this6.keyCode[name]&&!['DELETE','BACKSPACE'].includes(name))return;}_this6.acquireLock(_this6.constructor._name+'Search',function(){var searchText=_this6.$domNode.find('input').val().trim();if(_this6.currentSearchText===searchText&&!_this6.searchResultsDirty)return _this6.releaseLock(_this6.constructor._name+'Search');_this6.searchResultsDirty=false;if(!_this6.resultsDomNode)_this6.initializeDataSourceSearchResultsBox();if(!searchText&&_this6.resultsDomNode){_this6.currentSearchText='';_this6.currentSearchResults=[];_this6.resultsDomNode.html('');_this6.currentSearchResultsDomNode=null;_this6.closeSearchResults();return _this6.releaseLock(_this6.constructor._name+'Search');}_this6.openSearchResults();var loadingDomNode=(0,_jquery2.default)(_this6._options.searchBox.loadingContent);if(_this6.resultsDomNode&&!_this6.fireEvent('addSearchResults',false,_this6,loadingDomNode,_this6.resultsDomNode,_this6.currentSearchResultsDomNode||[]))_this6.resultsDomNode.html(loadingDomNode);if(_this6.currentSearchResultsDomNode&&_this6.currentSearchResultsDomNode.length)_this6.fireEvent('removeSearchResults',false,_this6,_this6.currentSearchResultsDomNode);_this6.currentSearchResultsDomNode=loadingDomNode;if(_this6._options.searchBox.numberOfAdditionalGenericPlaces) /*\n                        NOTE: Google searches for more items than exists in the\n                        the specified radius. However the radius is a string in\n                        the examples provided by google.\n                    */placesService.textSearch(_jquery2.default.extend({query:searchText,location:_this6.map.getCenter()},_this6._options.searchBox.genericPlaceSearchOptions),function(places){if(places)_this6.handleGenericSearchResults(places,searchText);});else _this6.performLocalSearch(searchText);},1000);});}; /**\n     * Sorts and filters search results given by the google api.\n     * @param places - List of place objects.\n     * @param searchText - Words which should occur in requested search\n     * results.\n     * @returns Returns current instance.\n     */StoreLocator.prototype.handleGenericSearchResults=function handleGenericSearchResults(places,searchText){var _this7=this;var searchResults=[]; /*\n            NOTE: Since google text search doesn't support sorting by distance\n            we have to sort by our own.\n        */var index=1;var _loop=function _loop(){if(_isArray3){if(_i4>=_iterator3.length)return 'break';_ref3=_iterator3[_i4++];}else {_i4=_iterator3.next();if(_i4.done)return 'break';_ref3=_i4.value;}var place=_ref3;index+=1;var distance=_this7.constructor.maps.geometry.spherical.computeDistanceBetween(_this7.map.getCenter(),place.geometry.location);if(distance>_this7._options.searchBox.maximalDistanceInMeter)return 'break';if(_this7._options.searchBox.genericPlaceFilter(place)){var result={data:_jquery2.default.extend(place,{logoFilePath:place.icon.replace(/^http:(\\/\\/)/,document.location.protocol+'$1'),address:place.formatted_address,distance:distance}),position:place.geometry.location,open:function open(event){return _this7.openPlace(place,event);},highlight:function highlight(event,type){_this7.isHighlighted=type!=='stop';}};searchResults.push(result);if(_this7._options.searchBox.numberOfAdditionalGenericPlaces[1]<index)return 'break';}};for(var _iterator3=places.sort(function(firstPlace,secondPlace){return _this7.constructor.maps.geometry.spherical.computeDistanceBetween(_this7.map.getCenter(),firstPlace.geometry.location)-_this7.constructor.maps.geometry.spherical.computeDistanceBetween(_this7.map.getCenter(),secondPlace.geometry.location);}),_isArray3=Array.isArray(_iterator3),_i4=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;var _ret=_loop();if(_ret==='break')break;}return this.performLocalSearch(searchText,searchResults);}; /**\n     * Performs a search on locally given store data.\n     * @param searchText - Text to search for.\n     * @param searchResults - A list if generic search results.\n     * @returns The current instance.\n     */StoreLocator.prototype.performLocalSearch=function performLocalSearch(searchText){var _this8=this;var searchResults=arguments.length<=1||arguments[1]===undefined?[]:arguments[1];var numberOfGenericSearchResults=searchResults.length;var _loop2=function _loop2(){if(_isArray4){if(_i5>=_iterator4.length)return 'break';_ref4=_iterator4[_i5++];}else {_i5=_iterator4.next();if(_i5.done)return 'break';_ref4=_i5.value;}var marker=_ref4;for(var _iterator5=_this8._options.searchBox.properties,_isArray5=Array.isArray(_iterator5),_i6=0,_iterator5=_isArray5?_iterator5:_iterator5[Symbol.iterator]();;){var _ref5;if(_isArray5){if(_i6>=_iterator5.length)break;_ref5=_iterator5[_i6++];}else {_i6=_iterator5.next();if(_i6.done)break;_ref5=_i6.value;}var key=_ref5;if((marker.data[key]||marker.data[key]===0)&&(''+marker.data[key]).toLowerCase().replace(/[-_&]+/g,' ').indexOf(searchText.toLowerCase().replace(/[-_&]+/g,' '))!==-1){marker.open=function(event){return _this8.openMarker(marker,event);};marker.highlight=function(event,type){return _this8.highlightMarker(marker,event,type);};searchResults.push(marker);break;}}};for(var _iterator4=this.markers,_isArray4=Array.isArray(_iterator4),_i5=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;var _ret2=_loop2();if(_ret2==='break')break;} /*\n            Remove generic place results if there are enough local search\n            results.\n        */if(this._options.searchBox.numberOfAdditionalGenericPlaces&&searchResults.length&&numberOfGenericSearchResults>this._options.searchBox.numberOfAdditionalGenericPlaces[0]&&searchResults.length>this._options.searchBox.numberOfAdditionalGenericPlaces[1])searchResults.splice(this._options.searchBox.numberOfAdditionalGenericPlaces[0],numberOfGenericSearchResults-this._options.searchBox.numberOfAdditionalGenericPlaces[0]); // Slice additional unneeded local search results.\nvar limitReached=false;if(this._options.searchBox.maximumNumberOfResults<searchResults.length){limitReached=true;searchResults.splice(this._options.searchBox.maximumNumberOfResults,searchResults.length);} /*\n            Sort results by current map center form nearer to more fare away\n            results.\n        */searchResults.sort(function(first,second){if(_this8._options.searchBox.prefereGenericResults&&!first.infoWindow&&second.infoWindow)return -1;if(_this8._options.searchBox.prefereGenericResults&&!second.infoWindow&&first.infoWindow)return 1;return _this8.constructor.maps.geometry.spherical.computeDistanceBetween(_this8.map.getCenter(),first.position)-_this8.constructor.maps.geometry.spherical.computeDistanceBetween(_this8.map.getCenter(),second.position);}); // Compile search results markup.\nvar resultsRepresentation=this.makeSearchResults(searchResults,limitReached);if(_jquery2.default.type(resultsRepresentation)==='string'){var resultsRepresentationDomNode=(0,_jquery2.default)(resultsRepresentation);if(this.resultsDomNode&&!this.fireEvent('addSearchResults',false,this,resultsRepresentationDomNode,this.resultsDomNode,this.currentSearchResultsDomNode||[]))this.resultsDomNode.html(resultsRepresentationDomNode);if(this.currentSearchResultsDomNode&&this.currentSearchResultsDomNode.length)this.fireEvent('removeSearchResults',false,this,this.currentSearchResultsDomNode);this.currentSearchResultsDomNode=resultsRepresentationDomNode;setTimeout(function(){return _this8.releaseLock(_this8.constructor._name+'Search');},0);}else if(resultsRepresentation instanceof Promise)resultsRepresentation.then(function(resultsRepresentation){var resultsRepresentationDomNode=(0,_jquery2.default)(resultsRepresentation);if(_this8.resultsDomNode&&!_this8.fireEvent('addSearchResults',false,_this8,resultsRepresentationDomNode,_this8.resultsDomNode,_this8.currentSearchResultsDomNode||[]))_this8.resultsDomNode.html(resultsRepresentationDomNode);if(_this8.currentSearchResultsDomNode&&_this8.currentSearchResultsDomNode.length)_this8.fireEvent('removeSearchResults',false,_this8,_this8.currentSearchResultsDomNode);_this8.currentSearchResultsDomNode=resultsRepresentationDomNode;_this8.releaseLock(_this8._name+'Search');});this.currentSearchText=searchText;this.currentSearchResults=searchResults.slice();return this;}; /**\n     * Opens current search results.\n     * @param event - Object with meta data for current event which has\n     * triggered to show search results.\n     * @returns The current instance.\n     */StoreLocator.prototype.openSearchResults=function openSearchResults(event){if(event)event.stopPropagation();this.getUpdateSearchResultsHandler()(event);if(this.resultsDomNode&&!this.resultsDomNode.hasClass('open')&&!this.fireEvent('openSearchResults',false,this,event,this.resultsDomNode))this.resultsDomNode.addClass('open');return this;}; /**\n     * Closes current search results.\n     * @param event - Object with meta data for current event which has\n     * triggered to close search results.\n     * @returns The current instance.\n     */StoreLocator.prototype.closeSearchResults=function closeSearchResults(){var event=arguments.length<=0||arguments[0]===undefined?null:arguments[0];if(event)event.stopPropagation();if(this.resultsDomNode&&this.resultsDomNode.hasClass('open')&&!this.fireEvent('closeSearchResults',false,this,event,this.resultsDomNode))this.resultsDomNode.removeClass('open');return this;}; /**\n     * Initializes googles generic search box and tries to match to open and\n     * focus them.\n     * @returns The current instance.\n     */StoreLocator.prototype.initializeGenericSearchBox=function initializeGenericSearchBox(){var _this9=this;var searchBox=new this.constructor.maps.places.SearchBox(this.$domNode.find('input')[0]); /*\n            Bias the search box results towards places that are within the\n            bounds of the current map's viewport.\n        */this.constructor.maps.event.addListener(this.map,'bounds_changed',function(){return searchBox.setBounds(_this9.map.getBounds());}); /*\n            Listen for the event fired when the user selects an item from the\n            pick list. Retrieve the matching places for that item.\n        */this.constructor.maps.event.addListener(searchBox,'places_changed',function(){return _this9.ensurePlaceLocations(searchBox.getPlaces()).then(function(places){var foundPlace=_this9.determineBestSearchResult(places);if(foundPlace){var shortestDistanceInMeter=Number.MAX_VALUE;var matchingMarker=null;for(var _iterator6=_this9.markers,_isArray6=Array.isArray(_iterator6),_i7=0,_iterator6=_isArray6?_iterator6:_iterator6[Symbol.iterator]();;){var _ref6;if(_isArray6){if(_i7>=_iterator6.length)break;_ref6=_iterator6[_i7++];}else {_i7=_iterator6.next();if(_i7.done)break;_ref6=_i7.value;}var _marker3=_ref6;var distanceInMeter=_this9.constructor.maps.geometry.spherical.computeDistanceBetween(foundPlace.geometry.location,_marker3.position);if(distanceInMeter<shortestDistanceInMeter){shortestDistanceInMeter=distanceInMeter;matchingMarker=_marker3;}}if(matchingMarker&&shortestDistanceInMeter<=_this9._options.searchBox){if(_this9._options.successfulSearchZoom)_this9.map.setZoom(_this9._options.successfulSearchZoom);_this9.openMarker(matchingMarker);return places;}if(_this9.currentlyOpenWindow){_this9.currentlyOpenWindow.isOpen=false;_this9.currentlyOpenWindow.close();}_this9.map.setCenter(foundPlace.geometry.location);if(_this9._options.successfulSearchZoom)_this9.map.setZoom(_this9._options.successfulSearchZoom);}return places;});});return this;}; /**\n     * Ensures that every given place have a location property.\n     * @param places - Places to check for.\n     * @returns A promise which will be resolved if all places are ensured.\n     */StoreLocator.prototype.ensurePlaceLocations=function ensurePlaceLocations(places){var _this10=this;return new Promise(function(resolve){var runningGeocodes=0;var geocoder=new _this10.constructor.maps.Geocoder();var _loop3=function _loop3(){if(_isArray7){if(_i8>=_iterator7.length)return 'break';_ref7=_iterator7[_i8++];}else {_i8=_iterator7.next();if(_i8.done)return 'break';_ref7=_i8.value;}var place=_ref7;if(!('geometry' in place&&'location' in place.geometry)){_this10.warn('Found place \"{1}\" doesn\\'t have a location. Full '+'object:',place.name);_this10.warn(place);_this10.info('Geocode will be determined separately. With address'+' \"{1}\".',place.name);runningGeocodes+=1; /* eslint-disable no-loop-func */geocoder.geocode({address:place.name},function(results,status){runningGeocodes-=1;if(status===_this10.constructor.maps.GeocoderStatus.OK)place.geometry=results[0].geometry;else {delete places[places.indexOf(place)];_this10.warn('Found place \"{1}\" couldn\\'t be geocoded by '+'google. Removing it from the places list.',place.name);}if(runningGeocodes===0)resolve(places);}); /* eslint-enable no-loop-func */}};for(var _iterator7=places,_isArray7=Array.isArray(_iterator7),_i8=0,_iterator7=_isArray7?_iterator7:_iterator7[Symbol.iterator]();;){var _ref7;var _ret3=_loop3();if(_ret3==='break')break;}});}; /**\n     * Determines the best search result from given list of candidates.\n     * Currently the nearest result to current viewport will be preferred.\n     * @param candidates - List of search results to determine best from.\n     * @returns The determined best result.\n     */StoreLocator.prototype.determineBestSearchResult=function determineBestSearchResult(candidates){var result=null;if(candidates.length){var shortestDistanceInMeter=Number.MAX_VALUE;for(var _iterator8=candidates,_isArray8=Array.isArray(_iterator8),_i9=0,_iterator8=_isArray8?_iterator8:_iterator8[Symbol.iterator]();;){var _ref8;if(_isArray8){if(_i9>=_iterator8.length)break;_ref8=_iterator8[_i9++];}else {_i9=_iterator8.next();if(_i9.done)break;_ref8=_i9.value;}var candidate=_ref8;var distanceInMeter=this.constructor.maps.geometry.spherical.computeDistanceBetween(candidate.geometry.location,this.map.getCenter());if(distanceInMeter<shortestDistanceInMeter){result=candidate;shortestDistanceInMeter=distanceInMeter;}}}return result;}; /**\n     * Is triggered if the complete map ist loaded.\n     * @returns The current instance.\n     */StoreLocator.prototype.onLoaded=function onLoaded(){var _this11=this;setTimeout(function(){return _this11.$domNode.find('input').fadeIn(_this11._options.inputFadeInOption);},this._options.showInputAfterLoadedDelayInMilliseconds);return this;}; /**\n     * Registers given store to the google maps canvas.\n     * @param store - Store object to create a marker for.\n     * @returns The created marker.\n     */StoreLocator.prototype.createMarker=function createMarker(store){var index=0;while(this.seenLocations.includes(store.latitude+'-'+store.longitude)){if(index%2)store.latitude+=this._options.distanceToMoveByDuplicatedEntries;else store.longitude+=this._options.distanceToMoveByDuplicatedEntries;index+=1;}this.seenLocations.push(store.latitude+'-'+store.longitude);var marker={position:new this.constructor.maps.LatLng(store.latitude,store.longitude),map:this.map,data:store};if(store.markerIconFileName||this._options.defaultMarkerIconFileName){marker.icon=_jquery2.default.extend({},this._options.marker.icon);if(marker.icon.size)marker.icon.size=new this.constructor.maps.Size(marker.icon.size.width,marker.icon.size.height,marker.icon.size.unit,marker.icon.size.unit);if(marker.icon.scaledSize)marker.icon.scaledSize=new this.constructor.maps.Size(marker.icon.scaledSize.width,marker.icon.scaledSize.height,marker.icon.scaledSize.unit,marker.icon.scaledSize.unit);if(store.markerIconFileName)marker.icon.url=this._options.iconPath+store.markerIconFileName;else marker.icon.url=this._options.iconPath+this._options.defaultMarkerIconFileName;}if(store.title)marker.title=store.title;marker.infoWindow=new this.constructor.maps.InfoWindow({content:''});marker.infoWindow.isOpen=false;this.constructor.maps.event.addListener(marker.infoWindow,'closeclick',function(){marker.infoWindow.isOpen=false;});marker.nativeMarker=new this.constructor.maps.Marker(marker);this.constructor.maps.event.addListener(marker.nativeMarker,'click',this.getMethod('openMarker',this,marker));this.markers.push(marker);return marker.nativeMarker;}; /**\n     * Opens given marker info window. And closes a potential opened windows.\n     * @param marker - Marker to open.\n     * @param event - Event which has triggered the marker opening call.\n     * @returns The current instance.\n     */StoreLocator.prototype.openMarker=function openMarker(marker,event){if(event)event.stopPropagation();this.highlightMarker(marker,event,'stop'); /*\n            We have to ensure that the minimum zoom level has one more then\n            the clustering can appear. Since a cluster hides an open window.\n        */if('cluster' in this._options.marker&&this._options.marker.cluster.maxZoom&&this.map.getZoom()<=this._options.marker.cluster.maxZoom)this.map.setZoom(this._options.marker.cluster.maxZoom+1);this.closeSearchResults(event);if(this.currentlyOpenWindow===marker.infoWindow&&this.currentlyOpenWindow.isOpen)return this;this.fireEvent('infoWindowOpen',event,marker);marker.refreshSize=function(){return  (// Simulates a content update to enforce info box size adjusting.\nmarker.infoWindow.setContent(marker.infoWindow.getContent()));};var infoWindow=this.makeInfoWindow(marker);if(typeof infoWindow==='string')marker.infoWindow.setContent(infoWindow);else {marker.infoWindow.setContent(this._options.infoWindow.loadingContent);infoWindow.then(function(infoWindow){return marker.infoWindow.setContent(infoWindow);});}if(this.currentlyOpenWindow){this.currentlyOpenWindow.isOpen=false;this.currentlyOpenWindow.close();}this.currentlyOpenWindow=marker.infoWindow;marker.infoWindow.isOpen=true;marker.infoWindow.open(this.map,marker.nativeMarker);this.map.panTo(marker.nativeMarker.position);this.map.panBy(0,-this._options.infoWindow.additionalMoveToBottomInPixel);this.fireEvent('infoWindowOpened',event,marker);return this;}; /**\n     * Focuses given place on map.\n     * @param place - Place to open.\n     * @param event - Event object which has triggered requested place opening.\n     * @returns The current instance.\n     */StoreLocator.prototype.openPlace=function openPlace(place,event){if(event)event.stopPropagation();this.closeSearchResults(event);if(this.currentlyOpenWindow){this.currentlyOpenWindow.isOpen=false;this.currentlyOpenWindow.close();}this.map.setCenter(place.geometry.location);this.map.setZoom(this._options.successfulSearchZoom);return this;}; /**\n     * Opens given marker info window. And closes a potential opened windows.\n     * @param marker - Marker to Highlight.\n     * @param event - Event object for corresponding event that has the\n     * highlighting requested.\n     * @param type - Type of highlighting.\n     * @returns The current instance.\n     */StoreLocator.prototype.highlightMarker=function highlightMarker(marker,event){var type=arguments.length<=2||arguments[2]===undefined?'bounce':arguments[2];if(event)event.stopPropagation();if(this.currentlyHighlightedMarker){if('nativeMarker' in this.currentlyHighlightedMarker)this.currentlyHighlightedMarker.nativeMarker.setAnimation(null);this.currentlyHighlightedMarker.isHighlighted=false;this.currentlyHighlightedMarker=null;}if('nativeMarker' in marker)if(type==='stop')marker.nativeMarker.setAnimation(null);else { /*\n                    We have to ensure that the minimum zoom level has one more\n                    then the clustering can appear. Since a cluster hides an\n                    open window.\n                */if('cluster' in this._options.marker&&this._options.marker.cluster.maxZoom&&this.map.getZoom()<=this._options.marker.cluster.maxZoom&&'position' in marker.nativeMarker&&this.map.getBounds().contains(marker.nativeMarker.positioning)){this.map.setCenter(marker.nativeMarker.position);this.map.setZoom(this._options.marker.cluster.maxZoom+1);}if(marker!==this.currentlyHighlightedMarker&&marker.nativeMarker){marker.nativeMarker.setAnimation(this.constructor.maps.Animation[type.toUpperCase()]);marker.isHighlighted=true;this.currentlyHighlightedMarker=marker;}this.fireEvent('markerHighlighted',marker);}return this;}; /**\n     * Takes the marker for a store and creates the HTML content of the info\n     * window.\n     * @param marker - Marker to generate info window for.\n     * @returns Info window markup.\n     */StoreLocator.prototype.makeInfoWindow=function makeInfoWindow(marker){if(_jquery2.default.isFunction(this._options.infoWindow.content))return this._options.infoWindow.content.apply(this,arguments);if('content' in this._options.infoWindow)return this._options.infoWindow.content;var content='<div>';for(var name in marker.data){if(marker.data.hasOwnProperty(name))content+=name+': '+marker.data[name]+'<br />';}return content+'</div>';}; /**\n     * Takes the search results and creates the HTML content of the search\n     * results.\n     * @param searchResults - Search result to generate markup for.\n     * @returns Generated markup.\n     */StoreLocator.prototype.makeSearchResults=function makeSearchResults(searchResults){if(_jquery2.default.isFunction(this._options.searchBox.content))return this._options.searchBox.content.apply(this,arguments);if('content' in this._options.searchBox.content)return this._options.searchBox.content;var content='';for(var _iterator9=searchResults,_isArray9=Array.isArray(_iterator9),_i10=0,_iterator9=_isArray9?_iterator9:_iterator9[Symbol.iterator]();;){var _ref9;if(_isArray9){if(_i10>=_iterator9.length)break;_ref9=_iterator9[_i10++];}else {_i10=_iterator9.next();if(_i10.done)break;_ref9=_i10.value;}var result=_ref9;content+='<div>';for(var name in result.data){if(result.data.hasOwnProperty(name))content+=name+': '+result.data[name]+'<br />';}content+='</div>';}return content;};return StoreLocator;}(_jquery2.default.Tools.class); // endregion\nStoreLocator._name='StoreLocator';_jquery2.default.fn.StoreLocator=function(){return _jquery2.default.Tools().controller(StoreLocator,arguments,this);}; /** The jQuery-storeLocator plugin class. */exports.default=StoreLocator; // region vim modline\n// vim: set tabstop=4 shiftwidth=4 expandtab:\n// vim: foldmethod=marker foldmarker=region,endregion:\n// endregion\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./~/webpack/buildin/module.js */ 6)(module)))\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9pbmRleC5qcz8xNjg3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG4vLyAjIS91c3IvYmluL2VudiBub2RlXG4vLyAtKi0gY29kaW5nOiB1dGYtOCAtKi1cbi8qKiBAbW9kdWxlIGpRdWVyeS1zdG9yZUxvY2F0b3IgKi9cbid1c2Ugc3RyaWN0J1xuLyogIVxuICAgIHJlZ2lvbiBoZWFkZXJcbiAgICBbUHJvamVjdCBwYWdlXShodHRwOi8vdG9yYmVuLndlYnNpdGUvalF1ZXJ5LXN0b3JlTG9jYXRvcilcblxuICAgIENvcHlyaWdodCBUb3JiZW4gU2lja2VydCAoaW5mb1tcIn5hdH5cIl10b3JiZW4ud2Vic2l0ZSkgMTYuMTIuMjAxMlxuXG4gICAgTGljZW5zZVxuICAgIC0tLS0tLS1cblxuICAgIFRoaXMgbGlicmFyeSB3cml0dGVuIGJ5IFRvcmJlbiBTaWNrZXJ0IHN0YW5kIHVuZGVyIGEgY3JlYXRpdmUgY29tbW9uc1xuICAgIG5hbWluZyAzLjAgdW5wb3J0ZWQgbGljZW5zZS5cbiAgICBTZWUgaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnkvMy4wL2RlZWQuZGVcbiAgICBlbmRyZWdpb25cbiovXG4vLyByZWdpb24gaW1wb3J0c1xuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5J1xuaW1wb3J0IHR5cGUge1Byb21pc2VDYWxsYmFja0Z1bmN0aW9ufSBmcm9tICd3ZWJPcHRpbWl6ZXIvdHlwZSdcbmltcG9ydCAnalF1ZXJ5LXRvb2xzJ1xuLypcbiAgICBOT1RFOiBCaW5kIG1hcmtlciBjbHVzdGVycyBnb29nbGUgaW5zdGFuY2UgdG8gYW4gZW1wdHkgb2JqZWN0IGZpcnN0IHRvIGFkZFxuICAgIHRoZSBydW50aW1lIGV2YWx1YXRlZCBpbnN0YW5jZSBsYXRlciB0by5cbiovXG5sZXQgZ29vZ2xlTWFya2VyQ2x1c3RlcmVyOk9iamVjdFxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbi8vIElnbm9yZVR5cGVDaGVja1xuaWYgKEVYUE9SVF9GT1JNQVQgPT09ICd2YXInKSB7XG4gICAgcmVxdWlyZSgnZ29vZ2xlTWFya2VyQ2x1c3RlcmVyJylcbiAgICAvLyBJZ25vcmVUeXBlQ2hlY2tcbiAgICBnb29nbGVNYXJrZXJDbHVzdGVyZXIgPSB7Q2xhc3M6IE1hcmtlckNsdXN0ZXJlcn1cbn0gZWxzZVxuICAgIC8vIElnbm9yZVR5cGVDaGVja1xuICAgIGdvb2dsZU1hcmtlckNsdXN0ZXJlciA9IHJlcXVpcmUoXG4gICAgICAgICdleHBvcnRzP0NsYXNzPU1hcmtlckNsdXN0ZXJlcixnb29nbGU9Z29vZ2xlIWltcG9ydHM/Z29vZ2xlPT57fSEnICtcbiAgICAgICAgJ2dvb2dsZU1hcmtlckNsdXN0ZXJlcicpXG4vKiBlc2xpbnQtZW5hYmxlIG5vLXVuZGVmICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1kdXBsaWNhdGUtaW1wb3J0cyAqL1xuaW1wb3J0IHR5cGUgeyREb21Ob2RlLCAkRGVmZXJyZWR9IGZyb20gJ2pRdWVyeS10b29scydcbi8qIGVzbGludC1lbmFibGUgbm8tZHVwbGljYXRlLWltcG9ydHMgKi9cbi8vIGVuZHJlZ2lvblxuLy8gcmVnaW9uIHR5cGVzXG5leHBvcnQgdHlwZSBQb3NpdGlvbiA9IHtcbiAgICBsYXRpdHVkZTpudW1iZXI7XG4gICAgbG9uZ2l0dWRlOm51bWJlcjtcbn1cbi8vIGVuZHJlZ2lvblxuY29uc3QgY29udGV4dDpPYmplY3QgPSAoKCk6T2JqZWN0ID0+IHtcbiAgICBpZiAoJC50eXBlKHdpbmRvdykgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICgkLnR5cGUoZ2xvYmFsKSA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICByZXR1cm4gKCQudHlwZShtb2R1bGUpID09PSAndW5kZWZpbmVkJykgPyB7fSA6IG1vZHVsZVxuICAgICAgICByZXR1cm4gZ2xvYmFsXG4gICAgfVxuICAgIHJldHVybiB3aW5kb3dcbn0pKClcbmlmICghY29udGV4dC5oYXNPd25Qcm9wZXJ0eSgnZG9jdW1lbnQnKSAmJiAkLmhhc093blByb3BlcnR5KCdjb250ZXh0JykpXG4gICAgY29udGV4dC5kb2N1bWVudCA9ICQuY29udGV4dFxuLy8gcmVnaW9uIHBsdWdpbnMvY2xhc3Nlc1xuLyoqXG4gKiBBIGpRdWVyeSBzdG9yZWxvY2F0b3IgcGx1Z2luLlxuICogRXhwZWN0ZWQgc3RvcmUgZGF0YSBmb3JtYXQ6XG4gKiB7bGF0aXR1ZGU6IE5VTUJFUiwgbG9uZ2l0dWRlOiBOVU1CRVIsIG1hcmtlckljb25GaWxlTmFtZTogU1RSSU5HfVxuICogQHByb3BlcnR5IHN0YXRpYzptYXBzIC0gSG9sZHMgdGhlIGN1cnJlbnRseSB1c2VkIG1hcHMgY2xhc3MuXG4gKiBAcHJvcGVydHkgc3RhdGljOl9uYW1lIC0gRGVmaW5lcyB0aGlzIGNsYXNzIG5hbWUgdG8gYWxsb3cgcmV0cmlldmluZyB0aGVtXG4gKiBhZnRlciBuYW1lIG1hbmdsaW5nLlxuICogQHByb3BlcnR5IHN0YXRpYzpfYXBpTG9hZCAtIEhvbGRzIHRoZSBjdXJyZW50bHkgcHJvbWlzZSB0byByZXRyaWV2ZSBhIG5ld1xuICogbWFwcyBhcGkuXG4gKiBAcHJvcGVydHkgY3VycmVudFNlYXJjaFJlc3VsdHMgLSBTYXZlcyBsYXN0IGZvdW5kIHNlYXJjaCByZXN1bHRzLlxuICogQHByb3BlcnR5IGN1cnJlbnRTZWFyY2hUZXh0IC0gU2F2ZXMgbGFzdCBzZWFyY2hlZCBzdHJpbmcuXG4gKiBAcHJvcGVydHkgcmVzdWx0c0RvbU5vZGUgLSBTYXZlcyBjdXJyZW50bHkgb3BlbmVkIHJlc3VsdHMgZG9tIG5vZGUgb3IgbnVsbFxuICogaWYgbm8gcmVzdWx0cyBleGlzdHMgeWV0LlxuICogQHByb3BlcnR5IGN1cnJlbnRTZWFyY2hSZXN1bHRzRG9tTm9kZSAtIFNhdmVzIGN1cnJlbnQgc2VhcmNoIHJlc3VsdHMgY29udGVudFxuICogZG9tIG5vZGUuXG4gKiBAcHJvcGVydHkgY3VycmVudGx5T3BlbldpbmRvdyAtIFNhdmVzIGN1cnJlbnRseSBvcGVuZWQgd2luZG93IGluc3RhbmNlLlxuICogQHByb3BlcnR5IGN1cnJlbnRseUhpZ2hsaWdodGVkTWFya2VyIC0gU2F2ZXMgY3VycmVudGx5IGhpZ2hsaWdodGVkIG1hcmtlclxuICogaW5zdGFuY2UuXG4gKiBAcHJvcGVydHkgc2VhcmNoUmVzdWx0c0RpcnR5IC0gSW5kaWNhdGVzIHdlYXRoZXIgY3VycmVudCBzZWFyY2ggcmVzdWx0c1xuICogYXJlbid0IHZhbGlkIGFueW1vcmUuXG4gKiBAcHJvcGVydHkgc2VlbkxvY2F0aW9ucyAtIFNhdmVzIGFsbCBzZWVuIGxvY2F0aW9ucyB0byByZWNvZ25pemUgZHVwbGljYXRlcy5cbiAqIEBwcm9wZXJ0eSBtYXJrZXJzIC0gU2F2ZXMgYWxsIHJlY29nbml6ZWQgbWFya2Vycy5cbiAqIEBwcm9wZXJ0eSBjdXJyZW50U2VhcmNoUmVzdWx0UmFuZ2UgLSBQdWJsaWMgZWRpdGFibGUgcHJvcGVydHkgdG8gc2V0IGN1cnJlbnRcbiAqIHNlYXJjaCByZXN1bHQgcmFuZ2UuIFRoaXMgaXMgdXNlZnVsIGZvciBwYWdpbmF0aW9uIGltcGxlbWVudGF0aW9ucyBpblxuICogdGVtcGxhdGUgbGV2ZWwuXG4gKiBAcHJvcGVydHkgX29wdGlvbnMgLSBTYXZlcyBhbGwgcGx1Z2luIGludGVyZmFjZSBvcHRpb25zLlxuICogQHByb3BlcnR5IF9vcHRpb25zLnN0b3Jlc1xuICoge3N0cmluZ3xBcnJheS48c3RyaW5nPnxPYmplY3QuPHN0cmluZywgbnVtYmVyfEZ1bmN0aW9uPn0gLSBVUkwgdG8gcmV0cmlldmVcbiAqIHN0b3JlcywgbGlzdCBvZiBzdG9yZXMgb3Igb2JqZWN0IGRlc2NyaWJpbmcgYm91bmRzIHRvIGNyZWF0ZSByYW5kb20gc3RvcmVzXG4gKiB3aXRoaW4uIElmIGEgXCJnZW5lcmF0ZVByb3BlcnRpZXNcIiBmdW5jdGlvbiBpcyBnaXZlbiBpdCB3aWxsIGJlIGNhbGxlZCB0b1xuICogcmV0cmlldmUgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGZvciBlYWNoIHN0b3JlLiBUaGUgc3BlY2lmaWVkIHN0b3JlIHdpbGwgYmVcbiAqIGdpdmVuIHRvIHRoZSBmdW5jdGlvbi5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5hZGR0aW9uYWxTdG9yZVByb3BlcnRpZXMge09iamVjdC48c3RyaW5nLCBtaXhlZD59IC1cbiAqIEFkZGl0aW9uYWwgc3RhdGljIHN0b3JlIHByb3BlcnRpZXMgd2hpY2ggd2lsbCBiZSBhdmFpbGFibGUgdG8gZWFjaCBzdG9yZS5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5pY29uUGF0aCB7c3RyaW5nfSAtIFBhdGggcHJlZml4IHRvIHNlYXJjaCBmb3IgbWFya2VyXG4gKiBpY29ucy5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5kZWZhdWx0TWFya2VySWNvbkZpbGVOYW1lIHtzdHJpbmd9IC0gU3BlY2lmaWVzIGEgZmFsbGJhY2tcbiAqIG1hcmtlclxuICogaWNvbiAoaWYgbm8gc3RvcmUgc3BlY2lmaWMgaWNvbiB3YXMgc2V0KS4gSWYgc2V0IHRvIFwibnVsbFwiIGdvb2dsZSB3aWxsIHBsYWNlXG4gKiBhIGZhbGxiYWNrIGljb24uXG4gKiBAcHJvcGVydHkgX29wdGlvbnMuc3RhcnRMb2NhdGlvbiB7bnVsbHxPYmplY3R9IC0gSWYgbm90IHByb3ZpZGVkIHdlXG4gKiBpbml0aWFsaXplIHRoZSBtYXAgd2l0aCBjZW50ZXIgaW4gY3VycmVudCBsb2NhdGlvbiBkZXRlcm1pbmVkIGJ5IGludGVybmV0XG4gKiBwcm90b2NvbCBhZGRyZXNzLiBJZiBhbiBvYmplY3QgaXMgZ2l2ZW4gYSBcImxhdGl0dWRlXCIgYW5kIFwibG9uZ2l0dWRlXCIgd2l0aCBhXG4gKiBzYXZlZCBmbG9hdCBhcmUgYXNzdW1lZC5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5mYWxsYmFja0xvY2F0aW9uIHtPYmplY3R9IC0gRmFsbGJhY2sgbG9jYXRpb24gaWZcbiAqIGF1dG9tYXRpYyBsb2NhdGlvbiBkZXRlcm1pbmF0aW9uIGhhcyBmYWlsZWQuXG4gKiBAcHJvcGVydHkgX29wdGlvbnMuZmFsbGJhY2tMb2NhdGlvbi5sYXRpdHVkZSB7bnVtYmVyfSAtIExhdGl0dWRlIHZhbHVlLlxuICogQHByb3BlcnR5IF9vcHRpb25zLmZhbGxiYWNrTG9jYXRpb24ubG9uZ2l0dWRlIHtudW1iZXJ9IC0gTG9uZ2l0dWRlIHZhbHVlLlxuICogQHByb3BlcnR5IF9vcHRpb25zLmlwIHtudWxsfHN0cmluZ30gLSBJZiBwcm92aWRlZCBnaXZlbiBpcCB3aWxsIGJlIHVzZWQgdG9cbiAqIGRldGVybWluZSBjdXJyZW50IGxvY2F0aW9uIGluc3RlYWQgb2YgYXV0b21hdGljYWxseSBkZXRlcm1pbmVkIG9uZS5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5pcFRvTG9jYXRpb24ge09iamVjdH0gLSBDb25maWd1cmF0aW9uIGZvciBpcCB0byBsb2NhdGlvblxuICogY29udmVyc2lvbi5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5pcFRvTG9jYXRpb24uYXBwbGljYXRpb25JbnRlcmZhY2VVUkwge3N0cmluZ30gLSBJUCB0b1xuICogbG9jYXRpb24gZGV0ZXJtaW5hdGlvbiBhcHBsaWNhdGlvbiBpbnRlcmZhY2UgdXJsLiB7MX0gYW5kIHsyfSByZXByZXNlbnRzXG4gKiBjdXJyZW50bHkgdXNlZCBwcm90b2NvbCBhbmQgcG90ZW50aWFsbHkgZ2l2ZW4gaXAuXG4gKiBAcHJvcGVydHkgX29wdGlvbnMuaXBUb0xvY2F0aW9uLnRpbWVvdXRJbk1pbGxpc2Vjb25kcyB7bnVtYmVyfSAtIFRpbWUgdG9cbiAqIHdhaXQgZm9yIGlwIHJlc29sdmUuIElmIHRpbWUgaXMgdXAgaW5pdGlhbGl6ZSBvbiBnaXZlbiBmYWxsYmFjayBsb2NhdGlvbi5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5pcFRvTG9jYXRpb24uYm91bmRzXG4gKiB7T2JqZWN0LjxzdHJpbmcsIE9iamVjdC48c3RyaW5nLCBudW1iZXI+Pn0gLSBEZWZpbmVzIGJvdW5kIHdpdGhpbmdcbiAqIGRldGVybWluZWQgbG9jYXRpb25zIHNob3VsZCBiZS4gSWYgcmVzb2x2ZWQgbG9jYXRpb24gaXNuJ3Qgd2l0aGluIHRoaXNcbiAqIGxvY2F0aW9uIGl0IHdpbGwgYmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5pcFRvTG9jYXRpb24uYm91bmQubm9ydGhFYXN0IHtPYmplY3QuPHN0cmluZywgbnVtYmVyPn0gLVxuICogRGVmaW5lcyBub3J0aCBlYXN0IGJvdW5kLlxuICogQHByb3BlcnR5IF9vcHRpb25zLmlwVG9Mb2NhdGlvbi5ib3VuZC5ub3J0aEVhc3QubGF0aXR1ZGUge251bWJlcn0gLSBOb3J0aFxuICogZWFzdCBsYXRpdHVkZSBib25kLlxuICogQHByb3BlcnR5IF9vcHRpb25zLmlwVG9Mb2NhdGlvbi5ib3VuZC5ub3J0aEVhc3QubG9uZ2l0dWRlIHtudW1iZXJ9IC0gTm9ydGhcbiAqIGVhc3QgbG9uZ2l0dWRlIGJvbmQuXG4gKiBAcHJvcGVydHkgX29wdGlvbnMuaXBUb0xvY2F0aW9uLmJvdW5kLnNvdXRoV2VzdCB7T2JqZWN0LjxzdHJpbmcsIG51bWJlcj59IC1cbiAqIERlZmluZWQgc291dGggd2VzdCBib3VuZC5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5pcFRvTG9jYXRpb24uYm91bmQuc291dGhXZXN0LmxhdGl0dWRlIHtudW1iZXJ9IC0gU291dGhcbiAqIGVhc3QgbGF0aXR1ZGUgYm91bmQuXG4gKiBAcHJvcGVydHkgX29wdGlvbnMuaXBUb0xvY2F0aW9uLmJvdW5kLnNvdXRoV2VzdC5sb25naXR1ZGUge251bWJlcn0gLSBTb3V0aFxuICogd2VzdCBsb25naXR1ZGUgYm91bmQuXG4gKiBAcHJvcGVydHkgX29wdGlvbnMubWFwIHtPYmplY3R9IC0gSW5pdGlhbCB2aWV3IHByb3BlcnRpZXMuXG4gKiBAcHJvcGVydHkgX29wdGlvbnMuc2hvd0lucHV0QWZ0ZXJMb2FkZWREZWxheUluTWlsbGlzZWNvbmRzIHtudW1iZXJ9IC0gRGVsYXlcbiAqIGJlZm9yZSB3ZSBzaG93IHNlYXJjaCBpbnB1dCBmaWVsZC5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5pbnB1dEZhZGVJbk9wdGlvbiB7T2JqZWN0LjxzdHJpbmcsIG1peGVkPn0gLSBUcmFuc2l0aW9uXG4gKiBvcHRpb25zIHRvIHNob3cgc2VhcmNoIGlucHV0IGZpZWxkLlxuICogQHByb3BlcnR5IF9vcHRpb25zLmRpc3RhbmNlVG9Nb3ZlQnlEdXBsaWNhdGVkRW50cmllcyB7bnVtYmVyfSAtIERpc3RhbmNlIHRvXG4gKiBtb3ZlIGlmIHN0b3JlcyBhcmUgZGV0ZXJtaW5lZCB3aXRoIHNhbWUgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZS5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5tYXJrZXIge09iamVjdHxudWxsfSAtIE9wdGlvbnMgcGFzc2VkIHRvIHRoZSBtYXJrZXJcbiAqIGNsdXN0ZXIuIElmIHNldCB0byBcIm51bGxcIiBubyBtYXJrZXIgY2x1c3RlciB3aWxsIGFwcGVhci5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5pY29uIHtPYmplY3R9IC0gT3B0aW9ucyBwYXNzZWQgdG8gdGhlIGljb24uXG4gKiBAcHJvcGVydHkgX29wdGlvbnMuc3VjY2Vzc2Z1bFNlYXJjaFpvb20ge251bWJlcn0gLSBTcGVjaWZpZXMgYSB6b29tIHZhbHVlXG4gKiB3aWNoIHdpbGwgYmUgYWRqdXN0ZWQgYWZ0ZXIgc3VjY2Vzc2Z1bGx5IHBpY2tlZCBhIHNlYXJjaCByZXN1bHQuIElmIHNldCB0b1xuICogXCJudWxsXCIgbm8gem9vbSBjaGFuZ2UgaGFwcGVucy5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5pbmZvV2luZG93IHtPYmplY3QuPHN0cmluZywgbWl4ZWQ+fSAtIEluZm8gd2luZG93XG4gKiBvcHRpb25zLlxuICogQHByb3BlcnR5IF9vcHRpb25zLmluZm9XaW5kb3cuY29udGVudCB7RnVuY3Rpb258c3RyaW5nfG51bGx9IC0gRnVuY3Rpb24gb3JcbiAqIHN0cmluZyByZXR1cm5pbmcgb3IgcmVwcmVzZW50aW5nIHRoZSBpbmZvIGJveC4gSWYgYSBmdW5jdGlvbiBpcyBnaXZlbiBhbmQgYVxuICogcHJvbWlzZSBpcyByZXR1cm5lZCB0aGUgaW5mbyBib3ggd2lsbCBiZSBmaWxsZWQgd2l0aCB0aGUgZ2l2ZW4gbG9hZGluZ1xuICogY29udGVudCBhbmQgdXBkYXRlZCB3aXRoIHRoZSByZXNvbHZlZCBkYXRhLiBUaGUgZnVuY3Rpb24gYmVjb21lcyB0aGVcbiAqIGNvcnJlc3BvbmRpbmcgbWFya2VyIGFzIGZpcnN0IGFyZ3VtZW50IGFuZCB0aGUgc3RvcmUgbG9jYXRvciBpbnN0YW5jZSBhc1xuICogc2Vjb25kIGFyZ3VtZW50LiBJZiBub3RoaW5nIGlzIHByb3ZpZGVkIGFsbCBhdmFpbGFibGUgZGF0YSB3aWxsIGJlIGxpc3RlZCBpblxuICogYSBnZW5lcmljIGluZm8gd2luZG93LlxuICogQHByb3BlcnR5IF9vcHRpb25zLmluZm9XaW5kb3cuYWRkaXRpb25hbE1vdmVUb0JvdHRvbUluUGl4ZWwge251bWJlcn0gLVxuICogQWRkaXRpb25hbCBtb3ZlIHRvIGJvdHRvbSByZWxhdGl2ZSB0byB0aGUgbWFya2VyIGlmIGFuIGluZm8gd2luZG93IGhhcyBiZWVuXG4gKiBvcGVuZWQuXG4gKiBAcHJvcGVydHkgX29wdGlvbnMuaW5mb1dpbmRvdy5sb2FkaW5nQ29udGVudCB7c3RyaW5nfSAtIENvbnRlbnQgdG8gc2hvdyBpblxuICogdGhlIGluZm8gd2luZG93IGR1cmluZyBpbmZvIHdpbmRvdyBsb2FkLlxuICogQHByb3BlcnR5IF9vcHRpb25zLnNlYXJjaEJveCB7bnVtYmVyfE9iamVjdH0gLSBJZiBhIG51bWJlciBpcyBnaXZlbiBhXG4gKiBnZW5lcmljIHNlYXJjaCB3aWxsIGJlIHByb3ZpZGVkIGFuZCBnaXZlbiBudW1iZXIgd2lsbCBiZSBpbnRlcnByZXQgYXMgc2VhcmNoXG4gKiByZXN1bHQgcHJlY2lzaW9uIHRvbGVyYW5jZSB0byBpZGVudGlmeSBhIG1hcmtlciBhcyBzZWFyY2ggcmVzdWx0LiBJZiBhblxuICogb2JqZWN0IGlzIGdpdmVuIGl0IGluZGljYXRlcyB3aGF0IHNob3VsZCBiZSBzZWFyY2ggZm9yLiBUaGUgb2JqZWN0IGNhbiBob2xkXG4gKiB1cCB0byBuaW5lIGtleXMuIFwicHJvcGVydGllc1wiIHRvIHNwZWNpZnkgd2hpY2ggc3RvcmUgZGF0YSBzaG91bGQgY29udGFpblxuICogZ2l2ZW4gc2VhcmNoIHRleHQsIFwibWF4aW11bU51bWJlck9mUmVzdWx0c1wiIHRvIGxpbWl0IHRoZSBhdXRvIGNvbXBsZXRlXG4gKiByZXN1bHQsIFwibG9hZGluZ0NvbnRlbnRcIiB0byBkaXNwbGF5IHdoaWxlIHRoZSByZXN1bHRzIGFyZSBsb2FkaW5nLFxuICogXCJudW1iZXJPZkFkZGl0aW9uYWxHZW5lcmljUGxhY2VzXCIgYSB0dXBsZSBkZXNjcmliaW5nIGEgcmFuZ2Ugb2YgbWluaW1hbCB0b1xuICogbWF4aW1hbCBsaW1pdHMgb2YgYWRkaXRpb25hbCBnZW5lcmljIGdvb2dsZSBzdWdnZXN0aW9ucyBkZXBlbmRpbmcgb24gbnVtYmVyXG4gKiBvZiBsb2NhbCBzZWFyY2ggcmVzdWx0cywgXCJtYXhpbWFsRGlzdGFuY2VJbk1ldGVyXCIgdG8gc3BlY2lmeSBtYXhpbWFsXG4gKiBkaXN0YW5jZSBmcm9tIGN1cnJlbnQgcG9zaXRpb24gdG8gc2VhcmNoIHN1Z2dlc3Rpb25zLCBcImdlbmVyaWNQbGFjZUZpbHRlclwiXG4gKiBzcGVjaWZpZXMgYSBmdW5jdGlvbiB3aGljaCBnZXRzIGEgcmVsZXZhbnQgcGxhY2UgdG8gZGVjaWRlIGlmIHRoZSBwbGFjZVxuICogc2hvdWxkIGJlIGluY2x1ZGVkIChyZXR1cm5zIGEgYm9vbGVhbiB2YWx1ZSksIFwicHJlZmVyZUdlbmVyaWNSZXN1bHRzXCJcbiAqIHNwZWNpZmllcyBhIGJvb2xlYW4gdmFsdWUgaW5kaWNhdGluZyBpZiBnZW5lcmljIHNlYXJjaCByZXN1bHRzIHNob3VsZCBiZSB0aGVcbiAqIGZpcnN0IHJlc3VsdHMsIFwiZ2VuZXJpY1BsYWNlU2VhcmNoT3B0aW9uc1wiIHNwZWNpZmllcyBob3cgYSBnZW5lcmljIHBsYWNlXG4gKiBzZWFyY2ggc2hvdWxkIGJlIGRvbmUgKGdvb2dsZSBtYXBzIHJlcXVlc3Qgb2JqZWN0IHNwZWNpZmljYXRpb24pIGFuZFxuICogXCJjb250ZW50XCIgdG8gcmVuZGVyIHRoZSBzZWFyY2ggcmVzdWx0cy4gXCJjb250ZW50XCIgY2FuIGJlIGEgZnVuY3Rpb24gb3JcbiAqIHN0cmluZyByZXR1cm5pbmcgb3IgcmVwcmVzZW50aW5nIHRoZSBzZWFyY2ggcmVzdWx0cy4gSWYgYSBmdW5jdGlvbiBpcyBnaXZlblxuICogYW5kIGEgcHJvbWlzZSBpcyByZXR1cm5lZCB0aGUgaW5mbyBib3ggd2lsbCBiZSBmaWxsZWQgd2l0aCB0aGUgZ2l2ZW4gbG9hZGluZ1xuICogY29udGVudCBhbmQgdXBkYXRlZCB3aXRoIHRoZSByZXNvbHZlZCBkYXRhLiBUaGUgZnVuY3Rpb24gYmVjb21lcyBzZWFyY2hcbiAqIHJlc3VsdHMgYXMgZmlyc3QgYXJndW1lbnQsIGEgYm9vbGVhbiB2YWx1ZSBhcyBzZWNvbmQgYXJndW1lbnQgaW5kaWNhdGluZyBpZlxuICogdGhlIG1heGltdW0gbnVtYmVyIG9mIHNlYXJjaCByZXN1bHRzIHdhcyByZWFjaGVkIGFuZCB0aGUgc3RvcmUgbG9jYXRvclxuICogaW5zdGFuY2UgYXMgdGhpcmQgYXJndW1lbnQuIElmIG5vdGhpbmcgaXMgcHJvdmlkZWQgYWxsIGF2YWlsYWJsZSBkYXRhIHdpbGxcbiAqIGJlIGxpc3RlZCBpbiBhIGdlbmVyaWMgaW5mbyB3aW5kb3cuXG4gKiBAcHJvcGVydHkgX29wdGlvbnMub25JbmZvV2luZG93T3BlbiB7RnVuY3Rpb259IC0gVHJpZ2dlcnMgaWYgYSBtYXJrZXIgaW5mb1xuICogd2luZG93IHdpbGwgYmUgb3BlbmVkLlxuICogQHByb3BlcnR5IF9vcHRpb25zLm9uSW5mb1dpbmRvd09wZW5lZCB7RnVuY3Rpb259IC0gVHJpZ2dlcnMgaWYgYSBtYXJrZXIgaW5mb1xuICogd2luZG93IGhhcyBmaW5pc2hlZCBvcGVuaW5nLlxuICogQHByb3BlcnR5IF9vcHRpb25zLm9uQWRkU2VhcmNoUmVzdWx0cyB7RnVuY3Rpb259IC0gVHJpZ2dlcnMgYmVmb3JlIG5ld1xuICogc2VhcmNoIHJlc3VsdHMgYXBwZWFycy5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5vblJlbW92ZVNlYXJjaFJlc3VsdHMge0Z1bmN0aW9ufSAtIFRyaWdnZXJzIGJlZm9yZSBvbGRcbiAqIHNlYXJjaCByZXN1bHRzIHdpbGwgYmUgcmVtb3ZlZC5cbiAqIEBwcm9wZXJ0eSBfb3B0aW9ucy5vbk9wZW5TZWFyY2hSZXN1bHRzIHtGdW5jdGlvbn0gLSBUcmlnZ2VycyBiZWZvcmUgc2VhcmNoXG4gKiByZXN1bHQgYm94IGFwcGVhcnMuXG4gKiBAcHJvcGVydHkgX29wdGlvbnMub25DbG9zZVNlYXJjaFJlc3VsdHMge0Z1bmN0aW9ufSAtIFRyaWdnZXJzIGJlZm9yZSBzZWFyY2hcbiAqIHJlc3VsdCBib3ggd2lsbCBiZSBoaWRkZW4uXG4gKiBAcHJvcGVydHkgX29wdGlvbnMub25NYXJrZXJIaWdobGlnaHRlZCB7RnVuY3Rpb259IC0gVHJpZ2dlcnMgYWZ0ZXIgYSBtYXJrZXJcbiAqIHN0YXJ0cyB0byBoaWdobGlnaHQuXG4gKi9cbmNsYXNzIFN0b3JlTG9jYXRvciBleHRlbmRzICQuVG9vbHMuY2xhc3Mge1xuICAgIC8vIHJlZ2lvbiBzdGF0aWMgcHJvcGVydGllc1xuICAgIHN0YXRpYyBtYXBzOk9iamVjdFxuICAgIHN0YXRpYyBfbmFtZTpzdHJpbmcgPSAnU3RvcmVMb2NhdG9yJ1xuICAgIHN0YXRpYyBfYXBpTG9hZDokRGVmZXJyZWQ8JERvbU5vZGU+XG4gICAgLy8gZW5kcmVnaW9uXG4gICAgLy8gcmVnaW9uIGR5bmFtaWMgcHJvcGVydGllc1xuICAgIGN1cnJlbnRTZWFyY2hSZXN1bHRzOkFycmF5PE9iamVjdD5cbiAgICBjdXJyZW50U2VhcmNoVGV4dDo/c3RyaW5nXG4gICAgcmVzdWx0c0RvbU5vZGU6PyREb21Ob2RlXG4gICAgY3VycmVudFNlYXJjaFJlc3VsdHNEb21Ob2RlOj8kRG9tTm9kZVxuICAgIGN1cnJlbnRseU9wZW5XaW5kb3c6P09iamVjdFxuICAgIGN1cnJlbnRseUhpZ2hsaWdodGVkTWFya2VyOj9PYmplY3RcbiAgICBzZWFyY2hSZXN1bHRzRGlydHk6Ym9vbGVhblxuICAgIHNlZW5Mb2NhdGlvbnM6QXJyYXk8c3RyaW5nPlxuICAgIG1hcmtlcnM6QXJyYXk8T2JqZWN0PlxuICAgIGN1cnJlbnRTZWFyY2hSZXN1bHRSYW5nZTo/QXJyYXk8bnVtYmVyPjtcbiAgICAvLyBlbmRyZWdpb25cbiAgICAvKipcbiAgICAgKiBFbnRyeSBwb2ludCBmb3Igb2JqZWN0IG9yaWVudGF0ZWQgalF1ZXJ5IHBsdWdpbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgdG8gb3ZlcndyaXRlIGRlZmF1bHQgb25lcy5cbiAgICAgKiBAcmV0dXJucyBDdXJyZW50bHkgc2VsZWN0ZWQgZG9tIG5vZGUuXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZShvcHRpb25zOk9iamVjdCA9IHt9KTokRGVmZXJyZWQ8JERvbU5vZGU+IHtcbiAgICAgICAgLy8gcmVnaW9uIHByb3BlcnRpZXNcbiAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0cyA9IFtdXG4gICAgICAgIHRoaXMuY3VycmVudFNlYXJjaFRleHQgPSBudWxsXG4gICAgICAgIHRoaXMucmVzdWx0c0RvbU5vZGUgPSBudWxsXG4gICAgICAgIHRoaXMuY3VycmVudFNlYXJjaFJlc3VsdHNEb21Ob2RlID0gbnVsbFxuICAgICAgICB0aGlzLmN1cnJlbnRseU9wZW5XaW5kb3cgPSBudWxsXG4gICAgICAgIHRoaXMuY3VycmVudGx5SGlnaGxpZ2h0ZWRNYXJrZXIgPSBudWxsXG4gICAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c0RpcnR5ID0gZmFsc2VcbiAgICAgICAgdGhpcy5zZWVuTG9jYXRpb25zID0gW11cbiAgICAgICAgdGhpcy5tYXJrZXJzID0gW11cbiAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0UmFuZ2UgPSBudWxsXG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSB7XG4gICAgICAgICAgICBhcGk6IHtcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvanMnICtcbiAgICAgICAgICAgICAgICAgICAgJz92PTMmc2Vuc29yPWZhbHNlJmxpYnJhcmllcz1wbGFjZXMsZ2VvbWV0cnkmY2FsbGJhY2s9ezF9JyxcbiAgICAgICAgICAgICAgICBjYWxsYmFja05hbWU6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdG9yZXM6IHtcbiAgICAgICAgICAgICAgICBub3J0aEVhc3Q6IHtsYXRpdHVkZTogODUsIGxvbmdpdHVkZTogMTgwfSxcbiAgICAgICAgICAgICAgICBzb3V0aFdlc3Q6IHtsYXRpdHVkZTogLTg1LCBsb25naXR1ZGU6IC0xODB9LFxuICAgICAgICAgICAgICAgIG51bWJlcjogMTAwLFxuICAgICAgICAgICAgICAgIGdlbmVyYXRlUHJvcGVydGllczogKHN0b3JlOk9iamVjdCk6T2JqZWN0ID0+IHN0b3JlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkdGlvbmFsU3RvcmVQcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgICAgIGljb25QYXRoOiAnL3dlYkFzc2V0L2ltYWdlL3N0b3JlTG9jYXRvci8nLFxuICAgICAgICAgICAgZGVmYXVsdE1hcmtlckljb25GaWxlTmFtZTogbnVsbCxcbiAgICAgICAgICAgIHN0YXJ0TG9jYXRpb246IG51bGwsXG4gICAgICAgICAgICBmYWxsYmFja0xvY2F0aW9uOiB7bGF0aXR1ZGU6IDUxLjEyNDIxMywgbG9uZ2l0dWRlOiAxMC4xNDc3MDV9LFxuICAgICAgICAgICAgaXA6IG51bGwsXG4gICAgICAgICAgICBpcFRvTG9jYXRpb246IHtcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkludGVyZmFjZVVSTDogJ3sxfTovL2ZyZWVnZW9pcC5uZXQvanNvbi97Mn0nLFxuICAgICAgICAgICAgICAgIHRpbWVvdXRJbk1pbGxpc2Vjb25kczogNTAwMCxcbiAgICAgICAgICAgICAgICBib3VuZHM6IHtcbiAgICAgICAgICAgICAgICAgICAgbm9ydGhFYXN0OiB7bGF0aXR1ZGU6IDg1LCBsb25naXR1ZGU6IDE4MH0sXG4gICAgICAgICAgICAgICAgICAgIHNvdXRoV2VzdDoge2xhdGl0dWRlOiAtODUsIGxvbmdpdHVkZTogLTE4MH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWFwOiB7em9vbTogM30sXG4gICAgICAgICAgICBzaG93SW5wdXRBZnRlckxvYWRlZERlbGF5SW5NaWxsaXNlY29uZHM6IDUwMCxcbiAgICAgICAgICAgIGlucHV0RmFkZUluT3B0aW9uOiB7ZHVyYXRpb246ICdmYXN0J30sXG4gICAgICAgICAgICBkaXN0YW5jZVRvTW92ZUJ5RHVwbGljYXRlZEVudHJpZXM6IDAuMDAwMSxcbiAgICAgICAgICAgIG1hcmtlcjoge1xuICAgICAgICAgICAgICAgIGNsdXN0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZ3JpZFNpemU6IDEwMCwgbWF4Wm9vbTogMTEsIGltYWdlUGF0aDpcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwczovL2Nkbi5yYXdnaXQuY29tL2dvb2dsZW1hcHMvJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnanMtbWFya2VyLWNsdXN0ZXJlci9naC1wYWdlcy9pbWFnZXMvbSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGljb246IHtcbiAgICAgICAgICAgICAgICAgICAgc2l6ZToge3dpZHRoOiA0NCwgaGVpZ2h0OiA0OSwgdW5pdDogJ3B4J30sXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlZFNpemU6IHt3aWR0aDogNDQsIGhlaWdodDogNDksIHVuaXQ6ICdweCd9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3NmdWxTZWFyY2hab29tOiAxMixcbiAgICAgICAgICAgIGluZm9XaW5kb3c6IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBudWxsLFxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxNb3ZlVG9Cb3R0b21JblBpeGVsOiAxMjAsXG4gICAgICAgICAgICAgICAgbG9hZGluZ0NvbnRlbnQ6ICc8ZGl2IGNsYXNzPVwiaWRsZVwiPmxvYWRpbmcuLi48L2Rpdj4nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VhcmNoQm94OiA1MCxcbiAgICAgICAgICAgIG9uSW5mb1dpbmRvd09wZW46ICQubm9vcCxcbiAgICAgICAgICAgIG9uSW5mb1dpbmRvd09wZW5lZDogJC5ub29wLFxuICAgICAgICAgICAgb25BZGRTZWFyY2hSZXN1bHRzOiAkLm5vb3AsXG4gICAgICAgICAgICBvblJlbW92ZVNlYXJjaFJlc3VsdHM6ICQubm9vcCxcbiAgICAgICAgICAgIG9uT3BlblNlYXJjaFJlc3VsdHM6ICQubm9vcCxcbiAgICAgICAgICAgIG9uQ2xvc2VTZWFyY2hSZXN1bHRzOiAkLm5vb3AsXG4gICAgICAgICAgICBvbk1hcmtlckhpZ2hsaWdodGVkOiAkLm5vb3BcbiAgICAgICAgfVxuICAgICAgICAvLyBlbmRyZWdpb25cbiAgICAgICAgLy8gTWVyZ2VzIGdpdmVuIG9wdGlvbnMgd2l0aCBkZWZhdWx0IG9wdGlvbnMgcmVjdXJzaXZlbHkuXG4gICAgICAgIHN1cGVyLmluaXRpYWxpemUob3B0aW9ucylcbiAgICAgICAgbGV0IGxvYWRJbml0aWFsaXplZDpib29sZWFuID0gdHJ1ZVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29uc3RydWN0b3IuX2FwaUxvYWQgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBsb2FkSW5pdGlhbGl6ZWQgPSBmYWxzZVxuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5fYXBpTG9hZCA9ICQuRGVmZXJyZWQoKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdDokRGVmZXJyZWQ8JERvbU5vZGU+ID0gdGhpcy5jb25zdHJ1Y3Rvci5fYXBpTG9hZC50aGVuKFxuICAgICAgICAgICAgdGhpcy5nZXRNZXRob2QodGhpcy5ib290c3RyYXApKVxuICAgICAgICBpZiAoJ2dvb2dsZScgaW4gY29udGV4dCAmJiAnbWFwcycgaW4gY29udGV4dC5nb29nbGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IubWFwcyA9IGNvbnRleHQuZ29vZ2xlLm1hcHNcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLl9hcGlMb2FkLnN0YXRlKCkgIT09ICdyZXNvbHZlZCcpXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKTokRGVmZXJyZWQ8JERvbU5vZGU+ID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IuX2FwaUxvYWQucmVzb2x2ZSh0aGlzLiRkb21Ob2RlKSlcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICdnb29nbGUnIGluIGNvbnRleHQud2luZG93ICYmICdtYXBzJyBpbiBjb250ZXh0LndpbmRvdy5nb29nbGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yLm1hcHMgPSBjb250ZXh0LndpbmRvdy5nb29nbGUubWFwc1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uc3RydWN0b3IuX2FwaUxvYWQuc3RhdGUoKSAhPT0gJ3Jlc29sdmVkJylcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpOiREZWZlcnJlZDwkRG9tTm9kZT4gPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5fYXBpTG9hZC5yZXNvbHZlKHRoaXMuJGRvbU5vZGUpKVxuICAgICAgICB9IGVsc2UgaWYgKCFsb2FkSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIGxldCBjYWxsYmFja05hbWU6c3RyaW5nXG4gICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9ucy5hcGkuY2FsbGJhY2tOYW1lKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrTmFtZSA9IHRoaXMuX29wdGlvbnMuYXBpLmNhbGxiYWNrTmFtZVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrTmFtZSA9IHRoaXMuY29uc3RydWN0b3IuZGV0ZXJtaW5lVW5pcXVlU2NvcGVOYW1lKClcbiAgICAgICAgICAgIGNvbnRleHQud2luZG93W2NhbGxiYWNrTmFtZV0gPSAoKTp2b2lkID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yLm1hcHMgPSBjb250ZXh0LndpbmRvdy5nb29nbGUubWFwc1xuICAgICAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IuX2FwaUxvYWQucmVzb2x2ZSh0aGlzLiRkb21Ob2RlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJC5nZXRTY3JpcHQodGhpcy5jb25zdHJ1Y3Rvci5zdHJpbmdGb3JtYXQoXG4gICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5hcGkudXJsLCBgd2luZG93LiR7Y2FsbGJhY2tOYW1lfWBcbiAgICAgICAgICAgICkpLmNhdGNoKChyZXNwb25zZTpPYmplY3QsIGVycm9yOkVycm9yKTokRGVmZXJyZWQ8JERvbU5vZGU+ID0+XG4gICAgICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5fYXBpTG9hZC5yZWplY3QoKGVycm9yKSkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHVzZWZ1bCBsb2NhdGlvbiBjbHVzdGVyLCBpbmZvIHdpbmRvd3MgYW5kIG1hcmtlci5cbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBib290c3RyYXAoKTokRGVmZXJyZWQ8JERvbU5vZGU+IHtcbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMuc3RhcnRMb2NhdGlvbilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluaXRpYWxpemVNYXAoKVxuICAgICAgICB0aGlzLl9vcHRpb25zLnN0YXJ0TG9jYXRpb24gPSB0aGlzLl9vcHRpb25zLmZhbGxiYWNrTG9jYXRpb25cbiAgICAgICAgLypcbiAgICAgICAgICAgIE5PVEU6IElmIHJlcXVlc3QgaXMgc2xvd2VyIHRoYW4gdGhlIHRpbWVvdXQgcGFyYW1ldGVyIGZvciBqc29ucFxuICAgICAgICAgICAgcmVxdWVzdCB0aGUgcGFkZGluZyBmdW5jdGlvbiBpc24ndCBzZXQgYW55bW9yZSBzbyBhbiBlcnJvclxuICAgICAgICAgICAgb2NjdXJzLiBUaGF0J3Mgd2h5IHdlIHVzZSBvdXIgb3duIHRpbWVvdXQgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICovXG4gICAgICAgIGxldCBsb2FkZWQ6Ym9vbGVhbiA9IGZhbHNlXG4gICAgICAgIGNvbnN0ICRkZWZlcnJlZDokRGVmZXJyZWQ8JERvbU5vZGU+ID0gJC5EZWZlcnJlZCgpXG4gICAgICAgIGNvbnN0IGZhbGxiYWNrVGltZW91dElEOm51bWJlciA9IHNldFRpbWVvdXQoKCk6dm9pZCA9PiB7XG4gICAgICAgICAgICBsb2FkZWQgPSB0cnVlXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVNYXAoKS50aGVuKCgpOiREZWZlcnJlZDwkRG9tTm9kZT4gPT5cbiAgICAgICAgICAgICAgICAkZGVmZXJyZWQucmVzb2x2ZSh0aGlzLiRkb21Ob2RlKSlcbiAgICAgICAgfSwgdGhpcy5fb3B0aW9ucy5pcFRvTG9jYXRpb24udGltZW91dEluTWlsbGlzZWNvbmRzKVxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiB0aGlzLmNvbnN0cnVjdG9yLnN0cmluZ0Zvcm1hdChcbiAgICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLmlwVG9Mb2NhdGlvbi5hcHBsaWNhdGlvbkludGVyZmFjZVVSTCxcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbC5zdWJzdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIDAsIGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICApLCB0aGlzLl9vcHRpb25zLmlwIHx8ICcnXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29ucCcsIGNhY2hlOiB0cnVlXG4gICAgICAgIH0pLmFsd2F5cygoY3VycmVudExvY2F0aW9uOlBvc2l0aW9uLCB0ZXh0U3RhdHVzOnN0cmluZyk6dm9pZCA9PiB7XG4gICAgICAgICAgICBpZiAoIWxvYWRlZCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChmYWxsYmFja1RpbWVvdXRJRClcbiAgICAgICAgICAgICAgICBsb2FkZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgaWYgKHRleHRTdGF0dXMgPT09ICdzdWNjZXNzJylcbiAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrIGlmIGRldGVybWluZWQgbG9jYXRpb24gaXMgd2l0aGluIGRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdW5kcy5cbiAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9vcHRpb25zLmlwVG9Mb2NhdGlvbi5ib3VuZHMgfHwgKFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IHRoaXMuY29uc3RydWN0b3IubWFwcy5MYXRMbmdCb3VuZHMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IHRoaXMuY29uc3RydWN0b3IubWFwcy5MYXRMbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuaXBUb0xvY2F0aW9uLmJvdW5kcy5zb3V0aFdlc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5pcFRvTG9jYXRpb24uYm91bmRzLnNvdXRoV2VzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxvbmdpdHVkZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IHRoaXMuY29uc3RydWN0b3IubWFwcy5MYXRMbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuaXBUb0xvY2F0aW9uLmJvdW5kcy5ub3J0aEVhc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5pcFRvTG9jYXRpb24uYm91bmRzLm5vcnRoRWFzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxvbmdpdHVkZSkpXG4gICAgICAgICAgICAgICAgICAgICkuY29udGFpbnMobmV3IHRoaXMuY29uc3RydWN0b3IubWFwcy5MYXRMbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50TG9jYXRpb24ubGF0aXR1ZGUsIGN1cnJlbnRMb2NhdGlvbi5sb25naXR1ZGVcbiAgICAgICAgICAgICAgICAgICAgKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLnN0YXJ0TG9jYXRpb24gPSBjdXJyZW50TG9jYXRpb25cbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVNYXAoKS50aGVuKCgpOiREZWZlcnJlZDwkRG9tTm9kZT4gPT5cbiAgICAgICAgICAgICAgICAgICAgJGRlZmVycmVkLnJlc29sdmUodGhpcy4kZG9tTm9kZSkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiAkZGVmZXJyZWRcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgY2x1c3RlciwgaW5mbyB3aW5kb3dzIGFuZCBtYXJrZXIuXG4gICAgICogQHJldHVybnMgVGhlIGN1cnJlbnQgaW5zdGFuY2UuXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZU1hcCgpOiREZWZlcnJlZDwkRG9tTm9kZT4ge1xuICAgICAgICB0aGlzLl9vcHRpb25zLm1hcC5jZW50ZXIgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLkxhdExuZyhcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuc3RhcnRMb2NhdGlvbi5sYXRpdHVkZSxcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuc3RhcnRMb2NhdGlvbi5sb25naXR1ZGUpXG4gICAgICAgIHRoaXMubWFwID0gbmV3IHRoaXMuY29uc3RydWN0b3IubWFwcy5NYXAoJCgnPGRpdj4nKS5hcHBlbmRUbyhcbiAgICAgICAgICAgIHRoaXMuJGRvbU5vZGVcbiAgICAgICAgKVswXSwgdGhpcy5fb3B0aW9ucy5tYXApXG4gICAgICAgIGxldCBtYXJrZXJDbHVzdGVyOj9PYmplY3QgPSBudWxsXG4gICAgICAgIGlmICh0aGlzLl9vcHRpb25zLm1hcmtlci5jbHVzdGVyKSB7XG4gICAgICAgICAgICBnb29nbGVNYXJrZXJDbHVzdGVyZXIuZ29vZ2xlLm1hcHMgPSB0aGlzLmNvbnN0cnVjdG9yLm1hcHNcbiAgICAgICAgICAgIG1hcmtlckNsdXN0ZXIgPSBuZXcgZ29vZ2xlTWFya2VyQ2x1c3RlcmVyLkNsYXNzKFxuICAgICAgICAgICAgICAgIHRoaXMubWFwLCBbXSwgdGhpcy5fb3B0aW9ucy5tYXJrZXIuY2x1c3RlcilcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgYSBtYXJrZXIgZm9yIGVhY2ggcmV0cmlldmVkIHN0b3JlLlxuICAgICAgICBjb25zdCAkYWRkTWFya2VyRGVmZXJyZWQ6JERlZmVycmVkPEFycmF5PE9iamVjdD4+ID0gJC5EZWZlcnJlZCgpXG4gICAgICAgIGNvbnN0IG1hcmtlckxpc3Q6QXJyYXk8T2JqZWN0PiA9IFtdXG4gICAgICAgIGlmICgkLmlzQXJyYXkodGhpcy5fb3B0aW9ucy5zdG9yZXMpKVxuICAgICAgICAgICAgZm9yIChjb25zdCBzdG9yZTpPYmplY3Qgb2YgdGhpcy5fb3B0aW9ucy5zdG9yZXMpIHtcbiAgICAgICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCBzdG9yZSwgdGhpcy5fb3B0aW9ucy5hZGR0aW9uYWxTdG9yZVByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgY29uc3QgbWFya2VyOk9iamVjdCA9IHRoaXMuY3JlYXRlTWFya2VyKHN0b3JlKVxuICAgICAgICAgICAgICAgIGlmIChtYXJrZXJDbHVzdGVyKVxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJDbHVzdGVyLmFkZE1hcmtlcihtYXJrZXIpXG4gICAgICAgICAgICAgICAgbWFya2VyTGlzdC5wdXNoKG1hcmtlcilcbiAgICAgICAgICAgICAgICAkYWRkTWFya2VyRGVmZXJyZWQucmVzb2x2ZShtYXJrZXJMaXN0KVxuICAgICAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgkLnR5cGUodGhpcy5fb3B0aW9ucy5zdG9yZXMpID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICQuZ2V0SlNPTih0aGlzLl9vcHRpb25zLnN0b3JlcywgKHN0b3JlczpBcnJheTxPYmplY3Q+KTp2b2lkID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN0b3JlOk9iamVjdCBvZiBzdG9yZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5leHRlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnVlLCBzdG9yZSwgdGhpcy5fb3B0aW9ucy5hZGR0aW9uYWxTdG9yZVByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlcjpPYmplY3QgPSB0aGlzLmNyZWF0ZU1hcmtlcihzdG9yZSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtlckNsdXN0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJDbHVzdGVyLmFkZE1hcmtlcihtYXJrZXIpXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlckxpc3QucHVzaChtYXJrZXIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRhZGRNYXJrZXJEZWZlcnJlZC5yZXNvbHZlKG1hcmtlckxpc3QpXG4gICAgICAgICAgICB9KVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNvdXRoV2VzdDpPYmplY3QgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLkxhdExuZyhcbiAgICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLnN0b3Jlcy5zb3V0aFdlc3QubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5zdG9yZXMuc291dGhXZXN0LmxvbmdpdHVkZSlcbiAgICAgICAgICAgIGNvbnN0IG5vcnRoRWFzdDpPYmplY3QgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLkxhdExuZyhcbiAgICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLnN0b3Jlcy5ub3J0aEVhc3QubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5zdG9yZXMubm9ydGhFYXN0LmxvbmdpdHVkZSlcbiAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4Om51bWJlciA9IDA7IGluZGV4IDwgdGhpcy5fb3B0aW9ucy5zdG9yZXMubnVtYmVyO1xuICAgICAgICAgICAgICAgIGluZGV4KytcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlOk9iamVjdCA9ICQuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHNvdXRoV2VzdC5sYXQoKSArIChub3J0aEVhc3QubGF0KFxuICAgICAgICAgICAgICAgICAgICApIC0gc291dGhXZXN0LmxhdCgpKSAqIE1hdGgucmFuZG9tKCksXG4gICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogc291dGhXZXN0LmxuZygpICsgKG5vcnRoRWFzdC5sbmcoXG4gICAgICAgICAgICAgICAgICAgICkgLSBzb3V0aFdlc3QubG5nKCkpICogTWF0aC5yYW5kb20oKVxuICAgICAgICAgICAgICAgIH0sIHRoaXMuX29wdGlvbnMuYWRkdGlvbmFsU3RvcmVQcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlcjpPYmplY3QgPSB0aGlzLmNyZWF0ZU1hcmtlcigkLmV4dGVuZChcbiAgICAgICAgICAgICAgICAgICAgc3RvcmUsIHRoaXMuX29wdGlvbnMuc3RvcmVzLmdlbmVyYXRlUHJvcGVydGllcyhzdG9yZSkpKVxuICAgICAgICAgICAgICAgIGlmIChtYXJrZXJDbHVzdGVyKVxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJDbHVzdGVyLmFkZE1hcmtlcihtYXJrZXIpXG4gICAgICAgICAgICAgICAgbWFya2VyTGlzdC5wdXNoKG1hcmtlcilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRhZGRNYXJrZXJEZWZlcnJlZC5yZXNvbHZlKG1hcmtlckxpc3QpXG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBzZWFyY2ggYm94IGFuZCBsaW5rIGl0IHRvIHRoZSBVSSBlbGVtZW50LlxuICAgICAgICBjb25zb2xlLmxvZygnQScsIHRoaXMuJGRvbU5vZGUuZmluZCgnaW5wdXQnKSlcbiAgICAgICAgdGhpcy5tYXAuY29udHJvbHNbdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLkNvbnRyb2xQb3NpdGlvbi5UT1BfTEVGVF0ucHVzaChcbiAgICAgICAgICAgIHRoaXMuJGRvbU5vZGUuZmluZCgnaW5wdXQnKVswXSlcbiAgICAgICAgaWYgKCQudHlwZSh0aGlzLl9vcHRpb25zLnNlYXJjaEJveCkgPT09ICdudW1iZXInKVxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplR2VuZXJpY1NlYXJjaEJveCgpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFwLCAnY2xpY2snLCAoXG4gICAgICAgICAgICApOlN0b3JlTG9jYXRvciA9PiB0aGlzLmNsb3NlU2VhcmNoUmVzdWx0cygpKVxuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFwLCAnZHJhZ3N0YXJ0JywgKFxuICAgICAgICAgICAgKTpTdG9yZUxvY2F0b3IgPT4gdGhpcy5jbG9zZVNlYXJjaFJlc3VsdHMoKSlcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuc2VhcmNoQm94ID0gJC5leHRlbmQodHJ1ZSwge1xuICAgICAgICAgICAgICAgIG1heGltdW1OdW1iZXJPZlJlc3VsdHM6IDUwLFxuICAgICAgICAgICAgICAgIG51bWJlck9mQWRkaXRpb25hbEdlbmVyaWNQbGFjZXM6IFsyLCA1XSxcbiAgICAgICAgICAgICAgICBtYXhpbWFsRGlzdGFuY2VJbk1ldGVyOiAxMDAwMDAwLFxuICAgICAgICAgICAgICAgIGxvYWRpbmdDb250ZW50OiB0aGlzLl9vcHRpb25zLmluZm9XaW5kb3cubG9hZGluZ0NvbnRlbnQsXG4gICAgICAgICAgICAgICAgZ2VuZXJpY1BsYWNlRmlsdGVyOiAocGxhY2U6T2JqZWN0KTpib29sZWFuID0+IChcbiAgICAgICAgICAgICAgICAgICAgcGxhY2UuZm9ybWF0dGVkX2FkZHJlc3MuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICcgRGV1dHNjaGxhbmQnXG4gICAgICAgICAgICAgICAgICAgICkgIT09IC0xIHx8IHBsYWNlLmZvcm1hdHRlZF9hZGRyZXNzLmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICAnIEdlcm1hbnknXG4gICAgICAgICAgICAgICAgICAgICkgIT09IC0xXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBwcmVmZXJlR2VuZXJpY1Jlc3VsdHM6IHRydWUsXG4gICAgICAgICAgICAgICAgZ2VuZXJpY1BsYWNlU2VhcmNoT3B0aW9uczoge3JhZGl1czogJzUwMDAwJ31cbiAgICAgICAgICAgIH0sIHRoaXMuX29wdGlvbnMuc2VhcmNoQm94KVxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplRGF0YVNvdXJjZVNlYXJjaEJveCgpXG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2xvc2UgbWFya2VyIGlmIHpvb20gbGV2ZWwgaXMgYmlnZ2VyIHRoYW4gdGhlIGFnZ3JlZ2F0aW9uLlxuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIodGhpcy5tYXAsICd6b29tX2NoYW5nZWQnLCAoXG4gICAgICAgICk6dm9pZCA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdHlwZW9mIHRoaXMuY3VycmVudGx5T3BlbldpbmRvdyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseU9wZW5XaW5kb3cgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseU9wZW5XaW5kb3cuaXNPcGVuICYmXG4gICAgICAgICAgICAgICAgdGhpcy5tYXAuZ2V0Wm9vbSgpIDw9IHRoaXMuX29wdGlvbnMubWFya2VyLmNsdXN0ZXIubWF4Wm9vbVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlPcGVuV2luZG93LmlzT3BlbiA9IGZhbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlPcGVuV2luZG93LmNsb3NlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgJG1hcExvYWRlZERlZmVycmVkOiREZWZlcnJlZDwkRG9tTm9kZT4gPSAkLkRlZmVycmVkKClcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZSh0aGlzLm1hcCwgJ2lkbGUnLCAoXG4gICAgICAgICk6JERlZmVycmVkPEFycmF5PE9iamVjdD4+ID0+ICRhZGRNYXJrZXJEZWZlcnJlZC50aGVuKChcbiAgICAgICAgKTokRGVmZXJyZWQ8JERvbU5vZGU+ID0+ICRtYXBMb2FkZWREZWZlcnJlZC5yZXNvbHZlKHRoaXMuJGRvbU5vZGUpKSlcbiAgICAgICAgcmV0dXJuICRtYXBMb2FkZWREZWZlcnJlZFxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQb3NpdGlvbiBzZWFyY2ggcmVzdWx0cyByaWdodCBiZWxvdyB0aGUgc2VhcmNoIGlucHV0IGZpZWxkLlxuICAgICAqIEByZXR1cm5zIFRoZSBjdXJyZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGluaXRpYWxpemVEYXRhU291cmNlU2VhcmNoUmVzdWx0c0JveCgpOlN0b3JlTG9jYXRvciB7XG4gICAgICAgIGNvbnN0IGNzc1Byb3BlcnRpZXM6T2JqZWN0ID0ge31cbiAgICAgICAgZm9yIChjb25zdCBwcm9wZXJ0eU5hbWU6c3RyaW5nIG9mIFtcbiAgICAgICAgICAgICdwb3NpdGlvbicsICd3aWR0aCcsICd0b3AnLCAnbGVmdCcsICdib3JkZXInXG4gICAgICAgIF0pXG4gICAgICAgICAgICBjc3NQcm9wZXJ0aWVzW3Byb3BlcnR5TmFtZV0gPSB0aGlzLiRkb21Ob2RlLmZpbmQoJ2lucHV0JykuY3NzKFxuICAgICAgICAgICAgICAgIHByb3BlcnR5TmFtZSlcbiAgICAgICAgY3NzUHJvcGVydGllcy5tYXJnaW5Ub3AgPSB0aGlzLiRkb21Ob2RlLmZpbmQoJ2lucHV0Jykub3V0ZXJIZWlnaHQoXG4gICAgICAgICAgICB0cnVlKVxuICAgICAgICAvLyBQcmVwYXJlIHNlYXJjaCByZXN1bHQgcG9zaXRpb25pbmcuXG4gICAgICAgIHRoaXMucmVzdWx0c0RvbU5vZGUgPSAkKCc8ZGl2PicpLmFkZENsYXNzKFxuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5zdHJpbmdDYW1lbENhc2VUb0RlbGltaXRlZChcbiAgICAgICAgICAgICAgICBgJHt0aGlzLl9fbmFtZV9ffVNlYXJjaFJlc3VsdHNgKVxuICAgICAgICApLmNzcyhjc3NQcm9wZXJ0aWVzKVxuICAgICAgICAvLyBJbmplY3QgdGhlIGZpbmFsIHNlYXJjaCByZXN1bHRzIGludG8gdGhlIGRvbSB0cmVlLlxuICAgICAgICB0aGlzLiRkb21Ob2RlLmZpbmQoJ2lucHV0JykuYWZ0ZXIodGhpcy5yZXN1bHRzRG9tTm9kZSlcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBkYXRhIHNvdXJjZSBiYXNlZCBzZWFyY2ggYm94IHRvIG9wZW4gYW5kIGZvY3VzIHRoZW1cbiAgICAgKiBtYXRjaGluZyBtYXJrZXIuXG4gICAgICogQHJldHVybnMgVGhlIGN1cnJlbnQgaW5zdGFuY2UuXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZURhdGFTb3VyY2VTZWFyY2hCb3goKTpTdG9yZUxvY2F0b3Ige1xuICAgICAgICB0aGlzLm9uKHRoaXMuJGRvbU5vZGUsICdrZXlkb3duJywgKGV2ZW50Ok9iamVjdCk6dm9pZCA9PiB7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIE5PVEU6IEV2ZW50cyB0aGF0IGRvZXNuJ3Qgb2NjdXJzIGluIHNlYXJjaCBjb250ZXh0IGFyZSBoYW5kbGVkXG4gICAgICAgICAgICAgICAgYnkgdGhlIG5hdGl2ZSBtYXAgaW1wbGVtZW50YXRpb24gYW5kIHdvbid0IGJlIHByb3BhZ2F0ZWQgc28gd2VcbiAgICAgICAgICAgICAgICBkb2Vzbid0IGhhdmUgdG8gY2FyZSBhYm91dCB0aGF0LlxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRSYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0UmFuZ2UgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgwLCB0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRSYW5nZVswXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRzLmxlbmd0aCAtIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlVHlwZUNoZWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0UmFuZ2VbMV0pXVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0UmFuZ2UgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAwLCB0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRzLmxlbmd0aCAtIDFdXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRJbmRleDpudW1iZXIgPSAtMVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRseUhpZ2hsaWdodGVkTWFya2VyKVxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50SW5kZXggPSB0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRzLmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseUhpZ2hsaWdodGVkTWFya2VyKVxuICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSB0aGlzLmtleUNvZGUuRE9XTilcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEluZGV4ID09PSAtMSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0UmFuZ2VbMV0gPCBjdXJyZW50SW5kZXggKyAxXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0TWFya2VyKHRoaXMuY3VycmVudFNlYXJjaFJlc3VsdHNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0UmFuZ2VbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgIF0sIGV2ZW50KVxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZ2hsaWdodE1hcmtlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRzW2N1cnJlbnRJbmRleCArIDFdLCBldmVudClcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09PSB0aGlzLmtleUNvZGUuVVApXG4gICAgICAgICAgICAgICAgICAgIGlmIChbdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0UmFuZ2VbMF0sIC0xXS5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJbmRleFxuICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRNYXJrZXIodGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0c1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmVUeXBlQ2hlY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRSYW5nZVsxXVxuICAgICAgICAgICAgICAgICAgICAgICAgXSwgZXZlbnQpXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0TWFya2VyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlYXJjaFJlc3VsdHNbY3VycmVudEluZGV4IC0gMV0sIGV2ZW50KVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICBldmVudC5rZXlDb2RlID09PSB0aGlzLmtleUNvZGUuRU5URVIgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlIaWdobGlnaHRlZE1hcmtlclxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlIaWdobGlnaHRlZE1hcmtlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRseUhpZ2hsaWdodGVkTWFya2VyLmluZm9XaW5kb3cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuTWFya2VyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseUhpZ2hsaWdodGVkTWFya2VyLCBldmVudClcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5QbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlIaWdobGlnaHRlZE1hcmtlci5kYXRhLCBldmVudClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMub24odGhpcy4kZG9tTm9kZS5maW5kKCdpbnB1dCcpLCAnZm9jdXMnLCAoKTp2b2lkID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWFyY2hUZXh0KVxuICAgICAgICAgICAgICAgIHRoaXMub3BlblNlYXJjaFJlc3VsdHMoKVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLm9uKHRoaXMuJGRvbU5vZGUuZmluZCgnaW5wdXQnKSwgJ2tleWRvd24nLCAoXG4gICAgICAgICAgICBldmVudDpPYmplY3RcbiAgICAgICAgKTp2b2lkID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZTpzdHJpbmcgaW4gdGhpcy5rZXlDb2RlKVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXlDb2RlLmhhc093blByb3BlcnR5KG5hbWUpICYmXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IHRoaXMua2V5Q29kZVtuYW1lXSAmJiBuYW1lICE9PSAnRE9XTidcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9KVxuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VhcmNoVGV4dClcbiAgICAgICAgICAgIHRoaXMub3BlblNlYXJjaFJlc3VsdHMoKVxuICAgICAgICB0aGlzLm9uKHRoaXMuJGRvbU5vZGUuZmluZCgnaW5wdXQnKSwgJ2NsaWNrJywgKCk6dm9pZCA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VhcmNoVGV4dClcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5TZWFyY2hSZXN1bHRzKClcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFwLCAnY2VudGVyX2NoYW5nZWQnLCAoXG4gICAgICAgICk6dm9pZCA9PiB7XG4gICAgICAgICAgICAvLyBOT1RFOiBTZWFyY2ggcmVzdWx0cyBkZXBlbmRzIG9uIGN1cnJlbnQgcG9zaXRpb24uXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VhcmNoVGV4dCAmJiB0aGlzLnJlc3VsdHNEb21Ob2RlKVxuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c0RpcnR5ID0gdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLm9uKFxuICAgICAgICAgICAgdGhpcy4kZG9tTm9kZS5maW5kKCdpbnB1dCcpLCAna2V5dXAnLFxuICAgICAgICAgICAgdGhpcy5nZXRVcGRhdGVTZWFyY2hSZXN1bHRzSGFuZGxlcigpKVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VycyBvbiBlYWNoIHNlYXJjaCByZXF1ZXN0LlxuICAgICAqIEByZXR1cm5zIFRoZSBjdXJyZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGdldFVwZGF0ZVNlYXJjaFJlc3VsdHNIYW5kbGVyKCk6RnVuY3Rpb24ge1xuICAgICAgICBjb25zdCBwbGFjZXNTZXJ2aWNlOk9iamVjdCA9XG4gICAgICAgICAgICBuZXcgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLnBsYWNlcy5QbGFjZXNTZXJ2aWNlKHRoaXMubWFwKVxuICAgICAgICByZXR1cm4gdGhpcy5kZWJvdW5jZSgoZXZlbnQ6T2JqZWN0KTp2b2lkID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZTpzdHJpbmcgaW4gdGhpcy5rZXlDb2RlKVxuICAgICAgICAgICAgICAgIGlmIChldmVudCAmJiBldmVudC5rZXlDb2RlID09PSB0aGlzLmtleUNvZGVbbmFtZV0gJiYgIVtcbiAgICAgICAgICAgICAgICAgICAgJ0RFTEVURScsICdCQUNLU1BBQ0UnXG4gICAgICAgICAgICAgICAgXS5pbmNsdWRlcyhuYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB0aGlzLmFjcXVpcmVMb2NrKGAke3RoaXMuY29uc3RydWN0b3IuX25hbWV9U2VhcmNoYCwgKCk6dm9pZCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VhcmNoVGV4dDpzdHJpbmcgPSB0aGlzLiRkb21Ob2RlLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICdpbnB1dCdcbiAgICAgICAgICAgICAgICApLnZhbCgpLnRyaW0oKVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoVGV4dCA9PT0gc2VhcmNoVGV4dCAmJlxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5zZWFyY2hSZXN1bHRzRGlydHlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbGVhc2VMb2NrKGAke3RoaXMuY29uc3RydWN0b3IuX25hbWV9U2VhcmNoYClcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdHNEaXJ0eSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJlc3VsdHNEb21Ob2RlKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVEYXRhU291cmNlU2VhcmNoUmVzdWx0c0JveCgpXG4gICAgICAgICAgICAgICAgaWYgKCFzZWFyY2hUZXh0ICYmIHRoaXMucmVzdWx0c0RvbU5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoVGV4dCA9ICcnXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlYXJjaFJlc3VsdHMgPSBbXVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdHNEb21Ob2RlLmh0bWwoJycpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlYXJjaFJlc3VsdHNEb21Ob2RlID0gbnVsbFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlU2VhcmNoUmVzdWx0cygpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbGVhc2VMb2NrKGAke3RoaXMuY29uc3RydWN0b3IuX25hbWV9U2VhcmNoYClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuU2VhcmNoUmVzdWx0cygpXG4gICAgICAgICAgICAgICAgY29uc3QgbG9hZGluZ0RvbU5vZGU6JERvbU5vZGUgPSAkKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLnNlYXJjaEJveC5sb2FkaW5nQ29udGVudClcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRzRG9tTm9kZSAmJiAhdGhpcy5maXJlRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICdhZGRTZWFyY2hSZXN1bHRzJywgZmFsc2UsIHRoaXMsIGxvYWRpbmdEb21Ob2RlLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdHNEb21Ob2RlLCB0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRzRG9tTm9kZSB8fCBbXVxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0c0RvbU5vZGUuaHRtbChsb2FkaW5nRG9tTm9kZSlcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlYXJjaFJlc3VsdHNEb21Ob2RlICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlYXJjaFJlc3VsdHNEb21Ob2RlLmxlbmd0aFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJlRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncmVtb3ZlU2VhcmNoUmVzdWx0cycsIGZhbHNlLCB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0c0RvbU5vZGUpXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0c0RvbU5vZGUgPSBsb2FkaW5nRG9tTm9kZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zLnNlYXJjaEJveC5udW1iZXJPZkFkZGl0aW9uYWxHZW5lcmljUGxhY2VzKVxuICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgTk9URTogR29vZ2xlIHNlYXJjaGVzIGZvciBtb3JlIGl0ZW1zIHRoYW4gZXhpc3RzIGluIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHNwZWNpZmllZCByYWRpdXMuIEhvd2V2ZXIgdGhlIHJhZGl1cyBpcyBhIHN0cmluZyBpblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGV4YW1wbGVzIHByb3ZpZGVkIGJ5IGdvb2dsZS5cbiAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgcGxhY2VzU2VydmljZS50ZXh0U2VhcmNoKCQuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBzZWFyY2hUZXh0LCBsb2NhdGlvbjogdGhpcy5tYXAuZ2V0Q2VudGVyKClcbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5fb3B0aW9ucy5zZWFyY2hCb3guZ2VuZXJpY1BsYWNlU2VhcmNoT3B0aW9ucyksIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlczpBcnJheTxPYmplY3Q+XG4gICAgICAgICAgICAgICAgICAgICk6dm9pZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGxhY2VzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlR2VuZXJpY1NlYXJjaFJlc3VsdHMocGxhY2VzLCBzZWFyY2hUZXh0KVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtTG9jYWxTZWFyY2goc2VhcmNoVGV4dClcbiAgICAgICAgICAgIH0sIDEwMDApXG4gICAgICAgIH0pXG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNvcnRzIGFuZCBmaWx0ZXJzIHNlYXJjaCByZXN1bHRzIGdpdmVuIGJ5IHRoZSBnb29nbGUgYXBpLlxuICAgICAqIEBwYXJhbSBwbGFjZXMgLSBMaXN0IG9mIHBsYWNlIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHNlYXJjaFRleHQgLSBXb3JkcyB3aGljaCBzaG91bGQgb2NjdXIgaW4gcmVxdWVzdGVkIHNlYXJjaFxuICAgICAqIHJlc3VsdHMuXG4gICAgICogQHJldHVybnMgUmV0dXJucyBjdXJyZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGhhbmRsZUdlbmVyaWNTZWFyY2hSZXN1bHRzKFxuICAgICAgICBwbGFjZXM6QXJyYXk8T2JqZWN0Piwgc2VhcmNoVGV4dDpzdHJpbmdcbiAgICApOlN0b3JlTG9jYXRvciB7XG4gICAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHM6QXJyYXk8T2JqZWN0PiA9IFtdXG4gICAgICAgIC8qXG4gICAgICAgICAgICBOT1RFOiBTaW5jZSBnb29nbGUgdGV4dCBzZWFyY2ggZG9lc24ndCBzdXBwb3J0IHNvcnRpbmcgYnkgZGlzdGFuY2VcbiAgICAgICAgICAgIHdlIGhhdmUgdG8gc29ydCBieSBvdXIgb3duLlxuICAgICAgICAqL1xuICAgICAgICBsZXQgaW5kZXg6bnVtYmVyID0gMVxuICAgICAgICBmb3IgKGNvbnN0IHBsYWNlOk9iamVjdCBvZiBwbGFjZXMuc29ydCgoXG4gICAgICAgICAgICBmaXJzdFBsYWNlOk9iamVjdCwgc2Vjb25kUGxhY2U6T2JqZWN0XG4gICAgICAgICk6bnVtYmVyID0+XG4gICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yLm1hcHMuZ2VvbWV0cnkuc3BoZXJpY2FsLmNvbXB1dGVEaXN0YW5jZUJldHdlZW4oXG4gICAgICAgICAgICAgICAgdGhpcy5tYXAuZ2V0Q2VudGVyKCksIGZpcnN0UGxhY2UuZ2VvbWV0cnkubG9jYXRpb25cbiAgICAgICAgICAgICkgLSB0aGlzLmNvbnN0cnVjdG9yLm1hcHMuZ2VvbWV0cnkuc3BoZXJpY2FsXG4gICAgICAgICAgICAgICAgLmNvbXB1dGVEaXN0YW5jZUJldHdlZW4odGhpcy5tYXAuZ2V0Q2VudGVyKFxuICAgICAgICAgICAgICAgICksIHNlY29uZFBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uKVxuICAgICAgICApKSB7XG4gICAgICAgICAgICBpbmRleCArPSAxXG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZTpudW1iZXIgPSB0aGlzLmNvbnN0cnVjdG9yLm1hcHMuZ2VvbWV0cnkuc3BoZXJpY2FsXG4gICAgICAgICAgICAgICAgLmNvbXB1dGVEaXN0YW5jZUJldHdlZW4odGhpcy5tYXAuZ2V0Q2VudGVyKFxuICAgICAgICAgICAgICAgICksIHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uKVxuICAgICAgICAgICAgaWYgKGRpc3RhbmNlID4gdGhpcy5fb3B0aW9ucy5zZWFyY2hCb3gubWF4aW1hbERpc3RhbmNlSW5NZXRlcilcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMuc2VhcmNoQm94LmdlbmVyaWNQbGFjZUZpbHRlcihwbGFjZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQ6e1xuICAgICAgICAgICAgICAgICAgICBkYXRhOk9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246UG9zaXRpb247XG4gICAgICAgICAgICAgICAgICAgIG9wZW46KGV2ZW50Ok9iamVjdCkgPT4gYW55O1xuICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQ6KGV2ZW50Ok9iamVjdCwgdHlwZTpzdHJpbmcpID0+IGFueTtcbiAgICAgICAgICAgICAgICB9ID0ge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiAkLmV4dGVuZChwbGFjZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nb0ZpbGVQYXRoOiBwbGFjZS5pY29uLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgL15odHRwOihcXC9cXC8pLywgYCR7ZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2x9JDFgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IHBsYWNlLmZvcm1hdHRlZF9hZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcGxhY2UuZ2VvbWV0cnkubG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIG9wZW46IChldmVudDpPYmplY3QpOlN0b3JlTG9jYXRvciA9PiB0aGlzLm9wZW5QbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlLCBldmVudCksXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodDogKGV2ZW50Ok9iamVjdCwgdHlwZTpzdHJpbmcpOnZvaWQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0hpZ2hsaWdodGVkID0gdHlwZSAhPT0gJ3N0b3AnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0cy5wdXNoKHJlc3VsdClcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9ucy5zZWFyY2hCb3gubnVtYmVyT2ZBZGRpdGlvbmFsR2VuZXJpY1BsYWNlc1tcbiAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICAgIF0gPCBpbmRleClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wZXJmb3JtTG9jYWxTZWFyY2goc2VhcmNoVGV4dCwgc2VhcmNoUmVzdWx0cylcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBzZWFyY2ggb24gbG9jYWxseSBnaXZlbiBzdG9yZSBkYXRhLlxuICAgICAqIEBwYXJhbSBzZWFyY2hUZXh0IC0gVGV4dCB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSBzZWFyY2hSZXN1bHRzIC0gQSBsaXN0IGlmIGdlbmVyaWMgc2VhcmNoIHJlc3VsdHMuXG4gICAgICogQHJldHVybnMgVGhlIGN1cnJlbnQgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcGVyZm9ybUxvY2FsU2VhcmNoKFxuICAgICAgICBzZWFyY2hUZXh0OnN0cmluZywgc2VhcmNoUmVzdWx0czpBcnJheTxPYmplY3Q+ID0gW11cbiAgICApOlN0b3JlTG9jYXRvciB7XG4gICAgICAgIGNvbnN0IG51bWJlck9mR2VuZXJpY1NlYXJjaFJlc3VsdHM6bnVtYmVyID0gc2VhcmNoUmVzdWx0cy5sZW5ndGhcbiAgICAgICAgZm9yIChjb25zdCBtYXJrZXI6T2JqZWN0IG9mIHRoaXMubWFya2VycylcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5OnN0cmluZyBvZiB0aGlzLl9vcHRpb25zLnNlYXJjaEJveC5wcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGlmICgoXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5kYXRhW2tleV0gfHwgbWFya2VyLmRhdGFba2V5XSA9PT0gMFxuICAgICAgICAgICAgICAgICkgJiYgYCR7bWFya2VyLmRhdGFba2V5XX1gLnRvTG93ZXJDYXNlKCkucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgL1stXyZdKy9nLCAnICdcbiAgICAgICAgICAgICAgICApLmluZGV4T2Yoc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgIC9bLV8mXSsvZywgJyAnXG4gICAgICAgICAgICAgICAgKSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5vcGVuID0gKGV2ZW50Ok9iamVjdCk6U3RvcmVMb2NhdG9yID0+XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5NYXJrZXIobWFya2VyLCBldmVudClcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyLmhpZ2hsaWdodCA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50Ok9iamVjdCwgdHlwZTpzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgKTpTdG9yZUxvY2F0b3IgPT4gdGhpcy5oaWdobGlnaHRNYXJrZXIobWFya2VyLCBldmVudCwgdHlwZSlcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0cy5wdXNoKG1hcmtlcilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIC8qXG4gICAgICAgICAgICBSZW1vdmUgZ2VuZXJpYyBwbGFjZSByZXN1bHRzIGlmIHRoZXJlIGFyZSBlbm91Z2ggbG9jYWwgc2VhcmNoXG4gICAgICAgICAgICByZXN1bHRzLlxuICAgICAgICAqL1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zLnNlYXJjaEJveC5udW1iZXJPZkFkZGl0aW9uYWxHZW5lcmljUGxhY2VzICYmXG4gICAgICAgICAgICBzZWFyY2hSZXN1bHRzLmxlbmd0aCAmJiBudW1iZXJPZkdlbmVyaWNTZWFyY2hSZXN1bHRzID5cbiAgICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLnNlYXJjaEJveC5udW1iZXJPZkFkZGl0aW9uYWxHZW5lcmljUGxhY2VzWzBdICYmXG4gICAgICAgICAgICBzZWFyY2hSZXN1bHRzLmxlbmd0aCA+XG4gICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5zZWFyY2hCb3gubnVtYmVyT2ZBZGRpdGlvbmFsR2VuZXJpY1BsYWNlc1sxXVxuICAgICAgICApXG4gICAgICAgICAgICBzZWFyY2hSZXN1bHRzLnNwbGljZShcbiAgICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLnNlYXJjaEJveC5udW1iZXJPZkFkZGl0aW9uYWxHZW5lcmljUGxhY2VzWzBdLFxuICAgICAgICAgICAgICAgIG51bWJlck9mR2VuZXJpY1NlYXJjaFJlc3VsdHMgLVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLnNlYXJjaEJveC5udW1iZXJPZkFkZGl0aW9uYWxHZW5lcmljUGxhY2VzWzBdKVxuICAgICAgICAvLyBTbGljZSBhZGRpdGlvbmFsIHVubmVlZGVkIGxvY2FsIHNlYXJjaCByZXN1bHRzLlxuICAgICAgICBsZXQgbGltaXRSZWFjaGVkOmJvb2xlYW4gPSBmYWxzZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zLnNlYXJjaEJveC5tYXhpbXVtTnVtYmVyT2ZSZXN1bHRzIDxcbiAgICAgICAgICAgIHNlYXJjaFJlc3VsdHMubGVuZ3RoXG4gICAgICAgICkge1xuICAgICAgICAgICAgbGltaXRSZWFjaGVkID0gdHJ1ZVxuICAgICAgICAgICAgc2VhcmNoUmVzdWx0cy5zcGxpY2UoXG4gICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5zZWFyY2hCb3gubWF4aW11bU51bWJlck9mUmVzdWx0cyxcbiAgICAgICAgICAgICAgICBzZWFyY2hSZXN1bHRzLmxlbmd0aClcbiAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICAgICAgU29ydCByZXN1bHRzIGJ5IGN1cnJlbnQgbWFwIGNlbnRlciBmb3JtIG5lYXJlciB0byBtb3JlIGZhcmUgYXdheVxuICAgICAgICAgICAgcmVzdWx0cy5cbiAgICAgICAgKi9cbiAgICAgICAgc2VhcmNoUmVzdWx0cy5zb3J0KChmaXJzdDpPYmplY3QsIHNlY29uZDpPYmplY3QpOm51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5zZWFyY2hCb3gucHJlZmVyZUdlbmVyaWNSZXN1bHRzICYmXG4gICAgICAgICAgICAgICAgIWZpcnN0LmluZm9XaW5kb3cgJiYgc2Vjb25kLmluZm9XaW5kb3dcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLnNlYXJjaEJveC5wcmVmZXJlR2VuZXJpY1Jlc3VsdHMgJiZcbiAgICAgICAgICAgICAgICAhc2Vjb25kLmluZm9XaW5kb3cgJiYgZmlyc3QuaW5mb1dpbmRvd1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHJldHVybiAxXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbFxuICAgICAgICAgICAgICAgIC5jb21wdXRlRGlzdGFuY2VCZXR3ZWVuKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcC5nZXRDZW50ZXIoKSwgZmlyc3QucG9zaXRpb25cbiAgICAgICAgICAgICAgICApIC0gdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbFxuICAgICAgICAgICAgICAgICAgICAuY29tcHV0ZURpc3RhbmNlQmV0d2VlbihcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLmdldENlbnRlcigpLCBzZWNvbmQucG9zaXRpb24pXG4gICAgICAgIH0pXG4gICAgICAgIC8vIENvbXBpbGUgc2VhcmNoIHJlc3VsdHMgbWFya3VwLlxuICAgICAgICBjb25zdCByZXN1bHRzUmVwcmVzZW50YXRpb246UHJvbWlzZTxhbnk+fHN0cmluZyA9XG4gICAgICAgICAgICB0aGlzLm1ha2VTZWFyY2hSZXN1bHRzKHNlYXJjaFJlc3VsdHMsIGxpbWl0UmVhY2hlZClcbiAgICAgICAgaWYgKCQudHlwZShyZXN1bHRzUmVwcmVzZW50YXRpb24pID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0c1JlcHJlc2VudGF0aW9uRG9tTm9kZTokRG9tTm9kZSA9ICQoXG4gICAgICAgICAgICAgICAgcmVzdWx0c1JlcHJlc2VudGF0aW9uKVxuICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0c0RvbU5vZGUgJiYgIXRoaXMuZmlyZUV2ZW50KFxuICAgICAgICAgICAgICAgICdhZGRTZWFyY2hSZXN1bHRzJywgZmFsc2UsIHRoaXMsIHJlc3VsdHNSZXByZXNlbnRhdGlvbkRvbU5vZGUsXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRzRG9tTm9kZSwgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0c0RvbU5vZGUgfHwgW11cbiAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRzRG9tTm9kZS5odG1sKHJlc3VsdHNSZXByZXNlbnRhdGlvbkRvbU5vZGUpXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0c0RvbU5vZGUgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRzRG9tTm9kZS5sZW5ndGhcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB0aGlzLmZpcmVFdmVudChcbiAgICAgICAgICAgICAgICAgICAgJ3JlbW92ZVNlYXJjaFJlc3VsdHMnLCBmYWxzZSwgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0c0RvbU5vZGUpXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRzRG9tTm9kZSA9IHJlc3VsdHNSZXByZXNlbnRhdGlvbkRvbU5vZGVcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk6U3RvcmVMb2NhdG9yID0+IHRoaXMucmVsZWFzZUxvY2soXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5jb25zdHJ1Y3Rvci5fbmFtZX1TZWFyY2hgXG4gICAgICAgICAgICApLCAwKVxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdHNSZXByZXNlbnRhdGlvbiBpbnN0YW5jZW9mIFByb21pc2UpXG4gICAgICAgICAgICByZXN1bHRzUmVwcmVzZW50YXRpb24udGhlbigocmVzdWx0c1JlcHJlc2VudGF0aW9uOnN0cmluZyk6dm9pZCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0c1JlcHJlc2VudGF0aW9uRG9tTm9kZTokRG9tTm9kZSA9ICQoXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNSZXByZXNlbnRhdGlvbilcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRzRG9tTm9kZSAmJiAhdGhpcy5maXJlRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICdhZGRTZWFyY2hSZXN1bHRzJywgZmFsc2UsIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNSZXByZXNlbnRhdGlvbkRvbU5vZGUsIHRoaXMucmVzdWx0c0RvbU5vZGUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlYXJjaFJlc3VsdHNEb21Ob2RlIHx8IFtdXG4gICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRzRG9tTm9kZS5odG1sKHJlc3VsdHNSZXByZXNlbnRhdGlvbkRvbU5vZGUpXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRzRG9tTm9kZSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWFyY2hSZXN1bHRzRG9tTm9kZS5sZW5ndGhcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyZUV2ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JlbW92ZVNlYXJjaFJlc3VsdHMnLCBmYWxzZSwgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlYXJjaFJlc3VsdHNEb21Ob2RlKVxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlYXJjaFJlc3VsdHNEb21Ob2RlID0gcmVzdWx0c1JlcHJlc2VudGF0aW9uRG9tTm9kZVxuICAgICAgICAgICAgICAgIHRoaXMucmVsZWFzZUxvY2soYCR7dGhpcy5fbmFtZX1TZWFyY2hgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoVGV4dCA9IHNlYXJjaFRleHRcbiAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoUmVzdWx0cyA9IHNlYXJjaFJlc3VsdHMuc2xpY2UoKVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyBjdXJyZW50IHNlYXJjaCByZXN1bHRzLlxuICAgICAqIEBwYXJhbSBldmVudCAtIE9iamVjdCB3aXRoIG1ldGEgZGF0YSBmb3IgY3VycmVudCBldmVudCB3aGljaCBoYXNcbiAgICAgKiB0cmlnZ2VyZWQgdG8gc2hvdyBzZWFyY2ggcmVzdWx0cy5cbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBvcGVuU2VhcmNoUmVzdWx0cyhldmVudDo/T2JqZWN0KTpTdG9yZUxvY2F0b3Ige1xuICAgICAgICBpZiAoZXZlbnQpXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICB0aGlzLmdldFVwZGF0ZVNlYXJjaFJlc3VsdHNIYW5kbGVyKCkoZXZlbnQpXG4gICAgICAgIGlmICh0aGlzLnJlc3VsdHNEb21Ob2RlICYmICF0aGlzLnJlc3VsdHNEb21Ob2RlLmhhc0NsYXNzKFxuICAgICAgICAgICAgJ29wZW4nXG4gICAgICAgICkgJiYgIXRoaXMuZmlyZUV2ZW50KFxuICAgICAgICAgICAgJ29wZW5TZWFyY2hSZXN1bHRzJywgZmFsc2UsIHRoaXMsIGV2ZW50LCB0aGlzLnJlc3VsdHNEb21Ob2RlXG4gICAgICAgICkpXG4gICAgICAgICAgICB0aGlzLnJlc3VsdHNEb21Ob2RlLmFkZENsYXNzKCdvcGVuJylcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIGN1cnJlbnQgc2VhcmNoIHJlc3VsdHMuXG4gICAgICogQHBhcmFtIGV2ZW50IC0gT2JqZWN0IHdpdGggbWV0YSBkYXRhIGZvciBjdXJyZW50IGV2ZW50IHdoaWNoIGhhc1xuICAgICAqIHRyaWdnZXJlZCB0byBjbG9zZSBzZWFyY2ggcmVzdWx0cy5cbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBjbG9zZVNlYXJjaFJlc3VsdHMoZXZlbnQ6P09iamVjdCA9IG51bGwpOlN0b3JlTG9jYXRvciB7XG4gICAgICAgIGlmIChldmVudClcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgIGlmICh0aGlzLnJlc3VsdHNEb21Ob2RlICYmIHRoaXMucmVzdWx0c0RvbU5vZGUuaGFzQ2xhc3MoXG4gICAgICAgICAgICAnb3BlbidcbiAgICAgICAgKSAmJiAhdGhpcy5maXJlRXZlbnQoXG4gICAgICAgICAgICAnY2xvc2VTZWFyY2hSZXN1bHRzJywgZmFsc2UsIHRoaXMsIGV2ZW50LCB0aGlzLnJlc3VsdHNEb21Ob2RlXG4gICAgICAgICkpXG4gICAgICAgICAgICB0aGlzLnJlc3VsdHNEb21Ob2RlLnJlbW92ZUNsYXNzKCdvcGVuJylcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgZ29vZ2xlcyBnZW5lcmljIHNlYXJjaCBib3ggYW5kIHRyaWVzIHRvIG1hdGNoIHRvIG9wZW4gYW5kXG4gICAgICogZm9jdXMgdGhlbS5cbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBpbml0aWFsaXplR2VuZXJpY1NlYXJjaEJveCgpOlN0b3JlTG9jYXRvciB7XG4gICAgICAgIGNvbnN0IHNlYXJjaEJveDpPYmplY3QgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLnBsYWNlcy5TZWFyY2hCb3goXG4gICAgICAgICAgICB0aGlzLiRkb21Ob2RlLmZpbmQoJ2lucHV0JylbMF0pXG4gICAgICAgIC8qXG4gICAgICAgICAgICBCaWFzIHRoZSBzZWFyY2ggYm94IHJlc3VsdHMgdG93YXJkcyBwbGFjZXMgdGhhdCBhcmUgd2l0aGluIHRoZVxuICAgICAgICAgICAgYm91bmRzIG9mIHRoZSBjdXJyZW50IG1hcCdzIHZpZXdwb3J0LlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIoXG4gICAgICAgICAgICB0aGlzLm1hcCwgJ2JvdW5kc19jaGFuZ2VkJywgKCk6dm9pZCA9PiBzZWFyY2hCb3guc2V0Qm91bmRzKFxuICAgICAgICAgICAgICAgIHRoaXMubWFwLmdldEJvdW5kcygpKSlcbiAgICAgICAgLypcbiAgICAgICAgICAgIExpc3RlbiBmb3IgdGhlIGV2ZW50IGZpcmVkIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhbiBpdGVtIGZyb20gdGhlXG4gICAgICAgICAgICBwaWNrIGxpc3QuIFJldHJpZXZlIHRoZSBtYXRjaGluZyBwbGFjZXMgZm9yIHRoYXQgaXRlbS5cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKFxuICAgICAgICAgICAgc2VhcmNoQm94LCAncGxhY2VzX2NoYW5nZWQnLCAoKTpQcm9taXNlPEFycmF5PE9iamVjdD4+ID0+XG4gICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVQbGFjZUxvY2F0aW9ucyhzZWFyY2hCb3guZ2V0UGxhY2VzKCkpLnRoZW4oKFxuICAgICAgICAgICAgICAgICAgICBwbGFjZXM6QXJyYXk8T2JqZWN0PlxuICAgICAgICAgICAgICAgICk6QXJyYXk8T2JqZWN0PiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kUGxhY2U6P09iamVjdCA9IHRoaXMuZGV0ZXJtaW5lQmVzdFNlYXJjaFJlc3VsdChcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlcylcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kUGxhY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzaG9ydGVzdERpc3RhbmNlSW5NZXRlcjpudW1iZXIgPSBOdW1iZXIuTUFYX1ZBTFVFXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hpbmdNYXJrZXI6P09iamVjdCA9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbWFya2VyOk9iamVjdCBvZiB0aGlzLm1hcmtlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0YW5jZUluTWV0ZXI6bnVtYmVyID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbXB1dGVEaXN0YW5jZUJldHdlZW4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRQbGFjZS5nZW9tZXRyeS5sb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXIucG9zaXRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlSW5NZXRlciA8IHNob3J0ZXN0RGlzdGFuY2VJbk1ldGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0ZXN0RGlzdGFuY2VJbk1ldGVyID0gZGlzdGFuY2VJbk1ldGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoaW5nTWFya2VyID0gbWFya2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoaW5nTWFya2VyICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRlc3REaXN0YW5jZUluTWV0ZXIgPD0gdGhpcy5fb3B0aW9ucy5zZWFyY2hCb3hcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zLnN1Y2Nlc3NmdWxTZWFyY2hab29tKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcC5zZXRab29tKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5zdWNjZXNzZnVsU2VhcmNoWm9vbSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5NYXJrZXIobWF0Y2hpbmdNYXJrZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsYWNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudGx5T3BlbldpbmRvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudGx5T3BlbldpbmRvdy5pc09wZW4gPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudGx5T3BlbldpbmRvdy5jbG9zZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcC5zZXRDZW50ZXIoZm91bmRQbGFjZS5nZW9tZXRyeS5sb2NhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zLnN1Y2Nlc3NmdWxTZWFyY2hab29tKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLnNldFpvb20oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuc3VjY2Vzc2Z1bFNlYXJjaFpvb20pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsYWNlc1xuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoYXQgZXZlcnkgZ2l2ZW4gcGxhY2UgaGF2ZSBhIGxvY2F0aW9uIHByb3BlcnR5LlxuICAgICAqIEBwYXJhbSBwbGFjZXMgLSBQbGFjZXMgdG8gY2hlY2sgZm9yLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB3aGljaCB3aWxsIGJlIHJlc29sdmVkIGlmIGFsbCBwbGFjZXMgYXJlIGVuc3VyZWQuXG4gICAgICovXG4gICAgZW5zdXJlUGxhY2VMb2NhdGlvbnMocGxhY2VzOkFycmF5PE9iamVjdD4pOlByb21pc2U8QXJyYXk8T2JqZWN0Pj4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmU6UHJvbWlzZUNhbGxiYWNrRnVuY3Rpb24pOnZvaWQgPT4ge1xuICAgICAgICAgICAgbGV0IHJ1bm5pbmdHZW9jb2RlczpudW1iZXIgPSAwXG4gICAgICAgICAgICBjb25zdCBnZW9jb2RlcjpPYmplY3QgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLkdlb2NvZGVyKClcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGxhY2U6T2JqZWN0IG9mIHBsYWNlcylcbiAgICAgICAgICAgICAgICBpZiAoISgnZ2VvbWV0cnknIGluIHBsYWNlICYmICdsb2NhdGlvbicgaW4gcGxhY2UuZ2VvbWV0cnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FybihcbiAgICAgICAgICAgICAgICAgICAgICAgICdGb3VuZCBwbGFjZSBcInsxfVwiIGRvZXNuXFwndCBoYXZlIGEgbG9jYXRpb24uIEZ1bGwgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0OicsIHBsYWNlLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FybihwbGFjZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0dlb2NvZGUgd2lsbCBiZSBkZXRlcm1pbmVkIHNlcGFyYXRlbHkuIFdpdGggYWRkcmVzcycgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJyBcInsxfVwiLicsIHBsYWNlLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdHZW9jb2RlcyArPSAxXG4gICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWxvb3AtZnVuYyAqL1xuICAgICAgICAgICAgICAgICAgICBnZW9jb2Rlci5nZW9jb2RlKHthZGRyZXNzOiBwbGFjZS5uYW1lfSwgKFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0czpBcnJheTxPYmplY3Q+LCBzdGF0dXM6bnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICk6dm9pZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydW5uaW5nR2VvY29kZXMgLT0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLkdlb2NvZGVyU3RhdHVzLk9LKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlLmdlb21ldHJ5ID0gcmVzdWx0c1swXS5nZW9tZXRyeVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHBsYWNlc1twbGFjZXMuaW5kZXhPZihwbGFjZSldXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRm91bmQgcGxhY2UgXCJ7MX1cIiBjb3VsZG5cXCd0IGJlIGdlb2NvZGVkIGJ5ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZ29vZ2xlLiBSZW1vdmluZyBpdCBmcm9tIHRoZSBwbGFjZXMgbGlzdC4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZS5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bm5pbmdHZW9jb2RlcyA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHBsYWNlcylcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1sb29wLWZ1bmMgKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgdGhlIGJlc3Qgc2VhcmNoIHJlc3VsdCBmcm9tIGdpdmVuIGxpc3Qgb2YgY2FuZGlkYXRlcy5cbiAgICAgKiBDdXJyZW50bHkgdGhlIG5lYXJlc3QgcmVzdWx0IHRvIGN1cnJlbnQgdmlld3BvcnQgd2lsbCBiZSBwcmVmZXJyZWQuXG4gICAgICogQHBhcmFtIGNhbmRpZGF0ZXMgLSBMaXN0IG9mIHNlYXJjaCByZXN1bHRzIHRvIGRldGVybWluZSBiZXN0IGZyb20uXG4gICAgICogQHJldHVybnMgVGhlIGRldGVybWluZWQgYmVzdCByZXN1bHQuXG4gICAgICovXG4gICAgZGV0ZXJtaW5lQmVzdFNlYXJjaFJlc3VsdChjYW5kaWRhdGVzOkFycmF5PE9iamVjdD4pOj9PYmplY3Qge1xuICAgICAgICBsZXQgcmVzdWx0Oj9PYmplY3QgPSBudWxsXG4gICAgICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHNob3J0ZXN0RGlzdGFuY2VJbk1ldGVyOm51bWJlciA9IE51bWJlci5NQVhfVkFMVUVcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlOk9iamVjdCBvZiBjYW5kaWRhdGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2VJbk1ldGVyOm51bWJlciA9IHRoaXMuY29uc3RydWN0b3IubWFwcy5nZW9tZXRyeVxuICAgICAgICAgICAgICAgICAgICAuc3BoZXJpY2FsLmNvbXB1dGVEaXN0YW5jZUJldHdlZW4oXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUuZ2VvbWV0cnkubG9jYXRpb24sIHRoaXMubWFwLmdldENlbnRlcigpKVxuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZUluTWV0ZXIgPCBzaG9ydGVzdERpc3RhbmNlSW5NZXRlcikge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBjYW5kaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRlc3REaXN0YW5jZUluTWV0ZXIgPSBkaXN0YW5jZUluTWV0ZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJcyB0cmlnZ2VyZWQgaWYgdGhlIGNvbXBsZXRlIG1hcCBpc3QgbG9hZGVkLlxuICAgICAqIEByZXR1cm5zIFRoZSBjdXJyZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIG9uTG9hZGVkKCk6U3RvcmVMb2NhdG9yIHtcbiAgICAgICAgc2V0VGltZW91dCgoKTokRG9tTm9kZSA9PiB0aGlzLiRkb21Ob2RlLmZpbmQoJ2lucHV0JykuZmFkZUluKFxuICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5pbnB1dEZhZGVJbk9wdGlvblxuICAgICAgICApLCB0aGlzLl9vcHRpb25zLnNob3dJbnB1dEFmdGVyTG9hZGVkRGVsYXlJbk1pbGxpc2Vjb25kcylcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGdpdmVuIHN0b3JlIHRvIHRoZSBnb29nbGUgbWFwcyBjYW52YXMuXG4gICAgICogQHBhcmFtIHN0b3JlIC0gU3RvcmUgb2JqZWN0IHRvIGNyZWF0ZSBhIG1hcmtlciBmb3IuXG4gICAgICogQHJldHVybnMgVGhlIGNyZWF0ZWQgbWFya2VyLlxuICAgICAqL1xuICAgIGNyZWF0ZU1hcmtlcihzdG9yZTpPYmplY3QpOk9iamVjdCB7XG4gICAgICAgIGxldCBpbmRleDpudW1iZXIgPSAwXG4gICAgICAgIHdoaWxlICh0aGlzLnNlZW5Mb2NhdGlvbnMuaW5jbHVkZXMoXG4gICAgICAgICAgICBgJHtzdG9yZS5sYXRpdHVkZX0tJHtzdG9yZS5sb25naXR1ZGV9YFxuICAgICAgICApKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggJSAyKVxuICAgICAgICAgICAgICAgIHN0b3JlLmxhdGl0dWRlICs9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuZGlzdGFuY2VUb01vdmVCeUR1cGxpY2F0ZWRFbnRyaWVzXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc3RvcmUubG9uZ2l0dWRlICs9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuZGlzdGFuY2VUb01vdmVCeUR1cGxpY2F0ZWRFbnRyaWVzXG4gICAgICAgICAgICBpbmRleCArPSAxXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWVuTG9jYXRpb25zLnB1c2goYCR7c3RvcmUubGF0aXR1ZGV9LSR7c3RvcmUubG9uZ2l0dWRlfWApXG4gICAgICAgIGNvbnN0IG1hcmtlcjpPYmplY3QgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IHRoaXMuY29uc3RydWN0b3IubWFwcy5MYXRMbmcoXG4gICAgICAgICAgICAgICAgc3RvcmUubGF0aXR1ZGUsIHN0b3JlLmxvbmdpdHVkZSksXG4gICAgICAgICAgICBtYXA6IHRoaXMubWFwLFxuICAgICAgICAgICAgZGF0YTogc3RvcmVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBzdG9yZS5tYXJrZXJJY29uRmlsZU5hbWUgfHwgdGhpcy5fb3B0aW9ucy5kZWZhdWx0TWFya2VySWNvbkZpbGVOYW1lXG4gICAgICAgICkge1xuICAgICAgICAgICAgbWFya2VyLmljb24gPSAkLmV4dGVuZCh7fSwgdGhpcy5fb3B0aW9ucy5tYXJrZXIuaWNvbilcbiAgICAgICAgICAgIGlmIChtYXJrZXIuaWNvbi5zaXplKVxuICAgICAgICAgICAgICAgIG1hcmtlci5pY29uLnNpemUgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLlNpemUoXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5pY29uLnNpemUud2lkdGgsIG1hcmtlci5pY29uLnNpemUuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBtYXJrZXIuaWNvbi5zaXplLnVuaXQsIG1hcmtlci5pY29uLnNpemUudW5pdClcbiAgICAgICAgICAgIGlmIChtYXJrZXIuaWNvbi5zY2FsZWRTaXplKVxuICAgICAgICAgICAgICAgIG1hcmtlci5pY29uLnNjYWxlZFNpemUgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLlNpemUoXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5pY29uLnNjYWxlZFNpemUud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5pY29uLnNjYWxlZFNpemUuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBtYXJrZXIuaWNvbi5zY2FsZWRTaXplLnVuaXQsXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5pY29uLnNjYWxlZFNpemUudW5pdClcbiAgICAgICAgICAgIGlmIChzdG9yZS5tYXJrZXJJY29uRmlsZU5hbWUpXG4gICAgICAgICAgICAgICAgbWFya2VyLmljb24udXJsID0gdGhpcy5fb3B0aW9ucy5pY29uUGF0aCArXG4gICAgICAgICAgICAgICAgICAgIHN0b3JlLm1hcmtlckljb25GaWxlTmFtZVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1hcmtlci5pY29uLnVybCA9IHRoaXMuX29wdGlvbnMuaWNvblBhdGggK1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLmRlZmF1bHRNYXJrZXJJY29uRmlsZU5hbWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RvcmUudGl0bGUpXG4gICAgICAgICAgICBtYXJrZXIudGl0bGUgPSBzdG9yZS50aXRsZVxuICAgICAgICBtYXJrZXIuaW5mb1dpbmRvdyA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yLm1hcHMuSW5mb1dpbmRvdyh7Y29udGVudDogJyd9KVxuICAgICAgICBtYXJrZXIuaW5mb1dpbmRvdy5pc09wZW4gPSBmYWxzZVxuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIoXG4gICAgICAgICAgICBtYXJrZXIuaW5mb1dpbmRvdywgJ2Nsb3NlY2xpY2snLCAoKTp2b2lkID0+IHtcbiAgICAgICAgICAgICAgICBtYXJrZXIuaW5mb1dpbmRvdy5pc09wZW4gPSBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgbWFya2VyLm5hdGl2ZU1hcmtlciA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yLm1hcHMuTWFya2VyKG1hcmtlcilcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKFxuICAgICAgICAgICAgbWFya2VyLm5hdGl2ZU1hcmtlciwgJ2NsaWNrJywgdGhpcy5nZXRNZXRob2QoXG4gICAgICAgICAgICAgICAgJ29wZW5NYXJrZXInLCB0aGlzLCBtYXJrZXIpKVxuICAgICAgICB0aGlzLm1hcmtlcnMucHVzaChtYXJrZXIpXG4gICAgICAgIHJldHVybiBtYXJrZXIubmF0aXZlTWFya2VyXG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9wZW5zIGdpdmVuIG1hcmtlciBpbmZvIHdpbmRvdy4gQW5kIGNsb3NlcyBhIHBvdGVudGlhbCBvcGVuZWQgd2luZG93cy5cbiAgICAgKiBAcGFyYW0gbWFya2VyIC0gTWFya2VyIHRvIG9wZW4uXG4gICAgICogQHBhcmFtIGV2ZW50IC0gRXZlbnQgd2hpY2ggaGFzIHRyaWdnZXJlZCB0aGUgbWFya2VyIG9wZW5pbmcgY2FsbC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBvcGVuTWFya2VyKG1hcmtlcjpPYmplY3QsIGV2ZW50Oj9PYmplY3QpOlN0b3JlTG9jYXRvciB7XG4gICAgICAgIGlmIChldmVudClcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0TWFya2VyKG1hcmtlciwgZXZlbnQsICdzdG9wJylcbiAgICAgICAgLypcbiAgICAgICAgICAgIFdlIGhhdmUgdG8gZW5zdXJlIHRoYXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBoYXMgb25lIG1vcmUgdGhlblxuICAgICAgICAgICAgdGhlIGNsdXN0ZXJpbmcgY2FuIGFwcGVhci4gU2luY2UgYSBjbHVzdGVyIGhpZGVzIGFuIG9wZW4gd2luZG93LlxuICAgICAgICAqL1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAnY2x1c3RlcicgaW4gdGhpcy5fb3B0aW9ucy5tYXJrZXIgJiZcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMubWFya2VyLmNsdXN0ZXIubWF4Wm9vbSAmJlxuICAgICAgICAgICAgdGhpcy5tYXAuZ2V0Wm9vbSgpIDw9IHRoaXMuX29wdGlvbnMubWFya2VyLmNsdXN0ZXIubWF4Wm9vbVxuICAgICAgICApXG4gICAgICAgICAgICB0aGlzLm1hcC5zZXRab29tKHRoaXMuX29wdGlvbnMubWFya2VyLmNsdXN0ZXIubWF4Wm9vbSArIDEpXG4gICAgICAgIHRoaXMuY2xvc2VTZWFyY2hSZXN1bHRzKGV2ZW50KVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRseU9wZW5XaW5kb3cgPT09IG1hcmtlci5pbmZvV2luZG93ICYmXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRseU9wZW5XaW5kb3cuaXNPcGVuXG4gICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgIHRoaXMuZmlyZUV2ZW50KCdpbmZvV2luZG93T3BlbicsIGV2ZW50LCBtYXJrZXIpXG4gICAgICAgIG1hcmtlci5yZWZyZXNoU2l6ZSA9ICgpOnZvaWQgPT5cbiAgICAgICAgICAgIC8vIFNpbXVsYXRlcyBhIGNvbnRlbnQgdXBkYXRlIHRvIGVuZm9yY2UgaW5mbyBib3ggc2l6ZSBhZGp1c3RpbmcuXG4gICAgICAgICAgICBtYXJrZXIuaW5mb1dpbmRvdy5zZXRDb250ZW50KG1hcmtlci5pbmZvV2luZG93LmdldENvbnRlbnQoKSlcbiAgICAgICAgY29uc3QgaW5mb1dpbmRvdzpzdHJpbmd8T2JqZWN0ID0gdGhpcy5tYWtlSW5mb1dpbmRvdyhtYXJrZXIpXG4gICAgICAgIGlmICh0eXBlb2YgaW5mb1dpbmRvdyA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICBtYXJrZXIuaW5mb1dpbmRvdy5zZXRDb250ZW50KGluZm9XaW5kb3cpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWFya2VyLmluZm9XaW5kb3cuc2V0Q29udGVudChcbiAgICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLmluZm9XaW5kb3cubG9hZGluZ0NvbnRlbnQpXG4gICAgICAgICAgICBpbmZvV2luZG93LnRoZW4oKGluZm9XaW5kb3c6T2JqZWN0KTp2b2lkID0+XG4gICAgICAgICAgICAgICAgbWFya2VyLmluZm9XaW5kb3cuc2V0Q29udGVudChpbmZvV2luZG93KSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlPcGVuV2luZG93KSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRseU9wZW5XaW5kb3cuaXNPcGVuID0gZmFsc2VcbiAgICAgICAgICAgIHRoaXMuY3VycmVudGx5T3BlbldpbmRvdy5jbG9zZSgpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50bHlPcGVuV2luZG93ID0gbWFya2VyLmluZm9XaW5kb3dcbiAgICAgICAgbWFya2VyLmluZm9XaW5kb3cuaXNPcGVuID0gdHJ1ZVxuICAgICAgICBtYXJrZXIuaW5mb1dpbmRvdy5vcGVuKHRoaXMubWFwLCBtYXJrZXIubmF0aXZlTWFya2VyKVxuICAgICAgICB0aGlzLm1hcC5wYW5UbyhtYXJrZXIubmF0aXZlTWFya2VyLnBvc2l0aW9uKVxuICAgICAgICB0aGlzLm1hcC5wYW5CeShcbiAgICAgICAgICAgIDAsIC10aGlzLl9vcHRpb25zLmluZm9XaW5kb3cuYWRkaXRpb25hbE1vdmVUb0JvdHRvbUluUGl4ZWwpXG4gICAgICAgIHRoaXMuZmlyZUV2ZW50KCdpbmZvV2luZG93T3BlbmVkJywgZXZlbnQsIG1hcmtlcilcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXNlcyBnaXZlbiBwbGFjZSBvbiBtYXAuXG4gICAgICogQHBhcmFtIHBsYWNlIC0gUGxhY2UgdG8gb3Blbi5cbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBFdmVudCBvYmplY3Qgd2hpY2ggaGFzIHRyaWdnZXJlZCByZXF1ZXN0ZWQgcGxhY2Ugb3BlbmluZy5cbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBvcGVuUGxhY2UocGxhY2U6T2JqZWN0LCBldmVudDo/T2JqZWN0KTpTdG9yZUxvY2F0b3Ige1xuICAgICAgICBpZiAoZXZlbnQpXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICB0aGlzLmNsb3NlU2VhcmNoUmVzdWx0cyhldmVudClcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudGx5T3BlbldpbmRvdykge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlPcGVuV2luZG93LmlzT3BlbiA9IGZhbHNlXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRseU9wZW5XaW5kb3cuY2xvc2UoKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubWFwLnNldENlbnRlcihwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbilcbiAgICAgICAgdGhpcy5tYXAuc2V0Wm9vbSh0aGlzLl9vcHRpb25zLnN1Y2Nlc3NmdWxTZWFyY2hab29tKVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyBnaXZlbiBtYXJrZXIgaW5mbyB3aW5kb3cuIEFuZCBjbG9zZXMgYSBwb3RlbnRpYWwgb3BlbmVkIHdpbmRvd3MuXG4gICAgICogQHBhcmFtIG1hcmtlciAtIE1hcmtlciB0byBIaWdobGlnaHQuXG4gICAgICogQHBhcmFtIGV2ZW50IC0gRXZlbnQgb2JqZWN0IGZvciBjb3JyZXNwb25kaW5nIGV2ZW50IHRoYXQgaGFzIHRoZVxuICAgICAqIGhpZ2hsaWdodGluZyByZXF1ZXN0ZWQuXG4gICAgICogQHBhcmFtIHR5cGUgLSBUeXBlIG9mIGhpZ2hsaWdodGluZy5cbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBoaWdobGlnaHRNYXJrZXIoXG4gICAgICAgIG1hcmtlcjpPYmplY3QsIGV2ZW50Oj9PYmplY3QsIHR5cGU6c3RyaW5nID0gJ2JvdW5jZSdcbiAgICApOlN0b3JlTG9jYXRvciB7XG4gICAgICAgIGlmIChldmVudClcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRseUhpZ2hsaWdodGVkTWFya2VyKSB7XG4gICAgICAgICAgICBpZiAoJ25hdGl2ZU1hcmtlcicgaW4gdGhpcy5jdXJyZW50bHlIaWdobGlnaHRlZE1hcmtlcilcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseUhpZ2hsaWdodGVkTWFya2VyLm5hdGl2ZU1hcmtlci5zZXRBbmltYXRpb24obnVsbClcbiAgICAgICAgICAgIHRoaXMuY3VycmVudGx5SGlnaGxpZ2h0ZWRNYXJrZXIuaXNIaWdobGlnaHRlZCA9IGZhbHNlXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRseUhpZ2hsaWdodGVkTWFya2VyID0gbnVsbFxuICAgICAgICB9XG4gICAgICAgIGlmICgnbmF0aXZlTWFya2VyJyBpbiBtYXJrZXIpXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3N0b3AnKVxuICAgICAgICAgICAgICAgIG1hcmtlci5uYXRpdmVNYXJrZXIuc2V0QW5pbWF0aW9uKG51bGwpXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICBXZSBoYXZlIHRvIGVuc3VyZSB0aGF0IHRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgaGFzIG9uZSBtb3JlXG4gICAgICAgICAgICAgICAgICAgIHRoZW4gdGhlIGNsdXN0ZXJpbmcgY2FuIGFwcGVhci4gU2luY2UgYSBjbHVzdGVyIGhpZGVzIGFuXG4gICAgICAgICAgICAgICAgICAgIG9wZW4gd2luZG93LlxuICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAnY2x1c3RlcicgaW4gdGhpcy5fb3B0aW9ucy5tYXJrZXIgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5tYXJrZXIuY2x1c3Rlci5tYXhab29tICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLmdldFpvb20oKSA8PVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5tYXJrZXIuY2x1c3Rlci5tYXhab29tICYmXG4gICAgICAgICAgICAgICAgICAgICdwb3NpdGlvbicgaW4gbWFya2VyLm5hdGl2ZU1hcmtlciAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcC5nZXRCb3VuZHMoKS5jb250YWlucyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlci5uYXRpdmVNYXJrZXIucG9zaXRpb25pbmcpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLnNldENlbnRlcihtYXJrZXIubmF0aXZlTWFya2VyLnBvc2l0aW9uKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcC5zZXRab29tKHRoaXMuX29wdGlvbnMubWFya2VyLmNsdXN0ZXIubWF4Wm9vbSArIDEpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyICE9PSB0aGlzLmN1cnJlbnRseUhpZ2hsaWdodGVkTWFya2VyICYmXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5uYXRpdmVNYXJrZXJcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyLm5hdGl2ZU1hcmtlci5zZXRBbmltYXRpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yLm1hcHMuQW5pbWF0aW9uW3R5cGUudG9VcHBlckNhc2UoKV0pXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5pc0hpZ2hsaWdodGVkID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseUhpZ2hsaWdodGVkTWFya2VyID0gbWFya2VyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZmlyZUV2ZW50KCdtYXJrZXJIaWdobGlnaHRlZCcsIG1hcmtlcilcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGFrZXMgdGhlIG1hcmtlciBmb3IgYSBzdG9yZSBhbmQgY3JlYXRlcyB0aGUgSFRNTCBjb250ZW50IG9mIHRoZSBpbmZvXG4gICAgICogd2luZG93LlxuICAgICAqIEBwYXJhbSBtYXJrZXIgLSBNYXJrZXIgdG8gZ2VuZXJhdGUgaW5mbyB3aW5kb3cgZm9yLlxuICAgICAqIEByZXR1cm5zIEluZm8gd2luZG93IG1hcmt1cC5cbiAgICAgKi9cbiAgICBtYWtlSW5mb1dpbmRvdyhtYXJrZXI6T2JqZWN0KTpzdHJpbmd8T2JqZWN0IHtcbiAgICAgICAgaWYgKCQuaXNGdW5jdGlvbih0aGlzLl9vcHRpb25zLmluZm9XaW5kb3cuY29udGVudCkpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5pbmZvV2luZG93LmNvbnRlbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgICBpZiAoJ2NvbnRlbnQnIGluIHRoaXMuX29wdGlvbnMuaW5mb1dpbmRvdylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zLmluZm9XaW5kb3cuY29udGVudFxuICAgICAgICBsZXQgY29udGVudDpzdHJpbmcgPSAnPGRpdj4nXG4gICAgICAgIGZvciAoY29uc3QgbmFtZTpzdHJpbmcgaW4gbWFya2VyLmRhdGEpXG4gICAgICAgICAgICBpZiAobWFya2VyLmRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgJHtuYW1lfTogJHttYXJrZXIuZGF0YVtuYW1lXX08YnIgLz5gXG4gICAgICAgIHJldHVybiBgJHtjb250ZW50fTwvZGl2PmBcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGFrZXMgdGhlIHNlYXJjaCByZXN1bHRzIGFuZCBjcmVhdGVzIHRoZSBIVE1MIGNvbnRlbnQgb2YgdGhlIHNlYXJjaFxuICAgICAqIHJlc3VsdHMuXG4gICAgICogQHBhcmFtIHNlYXJjaFJlc3VsdHMgLSBTZWFyY2ggcmVzdWx0IHRvIGdlbmVyYXRlIG1hcmt1cCBmb3IuXG4gICAgICogQHJldHVybnMgR2VuZXJhdGVkIG1hcmt1cC5cbiAgICAgKi9cbiAgICBtYWtlU2VhcmNoUmVzdWx0cyhzZWFyY2hSZXN1bHRzOkFycmF5PE9iamVjdD4pOlByb21pc2U8YW55PnxzdHJpbmcge1xuICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKHRoaXMuX29wdGlvbnMuc2VhcmNoQm94LmNvbnRlbnQpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnMuc2VhcmNoQm94LmNvbnRlbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgICBpZiAoJ2NvbnRlbnQnIGluIHRoaXMuX29wdGlvbnMuc2VhcmNoQm94LmNvbnRlbnQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5zZWFyY2hCb3guY29udGVudFxuICAgICAgICBsZXQgY29udGVudDpzdHJpbmcgPSAnJ1xuICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdDpPYmplY3Qgb2Ygc2VhcmNoUmVzdWx0cykge1xuICAgICAgICAgICAgY29udGVudCArPSAnPGRpdj4nXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWU6c3RyaW5nIGluIHJlc3VsdC5kYXRhKVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZGF0YS5oYXNPd25Qcm9wZXJ0eShuYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgJHtuYW1lfTogJHtyZXN1bHQuZGF0YVtuYW1lXX08YnIgLz5gXG4gICAgICAgICAgICBjb250ZW50ICs9ICc8L2Rpdj4nXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRlbnRcbiAgICB9XG59XG4vLyBlbmRyZWdpb25cbiQuZm4uU3RvcmVMb2NhdG9yID0gZnVuY3Rpb24oKTphbnkge1xuICAgIHJldHVybiAkLlRvb2xzKCkuY29udHJvbGxlcihTdG9yZUxvY2F0b3IsIGFyZ3VtZW50cywgdGhpcylcbn1cbi8qKiBUaGUgalF1ZXJ5LXN0b3JlTG9jYXRvciBwbHVnaW4gY2xhc3MuICovXG5leHBvcnQgZGVmYXVsdCBTdG9yZUxvY2F0b3Jcbi8vIHJlZ2lvbiB2aW0gbW9kbGluZVxuLy8gdmltOiBzZXQgdGFic3RvcD00IHNoaWZ0d2lkdGg9NCBleHBhbmR0YWI6XG4vLyB2aW06IGZvbGRtZXRob2Q9bWFya2VyIGZvbGRtYXJrZXI9cmVnaW9uLGVuZHJlZ2lvbjpcbi8vIGVuZHJlZ2lvblxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogaW5kZXguanNcbiAqKi8iXSwibWFwcGluZ3MiOiI7O0FBSUE7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBOzs7QUFPQTtBQUdBO0FBR0E7QUFHQTs7O0FBY0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFzSkE7Ozs7Ozs7QUF1QkE7QUFFQTs7QUFvRUE7Ozs7QUF5Q0E7Ozs7QUFTQTs7O0FBd0JBOzs7QUEwQkE7QUFjQTtBQWlEQTtBQTRCQTs7O0FBc0JBO0FBVUE7QUFLQTs7OztBQVFBOzs7O0FBT0E7QUFPQTtBQXlCQTtBQTJDQTs7O0FBWUE7Ozs7QUFtREE7Ozs7OztBQW9CQTs7O0FBUUE7Ozs7O0FBbURBOzs7QUF5QkE7QUFZQTs7O0FBY0E7QUFtQkE7Ozs7O0FBbURBOzs7OztBQWtCQTs7OztBQWdCQTs7O0FBT0E7OztBQU9BOzs7O0FBaURBOzs7OztBQXlDQTs7O0FBb0JBOzs7O0FBV0E7Ozs7O0FBOERBOzs7QUFRQTtBQWVBOzs7OztBQTZCQTs7Ozs7OztBQW9CQTs7OztBQW9CQTs7Ozs7QUErQkE7Ozs7O0FBaUJBO0FBcmhDQTs7OzsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 3 */
/*!*****************!*\
  !*** ./test.js ***!
  \*****************/
/***/ function(module, exports, __webpack_require__) {

	eval("// #!/usr/bin/env node\n// -*- coding: utf-8 -*-\n'use strict'; /* !\n    region header\n    Copyright Torben Sickert (info[\"~at~\"]torben.website) 16.12.2012\n\n    License\n    -------\n\n    This library written by Torben Sickert stand under a creative commons\n    naming 3.0 unported license.\n    See http://creativecommons.org/licenses/by/3.0/deed.de\n    endregion\n*/ // region imports\nvar _browserAPI=__webpack_require__(/*! webOptimizer/browserAPI */ 5);var _browserAPI2=_interopRequireDefault(_browserAPI);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} // endregion\n// endregion\n// region declaration\n// endregion\n// region types\nvar QUnit= true?__webpack_require__(/*! qunit-cli */ 11):require('qunitjs');(0,_browserAPI2.default)(function(browserAPI){var $=__webpack_require__(/*! jquery */ 1);$.context=browserAPI.window.document;__webpack_require__(/*! ./index */ 2); // region configuration\nQUnit.config=$.extend(QUnit.config||{},{ /*\n        notrycatch: true,\n        noglobals: true,\n        */altertitle:true,autostart:true,fixture:'',hidepassed:false,maxDepth:3,reorder:false,requireExpects:false,testTimeout:30*1000,scrolltop:false});$('#qunit-fixture').append('<store-locator><input></store-locator>');var $storeLocatorDeferred=$('store-locator').StoreLocator(); // endregion\n$storeLocatorDeferred.always(function($storeLocatorDomNode){var storeLocator=$storeLocatorDomNode.data('StoreLocator'); // region tests\n// / region public methods\n// //  region special\nQUnit.test('initialize',function(assert){assert.ok(storeLocator);assert.ok($storeLocatorDomNode.children('div').length>0);var $inputDomNode=$storeLocatorDomNode.find('input');assert.ok($inputDomNode.length>0);$inputDomNode.val('a');var $resultsDomNode=$storeLocatorDomNode.find('.store-locator-search-results'); // TODO assert.ok($resultsDomNode.length)\n}); // // endregion\n// / endregion\n// endregion\nif(true){browserAPI.window.close();QUnit.load();}}); // region hot module replacement\n/*\n        NOTE: hot module replacement doesn't work with async tests yet since\n        qunit is not resetable yet:\n\n        if (typeof module === 'object' && 'hot' in module && module.hot) {\n            module.hot.accept()\n            // IgnoreTypeCheck\n            module.hot.dispose(():void => {\n                QUnit.reset()\n                console.clear()\n            }\n        }\n    */ // endregion\n}); // region vim modline\n// vim: set tabstop=4 shiftwidth=4 expandtab:\n// vim: foldmethod=marker foldmarker=region,endregion:\n// endregion\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy90ZXN0LmpzPzFkZDIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbi8vICMhL3Vzci9iaW4vZW52IG5vZGVcbi8vIC0qLSBjb2Rpbmc6IHV0Zi04IC0qLVxuJ3VzZSBzdHJpY3QnXG4vKiAhXG4gICAgcmVnaW9uIGhlYWRlclxuICAgIENvcHlyaWdodCBUb3JiZW4gU2lja2VydCAoaW5mb1tcIn5hdH5cIl10b3JiZW4ud2Vic2l0ZSkgMTYuMTIuMjAxMlxuXG4gICAgTGljZW5zZVxuICAgIC0tLS0tLS1cblxuICAgIFRoaXMgbGlicmFyeSB3cml0dGVuIGJ5IFRvcmJlbiBTaWNrZXJ0IHN0YW5kIHVuZGVyIGEgY3JlYXRpdmUgY29tbW9uc1xuICAgIG5hbWluZyAzLjAgdW5wb3J0ZWQgbGljZW5zZS5cbiAgICBTZWUgaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnkvMy4wL2RlZWQuZGVcbiAgICBlbmRyZWdpb25cbiovXG4vLyByZWdpb24gaW1wb3J0c1xuaW1wb3J0IGJyb3dzZXJBUEkgZnJvbSAnd2ViT3B0aW1pemVyL2Jyb3dzZXJBUEknXG5pbXBvcnQgdHlwZSB7QnJvd3NlckFQSX0gZnJvbSAnd2ViT3B0aW1pemVyL3R5cGUnXG5pbXBvcnQgdHlwZSB7JERvbU5vZGUsICREZWZlcnJlZH0gZnJvbSAnalF1ZXJ5LXRvb2xzJ1xuaW1wb3J0IHR5cGUgU3RvcmVMb2NhdG9yIGZyb20gJy4vaW5kZXgnXG4vLyBlbmRyZWdpb25cbi8vIHJlZ2lvbiBkZWNsYXJhdGlvblxuZGVjbGFyZSB2YXIgVEFSR0VUX1RFQ0hOT0xPR1k6c3RyaW5nXG4vLyBlbmRyZWdpb25cbi8vIHJlZ2lvbiB0eXBlc1xudHlwZSBKUXVlcnlGdW5jdGlvbiA9IChvYmplY3Q6YW55KSA9PiBPYmplY3Rcbi8vIGVuZHJlZ2lvblxuY29uc3QgUVVuaXQ6T2JqZWN0ID0gKFRBUkdFVF9URUNITk9MT0dZID09PSAnbm9kZScpID8gcmVxdWlyZShcbiAgICAncXVuaXQtY2xpJ1xuKSA6IHJlcXVpcmUoJ3F1bml0anMnKVxuYnJvd3NlckFQSSgoYnJvd3NlckFQSTpCcm93c2VyQVBJKTp2b2lkID0+IHtcbiAgICBjb25zdCAkOkpRdWVyeUZ1bmN0aW9uID0gcmVxdWlyZSgnanF1ZXJ5JylcbiAgICAkLmNvbnRleHQgPSBicm93c2VyQVBJLndpbmRvdy5kb2N1bWVudFxuICAgIHJlcXVpcmUoJy4vaW5kZXgnKVxuICAgIC8vIHJlZ2lvbiBjb25maWd1cmF0aW9uXG4gICAgUVVuaXQuY29uZmlnID0gJC5leHRlbmQoUVVuaXQuY29uZmlnIHx8IHt9LCB7XG4gICAgICAgIC8qXG4gICAgICAgIG5vdHJ5Y2F0Y2g6IHRydWUsXG4gICAgICAgIG5vZ2xvYmFsczogdHJ1ZSxcbiAgICAgICAgKi9cbiAgICAgICAgYWx0ZXJ0aXRsZTogdHJ1ZSxcbiAgICAgICAgYXV0b3N0YXJ0OiB0cnVlLFxuICAgICAgICBmaXh0dXJlOiAnJyxcbiAgICAgICAgaGlkZXBhc3NlZDogZmFsc2UsXG4gICAgICAgIG1heERlcHRoOiAzLFxuICAgICAgICByZW9yZGVyOiBmYWxzZSxcbiAgICAgICAgcmVxdWlyZUV4cGVjdHM6IGZhbHNlLFxuICAgICAgICB0ZXN0VGltZW91dDogMzAgKiAxMDAwLFxuICAgICAgICBzY3JvbGx0b3A6IGZhbHNlXG4gICAgfSlcbiAgICAkKCcjcXVuaXQtZml4dHVyZScpLmFwcGVuZCgnPHN0b3JlLWxvY2F0b3I+PGlucHV0Pjwvc3RvcmUtbG9jYXRvcj4nKVxuICAgIGNvbnN0ICRzdG9yZUxvY2F0b3JEZWZlcnJlZDokRGVmZXJyZWQ8JERvbU5vZGU+ID0gJChcbiAgICAgICAgJ3N0b3JlLWxvY2F0b3InXG4gICAgKS5TdG9yZUxvY2F0b3IoKVxuICAgIC8vIGVuZHJlZ2lvblxuICAgICRzdG9yZUxvY2F0b3JEZWZlcnJlZC5hbHdheXMoKCRzdG9yZUxvY2F0b3JEb21Ob2RlOiREb21Ob2RlKTp2b2lkID0+IHtcbiAgICAgICAgY29uc3Qgc3RvcmVMb2NhdG9yOiREZWZlcnJlZDxTdG9yZUxvY2F0b3I+ID0gJHN0b3JlTG9jYXRvckRvbU5vZGUuZGF0YShcbiAgICAgICAgICAgICdTdG9yZUxvY2F0b3InKVxuICAgICAgICAvLyByZWdpb24gdGVzdHNcbiAgICAgICAgLy8gLyByZWdpb24gcHVibGljIG1ldGhvZHNcbiAgICAgICAgLy8gLy8gIHJlZ2lvbiBzcGVjaWFsXG4gICAgICAgIFFVbml0LnRlc3QoJ2luaXRpYWxpemUnLCAoYXNzZXJ0Ok9iamVjdCk6dm9pZCA9PiB7XG4gICAgICAgICAgICBhc3NlcnQub2soc3RvcmVMb2NhdG9yKVxuICAgICAgICAgICAgYXNzZXJ0Lm9rKCRzdG9yZUxvY2F0b3JEb21Ob2RlLmNoaWxkcmVuKCdkaXYnKS5sZW5ndGggPiAwKVxuICAgICAgICAgICAgY29uc3QgJGlucHV0RG9tTm9kZTokRG9tTm9kZSA9ICRzdG9yZUxvY2F0b3JEb21Ob2RlLmZpbmQoJ2lucHV0JylcbiAgICAgICAgICAgIGFzc2VydC5vaygkaW5wdXREb21Ob2RlLmxlbmd0aCA+IDApXG4gICAgICAgICAgICAkaW5wdXREb21Ob2RlLnZhbCgnYScpXG4gICAgICAgICAgICBjb25zdCAkcmVzdWx0c0RvbU5vZGU6JERvbU5vZGUgPSAkc3RvcmVMb2NhdG9yRG9tTm9kZS5maW5kKFxuICAgICAgICAgICAgICAgICcuc3RvcmUtbG9jYXRvci1zZWFyY2gtcmVzdWx0cycpXG4gICAgICAgICAgICAvLyBUT0RPIGFzc2VydC5vaygkcmVzdWx0c0RvbU5vZGUubGVuZ3RoKVxuICAgICAgICB9KVxuICAgICAgICAvLyAvLyBlbmRyZWdpb25cbiAgICAgICAgLy8gLyBlbmRyZWdpb25cbiAgICAgICAgLy8gZW5kcmVnaW9uXG4gICAgICAgIGlmIChUQVJHRVRfVEVDSE5PTE9HWSA9PT0gJ25vZGUnKSB7XG4gICAgICAgICAgICBicm93c2VyQVBJLndpbmRvdy5jbG9zZSgpXG4gICAgICAgICAgICBRVW5pdC5sb2FkKClcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLy8gcmVnaW9uIGhvdCBtb2R1bGUgcmVwbGFjZW1lbnRcbiAgICAvKlxuICAgICAgICBOT1RFOiBob3QgbW9kdWxlIHJlcGxhY2VtZW50IGRvZXNuJ3Qgd29yayB3aXRoIGFzeW5jIHRlc3RzIHlldCBzaW5jZVxuICAgICAgICBxdW5pdCBpcyBub3QgcmVzZXRhYmxlIHlldDpcblxuICAgICAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgJ2hvdCcgaW4gbW9kdWxlICYmIG1vZHVsZS5ob3QpIHtcbiAgICAgICAgICAgIG1vZHVsZS5ob3QuYWNjZXB0KClcbiAgICAgICAgICAgIC8vIElnbm9yZVR5cGVDaGVja1xuICAgICAgICAgICAgbW9kdWxlLmhvdC5kaXNwb3NlKCgpOnZvaWQgPT4ge1xuICAgICAgICAgICAgICAgIFFVbml0LnJlc2V0KClcbiAgICAgICAgICAgICAgICBjb25zb2xlLmNsZWFyKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICovXG4gICAgLy8gZW5kcmVnaW9uXG59KVxuLy8gcmVnaW9uIHZpbSBtb2RsaW5lXG4vLyB2aW06IHNldCB0YWJzdG9wPTQgc2hpZnR3aWR0aD00IGV4cGFuZHRhYjpcbi8vIHZpbTogZm9sZG1ldGhvZD1tYXJrZXIgZm9sZG1hcmtlcj1yZWdpb24sZW5kcmVnaW9uOlxuLy8gZW5kcmVnaW9uXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB0ZXN0LmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiOztBQUdBOzs7Ozs7Ozs7Ozs7QUFjQTs7Ozs7QUFXQTtBQVFBOzs7QUFLQTtBQWVBOzs7QUFNQTtBQVNBOzs7QUFJQTs7Ozs7Ozs7Ozs7Ozs7QUFvQkE7OzsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 4 */
/*!*******************************************************************************************************************************************!*\
  !*** ./~/exports-loader?Class=MarkerClusterer,google=google!./~/imports-loader?google=>{}!./~/js-marker-clusterer/src/markerclusterer.js ***!
  \*******************************************************************************************************************************************/
/***/ function(module, exports) {

	eval("/*** IMPORTS FROM imports-loader ***/\nvar google = {};\n\n// ==ClosureCompiler==\n// @compilation_level ADVANCED_OPTIMIZATIONS\n// @externs_url http://closure-compiler.googlecode.com/svn/trunk/contrib/externs/maps/google_maps_api_v3_3.js\n// ==/ClosureCompiler==\n\n/**\n * @name MarkerClusterer for Google Maps v3\n * @version version 1.0\n * @author Luke Mahe\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of\n * markers.\n * <br/>\n * This is a v3 implementation of the\n * <a href=\"http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/\"\n * >v2 MarkerClusterer</a>.\n */\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * A Marker Clusterer that clusters markers.\n *\n * @param {google.maps.Map} map The Google map to attach to.\n * @param {Array.<google.maps.Marker>=} opt_markers Optional markers to add to\n *   the cluster.\n * @param {Object=} opt_options support the following options:\n *     'gridSize': (number) The grid size of a cluster in pixels.\n *     'maxZoom': (number) The maximum zoom level that a marker can be part of a\n *                cluster.\n *     'zoomOnClick': (boolean) Whether the default behaviour of clicking on a\n *                    cluster is to zoom into it.\n *     'averageCenter': (boolean) Wether the center of each cluster should be\n *                      the average of all markers in the cluster.\n *     'minimumClusterSize': (number) The minimum number of markers to be in a\n *                           cluster before the markers are hidden and a count\n *                           is shown.\n *     'styles': (object) An object that has style properties:\n *       'url': (string) The image url.\n *       'height': (number) The image height.\n *       'width': (number) The image width.\n *       'anchor': (Array) The anchor position of the label text.\n *       'textColor': (string) The text color.\n *       'textSize': (number) The text size.\n *       'backgroundPosition': (string) The position of the backgound x, y.\n *       'iconAnchor': (Array) The anchor position of the icon x, y.\n * @constructor\n * @extends google.maps.OverlayView\n */\nfunction MarkerClusterer(map, opt_markers, opt_options) {\n  // MarkerClusterer implements google.maps.OverlayView interface. We use the\n  // extend function to extend MarkerClusterer with google.maps.OverlayView\n  // because it might not always be available when the code is defined so we\n  // look for it at the last possible moment. If it doesn't exist now then\n  // there is no point going ahead :)\n  this.extend(MarkerClusterer, google.maps.OverlayView);\n  this.map_ = map;\n\n  /**\n   * @type {Array.<google.maps.Marker>}\n   * @private\n   */\n  this.markers_ = [];\n\n  /**\n   *  @type {Array.<Cluster>}\n   */\n  this.clusters_ = [];\n\n  this.sizes = [53, 56, 66, 78, 90];\n\n  /**\n   * @private\n   */\n  this.styles_ = [];\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.ready_ = false;\n\n  var options = opt_options || {};\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.gridSize_ = options['gridSize'] || 60;\n\n  /**\n   * @private\n   */\n  this.minClusterSize_ = options['minimumClusterSize'] || 2;\n\n\n  /**\n   * @type {?number}\n   * @private\n   */\n  this.maxZoom_ = options['maxZoom'] || null;\n\n  this.styles_ = options['styles'] || [];\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.imagePath_ = options['imagePath'] ||\n      this.MARKER_CLUSTER_IMAGE_PATH_;\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.imageExtension_ = options['imageExtension'] ||\n      this.MARKER_CLUSTER_IMAGE_EXTENSION_;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.zoomOnClick_ = true;\n\n  if (options['zoomOnClick'] != undefined) {\n    this.zoomOnClick_ = options['zoomOnClick'];\n  }\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.averageCenter_ = false;\n\n  if (options['averageCenter'] != undefined) {\n    this.averageCenter_ = options['averageCenter'];\n  }\n\n  this.setupStyles_();\n\n  this.setMap(map);\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.prevZoom_ = this.map_.getZoom();\n\n  // Add the map event listeners\n  var that = this;\n  google.maps.event.addListener(this.map_, 'zoom_changed', function() {\n    var zoom = that.map_.getZoom();\n\n    if (that.prevZoom_ != zoom) {\n      that.prevZoom_ = zoom;\n      that.resetViewport();\n    }\n  });\n\n  google.maps.event.addListener(this.map_, 'idle', function() {\n    that.redraw();\n  });\n\n  // Finally, add the markers\n  if (opt_markers && opt_markers.length) {\n    this.addMarkers(opt_markers, false);\n  }\n}\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_ =\n    'http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/' +\n    'images/m';\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_ = 'png';\n\n\n/**\n * Extends a objects prototype by anothers.\n *\n * @param {Object} obj1 The object to be extended.\n * @param {Object} obj2 The object to extend with.\n * @return {Object} The new extended object.\n * @ignore\n */\nMarkerClusterer.prototype.extend = function(obj1, obj2) {\n  return (function(object) {\n    for (var property in object.prototype) {\n      this.prototype[property] = object.prototype[property];\n    }\n    return this;\n  }).apply(obj1, [obj2]);\n};\n\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.onAdd = function() {\n  this.setReady_(true);\n};\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.draw = function() {};\n\n/**\n * Sets up the styles object.\n *\n * @private\n */\nMarkerClusterer.prototype.setupStyles_ = function() {\n  if (this.styles_.length) {\n    return;\n  }\n\n  for (var i = 0, size; size = this.sizes[i]; i++) {\n    this.styles_.push({\n      url: this.imagePath_ + (i + 1) + '.' + this.imageExtension_,\n      height: size,\n      width: size\n    });\n  }\n};\n\n/**\n *  Fit the map to the bounds of the markers in the clusterer.\n */\nMarkerClusterer.prototype.fitMapToMarkers = function() {\n  var markers = this.getMarkers();\n  var bounds = new google.maps.LatLngBounds();\n  for (var i = 0, marker; marker = markers[i]; i++) {\n    bounds.extend(marker.getPosition());\n  }\n\n  this.map_.fitBounds(bounds);\n};\n\n\n/**\n *  Sets the styles.\n *\n *  @param {Object} styles The style to set.\n */\nMarkerClusterer.prototype.setStyles = function(styles) {\n  this.styles_ = styles;\n};\n\n\n/**\n *  Gets the styles.\n *\n *  @return {Object} The styles object.\n */\nMarkerClusterer.prototype.getStyles = function() {\n  return this.styles_;\n};\n\n\n/**\n * Whether zoom on click is set.\n *\n * @return {boolean} True if zoomOnClick_ is set.\n */\nMarkerClusterer.prototype.isZoomOnClick = function() {\n  return this.zoomOnClick_;\n};\n\n/**\n * Whether average center is set.\n *\n * @return {boolean} True if averageCenter_ is set.\n */\nMarkerClusterer.prototype.isAverageCenter = function() {\n  return this.averageCenter_;\n};\n\n\n/**\n *  Returns the array of markers in the clusterer.\n *\n *  @return {Array.<google.maps.Marker>} The markers.\n */\nMarkerClusterer.prototype.getMarkers = function() {\n  return this.markers_;\n};\n\n\n/**\n *  Returns the number of markers in the clusterer\n *\n *  @return {Number} The number of markers.\n */\nMarkerClusterer.prototype.getTotalMarkers = function() {\n  return this.markers_.length;\n};\n\n\n/**\n *  Sets the max zoom for the clusterer.\n *\n *  @param {number} maxZoom The max zoom level.\n */\nMarkerClusterer.prototype.setMaxZoom = function(maxZoom) {\n  this.maxZoom_ = maxZoom;\n};\n\n\n/**\n *  Gets the max zoom for the clusterer.\n *\n *  @return {number} The max zoom level.\n */\nMarkerClusterer.prototype.getMaxZoom = function() {\n  return this.maxZoom_;\n};\n\n\n/**\n *  The function for calculating the cluster icon image.\n *\n *  @param {Array.<google.maps.Marker>} markers The markers in the clusterer.\n *  @param {number} numStyles The number of styles available.\n *  @return {Object} A object properties: 'text' (string) and 'index' (number).\n *  @private\n */\nMarkerClusterer.prototype.calculator_ = function(markers, numStyles) {\n  var index = 0;\n  var count = markers.length;\n  var dv = count;\n  while (dv !== 0) {\n    dv = parseInt(dv / 10, 10);\n    index++;\n  }\n\n  index = Math.min(index, numStyles);\n  return {\n    text: count,\n    index: index\n  };\n};\n\n\n/**\n * Set the calculator function.\n *\n * @param {function(Array, number)} calculator The function to set as the\n *     calculator. The function should return a object properties:\n *     'text' (string) and 'index' (number).\n *\n */\nMarkerClusterer.prototype.setCalculator = function(calculator) {\n  this.calculator_ = calculator;\n};\n\n\n/**\n * Get the calculator function.\n *\n * @return {function(Array, number)} the calculator function.\n */\nMarkerClusterer.prototype.getCalculator = function() {\n  return this.calculator_;\n};\n\n\n/**\n * Add an array of markers to the clusterer.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarkers = function(markers, opt_nodraw) {\n  for (var i = 0, marker; marker = markers[i]; i++) {\n    this.pushMarkerTo_(marker);\n  }\n  if (!opt_nodraw) {\n    this.redraw();\n  }\n};\n\n\n/**\n * Pushes a marker to the clusterer.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.pushMarkerTo_ = function(marker) {\n  marker.isAdded = false;\n  if (marker['draggable']) {\n    // If the marker is draggable add a listener so we update the clusters on\n    // the drag end.\n    var that = this;\n    google.maps.event.addListener(marker, 'dragend', function() {\n      marker.isAdded = false;\n      that.repaint();\n    });\n  }\n  this.markers_.push(marker);\n};\n\n\n/**\n * Adds a marker to the clusterer and redraws if needed.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarker = function(marker, opt_nodraw) {\n  this.pushMarkerTo_(marker);\n  if (!opt_nodraw) {\n    this.redraw();\n  }\n};\n\n\n/**\n * Removes a marker and returns true if removed, false if not\n *\n * @param {google.maps.Marker} marker The marker to remove\n * @return {boolean} Whether the marker was removed or not\n * @private\n */\nMarkerClusterer.prototype.removeMarker_ = function(marker) {\n  var index = -1;\n  if (this.markers_.indexOf) {\n    index = this.markers_.indexOf(marker);\n  } else {\n    for (var i = 0, m; m = this.markers_[i]; i++) {\n      if (m == marker) {\n        index = i;\n        break;\n      }\n    }\n  }\n\n  if (index == -1) {\n    // Marker is not in our list of markers.\n    return false;\n  }\n\n  marker.setMap(null);\n\n  this.markers_.splice(index, 1);\n\n  return true;\n};\n\n\n/**\n * Remove a marker from the cluster.\n *\n * @param {google.maps.Marker} marker The marker to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n * @return {boolean} True if the marker was removed.\n */\nMarkerClusterer.prototype.removeMarker = function(marker, opt_nodraw) {\n  var removed = this.removeMarker_(marker);\n\n  if (!opt_nodraw && removed) {\n    this.resetViewport();\n    this.redraw();\n    return true;\n  } else {\n   return false;\n  }\n};\n\n\n/**\n * Removes an array of markers from the cluster.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n */\nMarkerClusterer.prototype.removeMarkers = function(markers, opt_nodraw) {\n  var removed = false;\n\n  for (var i = 0, marker; marker = markers[i]; i++) {\n    var r = this.removeMarker_(marker);\n    removed = removed || r;\n  }\n\n  if (!opt_nodraw && removed) {\n    this.resetViewport();\n    this.redraw();\n    return true;\n  }\n};\n\n\n/**\n * Sets the clusterer's ready state.\n *\n * @param {boolean} ready The state.\n * @private\n */\nMarkerClusterer.prototype.setReady_ = function(ready) {\n  if (!this.ready_) {\n    this.ready_ = ready;\n    this.createClusters_();\n  }\n};\n\n\n/**\n * Returns the number of clusters in the clusterer.\n *\n * @return {number} The number of clusters.\n */\nMarkerClusterer.prototype.getTotalClusters = function() {\n  return this.clusters_.length;\n};\n\n\n/**\n * Returns the google map that the clusterer is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nMarkerClusterer.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * Sets the google map that the clusterer is associated with.\n *\n * @param {google.maps.Map} map The map.\n */\nMarkerClusterer.prototype.setMap = function(map) {\n  this.map_ = map;\n};\n\n\n/**\n * Returns the size of the grid.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getGridSize = function() {\n  return this.gridSize_;\n};\n\n\n/**\n * Sets the size of the grid.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setGridSize = function(size) {\n  this.gridSize_ = size;\n};\n\n\n/**\n * Returns the min cluster size.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getMinClusterSize = function() {\n  return this.minClusterSize_;\n};\n\n/**\n * Sets the min cluster size.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setMinClusterSize = function(size) {\n  this.minClusterSize_ = size;\n};\n\n\n/**\n * Extends a bounds object by the grid size.\n *\n * @param {google.maps.LatLngBounds} bounds The bounds to extend.\n * @return {google.maps.LatLngBounds} The extended bounds.\n */\nMarkerClusterer.prototype.getExtendedBounds = function(bounds) {\n  var projection = this.getProjection();\n\n  // Turn the bounds into latlng.\n  var tr = new google.maps.LatLng(bounds.getNorthEast().lat(),\n      bounds.getNorthEast().lng());\n  var bl = new google.maps.LatLng(bounds.getSouthWest().lat(),\n      bounds.getSouthWest().lng());\n\n  // Convert the points to pixels and the extend out by the grid size.\n  var trPix = projection.fromLatLngToDivPixel(tr);\n  trPix.x += this.gridSize_;\n  trPix.y -= this.gridSize_;\n\n  var blPix = projection.fromLatLngToDivPixel(bl);\n  blPix.x -= this.gridSize_;\n  blPix.y += this.gridSize_;\n\n  // Convert the pixel points back to LatLng\n  var ne = projection.fromDivPixelToLatLng(trPix);\n  var sw = projection.fromDivPixelToLatLng(blPix);\n\n  // Extend the bounds to contain the new bounds.\n  bounds.extend(ne);\n  bounds.extend(sw);\n\n  return bounds;\n};\n\n\n/**\n * Determins if a marker is contained in a bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @param {google.maps.LatLngBounds} bounds The bounds to check against.\n * @return {boolean} True if the marker is in the bounds.\n * @private\n */\nMarkerClusterer.prototype.isMarkerInBounds_ = function(marker, bounds) {\n  return bounds.contains(marker.getPosition());\n};\n\n\n/**\n * Clears all clusters and markers from the clusterer.\n */\nMarkerClusterer.prototype.clearMarkers = function() {\n  this.resetViewport(true);\n\n  // Set the markers a empty array.\n  this.markers_ = [];\n};\n\n\n/**\n * Clears all existing clusters and recreates them.\n * @param {boolean} opt_hide To also hide the marker.\n */\nMarkerClusterer.prototype.resetViewport = function(opt_hide) {\n  // Remove all the clusters\n  for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n    cluster.remove();\n  }\n\n  // Reset the markers to not be added and to be invisible.\n  for (var i = 0, marker; marker = this.markers_[i]; i++) {\n    marker.isAdded = false;\n    if (opt_hide) {\n      marker.setMap(null);\n    }\n  }\n\n  this.clusters_ = [];\n};\n\n/**\n *\n */\nMarkerClusterer.prototype.repaint = function() {\n  var oldClusters = this.clusters_.slice();\n  this.clusters_.length = 0;\n  this.resetViewport();\n  this.redraw();\n\n  // Remove the old clusters.\n  // Do it in a timeout so the other clusters have been drawn first.\n  window.setTimeout(function() {\n    for (var i = 0, cluster; cluster = oldClusters[i]; i++) {\n      cluster.remove();\n    }\n  }, 0);\n};\n\n\n/**\n * Redraws the clusters.\n */\nMarkerClusterer.prototype.redraw = function() {\n  this.createClusters_();\n};\n\n\n/**\n * Calculates the distance between two latlng locations in km.\n * @see http://www.movable-type.co.uk/scripts/latlong.html\n *\n * @param {google.maps.LatLng} p1 The first lat lng point.\n * @param {google.maps.LatLng} p2 The second lat lng point.\n * @return {number} The distance between the two points in km.\n * @private\n*/\nMarkerClusterer.prototype.distanceBetweenPoints_ = function(p1, p2) {\n  if (!p1 || !p2) {\n    return 0;\n  }\n\n  var R = 6371; // Radius of the Earth in km\n  var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;\n  var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;\n  var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *\n    Math.sin(dLon / 2) * Math.sin(dLon / 2);\n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  var d = R * c;\n  return d;\n};\n\n\n/**\n * Add a marker to a cluster, or creates a new cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.addToClosestCluster_ = function(marker) {\n  var distance = 40000; // Some large number\n  var clusterToAddTo = null;\n  var pos = marker.getPosition();\n  for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n    var center = cluster.getCenter();\n    if (center) {\n      var d = this.distanceBetweenPoints_(center, marker.getPosition());\n      if (d < distance) {\n        distance = d;\n        clusterToAddTo = cluster;\n      }\n    }\n  }\n\n  if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n    clusterToAddTo.addMarker(marker);\n  } else {\n    var cluster = new Cluster(this);\n    cluster.addMarker(marker);\n    this.clusters_.push(cluster);\n  }\n};\n\n\n/**\n * Creates the clusters.\n *\n * @private\n */\nMarkerClusterer.prototype.createClusters_ = function() {\n  if (!this.ready_) {\n    return;\n  }\n\n  // Get our current map view bounds.\n  // Create a new bounds object so we don't affect the map.\n  var mapBounds = new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),\n      this.map_.getBounds().getNorthEast());\n  var bounds = this.getExtendedBounds(mapBounds);\n\n  for (var i = 0, marker; marker = this.markers_[i]; i++) {\n    if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n      this.addToClosestCluster_(marker);\n    }\n  }\n};\n\n\n/**\n * A cluster that contains markers.\n *\n * @param {MarkerClusterer} markerClusterer The markerclusterer that this\n *     cluster is associated with.\n * @constructor\n * @ignore\n */\nfunction Cluster(markerClusterer) {\n  this.markerClusterer_ = markerClusterer;\n  this.map_ = markerClusterer.getMap();\n  this.gridSize_ = markerClusterer.getGridSize();\n  this.minClusterSize_ = markerClusterer.getMinClusterSize();\n  this.averageCenter_ = markerClusterer.isAverageCenter();\n  this.center_ = null;\n  this.markers_ = [];\n  this.bounds_ = null;\n  this.clusterIcon_ = new ClusterIcon(this, markerClusterer.getStyles(),\n      markerClusterer.getGridSize());\n}\n\n/**\n * Determins if a marker is already added to the cluster.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker is already added.\n */\nCluster.prototype.isMarkerAlreadyAdded = function(marker) {\n  if (this.markers_.indexOf) {\n    return this.markers_.indexOf(marker) != -1;\n  } else {\n    for (var i = 0, m; m = this.markers_[i]; i++) {\n      if (m == marker) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n\n/**\n * Add a marker the cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @return {boolean} True if the marker was added.\n */\nCluster.prototype.addMarker = function(marker) {\n  if (this.isMarkerAlreadyAdded(marker)) {\n    return false;\n  }\n\n  if (!this.center_) {\n    this.center_ = marker.getPosition();\n    this.calculateBounds_();\n  } else {\n    if (this.averageCenter_) {\n      var l = this.markers_.length + 1;\n      var lat = (this.center_.lat() * (l-1) + marker.getPosition().lat()) / l;\n      var lng = (this.center_.lng() * (l-1) + marker.getPosition().lng()) / l;\n      this.center_ = new google.maps.LatLng(lat, lng);\n      this.calculateBounds_();\n    }\n  }\n\n  marker.isAdded = true;\n  this.markers_.push(marker);\n\n  var len = this.markers_.length;\n  if (len < this.minClusterSize_ && marker.getMap() != this.map_) {\n    // Min cluster size not reached so show the marker.\n    marker.setMap(this.map_);\n  }\n\n  if (len == this.minClusterSize_) {\n    // Hide the markers that were showing.\n    for (var i = 0; i < len; i++) {\n      this.markers_[i].setMap(null);\n    }\n  }\n\n  if (len >= this.minClusterSize_) {\n    marker.setMap(null);\n  }\n\n  this.updateIcon();\n  return true;\n};\n\n\n/**\n * Returns the marker clusterer that the cluster is associated with.\n *\n * @return {MarkerClusterer} The associated marker clusterer.\n */\nCluster.prototype.getMarkerClusterer = function() {\n  return this.markerClusterer_;\n};\n\n\n/**\n * Returns the bounds of the cluster.\n *\n * @return {google.maps.LatLngBounds} the cluster bounds.\n */\nCluster.prototype.getBounds = function() {\n  var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n  var markers = this.getMarkers();\n  for (var i = 0, marker; marker = markers[i]; i++) {\n    bounds.extend(marker.getPosition());\n  }\n  return bounds;\n};\n\n\n/**\n * Removes the cluster\n */\nCluster.prototype.remove = function() {\n  this.clusterIcon_.remove();\n  this.markers_.length = 0;\n  delete this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {number} The cluster center.\n */\nCluster.prototype.getSize = function() {\n  return this.markers_.length;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {Array.<google.maps.Marker>} The cluster center.\n */\nCluster.prototype.getMarkers = function() {\n  return this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {google.maps.LatLng} The cluster center.\n */\nCluster.prototype.getCenter = function() {\n  return this.center_;\n};\n\n\n/**\n * Calculated the extended bounds of the cluster with the grid.\n *\n * @private\n */\nCluster.prototype.calculateBounds_ = function() {\n  var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n  this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n};\n\n\n/**\n * Determines if a marker lies in the clusters bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker lies in the bounds.\n */\nCluster.prototype.isMarkerInClusterBounds = function(marker) {\n  return this.bounds_.contains(marker.getPosition());\n};\n\n\n/**\n * Returns the map that the cluster is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nCluster.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * Updates the cluster icon\n */\nCluster.prototype.updateIcon = function() {\n  var zoom = this.map_.getZoom();\n  var mz = this.markerClusterer_.getMaxZoom();\n\n  if (mz && zoom > mz) {\n    // The zoom is greater than our max zoom so show all the markers in cluster.\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\n      marker.setMap(this.map_);\n    }\n    return;\n  }\n\n  if (this.markers_.length < this.minClusterSize_) {\n    // Min cluster size not yet reached.\n    this.clusterIcon_.hide();\n    return;\n  }\n\n  var numStyles = this.markerClusterer_.getStyles().length;\n  var sums = this.markerClusterer_.getCalculator()(this.markers_, numStyles);\n  this.clusterIcon_.setCenter(this.center_);\n  this.clusterIcon_.setSums(sums);\n  this.clusterIcon_.show();\n};\n\n\n/**\n * A cluster icon\n *\n * @param {Cluster} cluster The cluster to be associated with.\n * @param {Object} styles An object that has style properties:\n *     'url': (string) The image url.\n *     'height': (number) The image height.\n *     'width': (number) The image width.\n *     'anchor': (Array) The anchor position of the label text.\n *     'textColor': (string) The text color.\n *     'textSize': (number) The text size.\n *     'backgroundPosition: (string) The background postition x, y.\n * @param {number=} opt_padding Optional padding to apply to the cluster icon.\n * @constructor\n * @extends google.maps.OverlayView\n * @ignore\n */\nfunction ClusterIcon(cluster, styles, opt_padding) {\n  cluster.getMarkerClusterer().extend(ClusterIcon, google.maps.OverlayView);\n\n  this.styles_ = styles;\n  this.padding_ = opt_padding || 0;\n  this.cluster_ = cluster;\n  this.center_ = null;\n  this.map_ = cluster.getMap();\n  this.div_ = null;\n  this.sums_ = null;\n  this.visible_ = false;\n\n  this.setMap(this.map_);\n}\n\n\n/**\n * Triggers the clusterclick event and zoom's if the option is set.\n */\nClusterIcon.prototype.triggerClusterClick = function() {\n  var markerClusterer = this.cluster_.getMarkerClusterer();\n\n  // Trigger the clusterclick event.\n  google.maps.event.trigger(markerClusterer, 'clusterclick', this.cluster_);\n\n  if (markerClusterer.isZoomOnClick()) {\n    // Zoom into the cluster.\n    this.map_.fitBounds(this.cluster_.getBounds());\n  }\n};\n\n\n/**\n * Adding the cluster icon to the dom.\n * @ignore\n */\nClusterIcon.prototype.onAdd = function() {\n  this.div_ = document.createElement('DIV');\n  if (this.visible_) {\n    var pos = this.getPosFromLatLng_(this.center_);\n    this.div_.style.cssText = this.createCss(pos);\n    this.div_.innerHTML = this.sums_.text;\n  }\n\n  var panes = this.getPanes();\n  panes.overlayMouseTarget.appendChild(this.div_);\n\n  var that = this;\n  google.maps.event.addDomListener(this.div_, 'click', function() {\n    that.triggerClusterClick();\n  });\n};\n\n\n/**\n * Returns the position to place the div dending on the latlng.\n *\n * @param {google.maps.LatLng} latlng The position in latlng.\n * @return {google.maps.Point} The position in pixels.\n * @private\n */\nClusterIcon.prototype.getPosFromLatLng_ = function(latlng) {\n  var pos = this.getProjection().fromLatLngToDivPixel(latlng);\n\n  if (typeof this.iconAnchor_ === 'object' && this.iconAnchor_.length === 2) {\n    pos.x -= this.iconAnchor_[0];\n    pos.y -= this.iconAnchor_[1];\n  } else {\n    pos.x -= parseInt(this.width_ / 2, 10);\n    pos.y -= parseInt(this.height_ / 2, 10);\n  }\n  return pos;\n};\n\n\n/**\n * Draw the icon.\n * @ignore\n */\nClusterIcon.prototype.draw = function() {\n  if (this.visible_) {\n    var pos = this.getPosFromLatLng_(this.center_);\n    this.div_.style.top = pos.y + 'px';\n    this.div_.style.left = pos.x + 'px';\n  }\n};\n\n\n/**\n * Hide the icon.\n */\nClusterIcon.prototype.hide = function() {\n  if (this.div_) {\n    this.div_.style.display = 'none';\n  }\n  this.visible_ = false;\n};\n\n\n/**\n * Position and show the icon.\n */\nClusterIcon.prototype.show = function() {\n  if (this.div_) {\n    var pos = this.getPosFromLatLng_(this.center_);\n    this.div_.style.cssText = this.createCss(pos);\n    this.div_.style.display = '';\n  }\n  this.visible_ = true;\n};\n\n\n/**\n * Remove the icon from the map\n */\nClusterIcon.prototype.remove = function() {\n  this.setMap(null);\n};\n\n\n/**\n * Implementation of the onRemove interface.\n * @ignore\n */\nClusterIcon.prototype.onRemove = function() {\n  if (this.div_ && this.div_.parentNode) {\n    this.hide();\n    this.div_.parentNode.removeChild(this.div_);\n    this.div_ = null;\n  }\n};\n\n\n/**\n * Set the sums of the icon.\n *\n * @param {Object} sums The sums containing:\n *   'text': (string) The text to display in the icon.\n *   'index': (number) The style index of the icon.\n */\nClusterIcon.prototype.setSums = function(sums) {\n  this.sums_ = sums;\n  this.text_ = sums.text;\n  this.index_ = sums.index;\n  if (this.div_) {\n    this.div_.innerHTML = sums.text;\n  }\n\n  this.useStyle();\n};\n\n\n/**\n * Sets the icon to the the styles.\n */\nClusterIcon.prototype.useStyle = function() {\n  var index = Math.max(0, this.sums_.index - 1);\n  index = Math.min(this.styles_.length - 1, index);\n  var style = this.styles_[index];\n  this.url_ = style['url'];\n  this.height_ = style['height'];\n  this.width_ = style['width'];\n  this.textColor_ = style['textColor'];\n  this.anchor_ = style['anchor'];\n  this.textSize_ = style['textSize'];\n  this.backgroundPosition_ = style['backgroundPosition'];\n  this.iconAnchor_ = style['iconAnchor'];\n};\n\n\n/**\n * Sets the center of the icon.\n *\n * @param {google.maps.LatLng} center The latlng to set as the center.\n */\nClusterIcon.prototype.setCenter = function(center) {\n  this.center_ = center;\n};\n\n\n/**\n * Create the css text based on the position of the icon.\n *\n * @param {google.maps.Point} pos The position.\n * @return {string} The css style text.\n */\nClusterIcon.prototype.createCss = function(pos) {\n  var style = [];\n  style.push('background-image:url(' + this.url_ + ');');\n  var backgroundPosition = this.backgroundPosition_ ? this.backgroundPosition_ : '0 0';\n  style.push('background-position:' + backgroundPosition + ';');\n\n  if (typeof this.anchor_ === 'object') {\n    if (typeof this.anchor_[0] === 'number' && this.anchor_[0] > 0 &&\n        this.anchor_[0] < this.height_) {\n      style.push('height:' + (this.height_ - this.anchor_[0]) +\n          'px; padding-top:' + this.anchor_[0] + 'px;');\n    } else if (typeof this.anchor_[0] === 'number' && this.anchor_[0] < 0 &&\n        -this.anchor_[0] < this.height_) {\n      style.push('height:' + this.height_ + 'px; line-height:' + (this.height_ + this.anchor_[0]) +\n          'px;');\n    } else {\n      style.push('height:' + this.height_ + 'px; line-height:' + this.height_ +\n          'px;');\n    }\n    if (typeof this.anchor_[1] === 'number' && this.anchor_[1] > 0 &&\n        this.anchor_[1] < this.width_) {\n      style.push('width:' + (this.width_ - this.anchor_[1]) +\n          'px; padding-left:' + this.anchor_[1] + 'px;');\n    } else {\n      style.push('width:' + this.width_ + 'px; text-align:center;');\n    }\n  } else {\n    style.push('height:' + this.height_ + 'px; line-height:' +\n        this.height_ + 'px; width:' + this.width_ + 'px; text-align:center;');\n  }\n\n  var txtColor = this.textColor_ ? this.textColor_ : 'black';\n  var txtSize = this.textSize_ ? this.textSize_ : 11;\n\n  style.push('cursor:pointer; top:' + pos.y + 'px; left:' +\n      pos.x + 'px; color:' + txtColor + '; position:absolute; font-size:' +\n      txtSize + 'px; font-family:Arial,sans-serif; font-weight:bold');\n  return style.join('');\n};\n\n\n// Export Symbols for Closure\n// If you are not going to compile with closure then you can remove the\n// code below.\nwindow['MarkerClusterer'] = MarkerClusterer;\nMarkerClusterer.prototype['addMarker'] = MarkerClusterer.prototype.addMarker;\nMarkerClusterer.prototype['addMarkers'] = MarkerClusterer.prototype.addMarkers;\nMarkerClusterer.prototype['clearMarkers'] =\n    MarkerClusterer.prototype.clearMarkers;\nMarkerClusterer.prototype['fitMapToMarkers'] =\n    MarkerClusterer.prototype.fitMapToMarkers;\nMarkerClusterer.prototype['getCalculator'] =\n    MarkerClusterer.prototype.getCalculator;\nMarkerClusterer.prototype['getGridSize'] =\n    MarkerClusterer.prototype.getGridSize;\nMarkerClusterer.prototype['getExtendedBounds'] =\n    MarkerClusterer.prototype.getExtendedBounds;\nMarkerClusterer.prototype['getMap'] = MarkerClusterer.prototype.getMap;\nMarkerClusterer.prototype['getMarkers'] = MarkerClusterer.prototype.getMarkers;\nMarkerClusterer.prototype['getMaxZoom'] = MarkerClusterer.prototype.getMaxZoom;\nMarkerClusterer.prototype['getStyles'] = MarkerClusterer.prototype.getStyles;\nMarkerClusterer.prototype['getTotalClusters'] =\n    MarkerClusterer.prototype.getTotalClusters;\nMarkerClusterer.prototype['getTotalMarkers'] =\n    MarkerClusterer.prototype.getTotalMarkers;\nMarkerClusterer.prototype['redraw'] = MarkerClusterer.prototype.redraw;\nMarkerClusterer.prototype['removeMarker'] =\n    MarkerClusterer.prototype.removeMarker;\nMarkerClusterer.prototype['removeMarkers'] =\n    MarkerClusterer.prototype.removeMarkers;\nMarkerClusterer.prototype['resetViewport'] =\n    MarkerClusterer.prototype.resetViewport;\nMarkerClusterer.prototype['repaint'] =\n    MarkerClusterer.prototype.repaint;\nMarkerClusterer.prototype['setCalculator'] =\n    MarkerClusterer.prototype.setCalculator;\nMarkerClusterer.prototype['setGridSize'] =\n    MarkerClusterer.prototype.setGridSize;\nMarkerClusterer.prototype['setMaxZoom'] =\n    MarkerClusterer.prototype.setMaxZoom;\nMarkerClusterer.prototype['onAdd'] = MarkerClusterer.prototype.onAdd;\nMarkerClusterer.prototype['draw'] = MarkerClusterer.prototype.draw;\n\nCluster.prototype['getCenter'] = Cluster.prototype.getCenter;\nCluster.prototype['getSize'] = Cluster.prototype.getSize;\nCluster.prototype['getMarkers'] = Cluster.prototype.getMarkers;\n\nClusterIcon.prototype['onAdd'] = ClusterIcon.prototype.onAdd;\nClusterIcon.prototype['draw'] = ClusterIcon.prototype.draw;\nClusterIcon.prototype['onRemove'] = ClusterIcon.prototype.onRemove;\n\n\n\n/*** EXPORTS FROM exports-loader ***/\nexports[\"Class\"] = (MarkerClusterer);\nexports[\"google\"] = (google);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vanMtbWFya2VyLWNsdXN0ZXJlci9zcmMvbWFya2VyY2x1c3RlcmVyLmpzPzA5ZjAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyIGdvb2dsZSA9IHt9O1xuXG4vLyA9PUNsb3N1cmVDb21waWxlcj09XG4vLyBAY29tcGlsYXRpb25fbGV2ZWwgQURWQU5DRURfT1BUSU1JWkFUSU9OU1xuLy8gQGV4dGVybnNfdXJsIGh0dHA6Ly9jbG9zdXJlLWNvbXBpbGVyLmdvb2dsZWNvZGUuY29tL3N2bi90cnVuay9jb250cmliL2V4dGVybnMvbWFwcy9nb29nbGVfbWFwc19hcGlfdjNfMy5qc1xuLy8gPT0vQ2xvc3VyZUNvbXBpbGVyPT1cblxuLyoqXG4gKiBAbmFtZSBNYXJrZXJDbHVzdGVyZXIgZm9yIEdvb2dsZSBNYXBzIHYzXG4gKiBAdmVyc2lvbiB2ZXJzaW9uIDEuMFxuICogQGF1dGhvciBMdWtlIE1haGVcbiAqIEBmaWxlb3ZlcnZpZXdcbiAqIFRoZSBsaWJyYXJ5IGNyZWF0ZXMgYW5kIG1hbmFnZXMgcGVyLXpvb20tbGV2ZWwgY2x1c3RlcnMgZm9yIGxhcmdlIGFtb3VudHMgb2ZcbiAqIG1hcmtlcnMuXG4gKiA8YnIvPlxuICogVGhpcyBpcyBhIHYzIGltcGxlbWVudGF0aW9uIG9mIHRoZVxuICogPGEgaHJlZj1cImh0dHA6Ly9nbWFwcy11dGlsaXR5LWxpYnJhcnktZGV2Lmdvb2dsZWNvZGUuY29tL3N2bi90YWdzL21hcmtlcmNsdXN0ZXJlci9cIlxuICogPnYyIE1hcmtlckNsdXN0ZXJlcjwvYT4uXG4gKi9cblxuLyoqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIEEgTWFya2VyIENsdXN0ZXJlciB0aGF0IGNsdXN0ZXJzIG1hcmtlcnMuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXB9IG1hcCBUaGUgR29vZ2xlIG1hcCB0byBhdHRhY2ggdG8uXG4gKiBAcGFyYW0ge0FycmF5Ljxnb29nbGUubWFwcy5NYXJrZXI+PX0gb3B0X21hcmtlcnMgT3B0aW9uYWwgbWFya2VycyB0byBhZGQgdG9cbiAqICAgdGhlIGNsdXN0ZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF9vcHRpb25zIHN1cHBvcnQgdGhlIGZvbGxvd2luZyBvcHRpb25zOlxuICogICAgICdncmlkU2l6ZSc6IChudW1iZXIpIFRoZSBncmlkIHNpemUgb2YgYSBjbHVzdGVyIGluIHBpeGVscy5cbiAqICAgICAnbWF4Wm9vbSc6IChudW1iZXIpIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgdGhhdCBhIG1hcmtlciBjYW4gYmUgcGFydCBvZiBhXG4gKiAgICAgICAgICAgICAgICBjbHVzdGVyLlxuICogICAgICd6b29tT25DbGljayc6IChib29sZWFuKSBXaGV0aGVyIHRoZSBkZWZhdWx0IGJlaGF2aW91ciBvZiBjbGlja2luZyBvbiBhXG4gKiAgICAgICAgICAgICAgICAgICAgY2x1c3RlciBpcyB0byB6b29tIGludG8gaXQuXG4gKiAgICAgJ2F2ZXJhZ2VDZW50ZXInOiAoYm9vbGVhbikgV2V0aGVyIHRoZSBjZW50ZXIgb2YgZWFjaCBjbHVzdGVyIHNob3VsZCBiZVxuICogICAgICAgICAgICAgICAgICAgICAgdGhlIGF2ZXJhZ2Ugb2YgYWxsIG1hcmtlcnMgaW4gdGhlIGNsdXN0ZXIuXG4gKiAgICAgJ21pbmltdW1DbHVzdGVyU2l6ZSc6IChudW1iZXIpIFRoZSBtaW5pbXVtIG51bWJlciBvZiBtYXJrZXJzIHRvIGJlIGluIGFcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgY2x1c3RlciBiZWZvcmUgdGhlIG1hcmtlcnMgYXJlIGhpZGRlbiBhbmQgYSBjb3VudFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBpcyBzaG93bi5cbiAqICAgICAnc3R5bGVzJzogKG9iamVjdCkgQW4gb2JqZWN0IHRoYXQgaGFzIHN0eWxlIHByb3BlcnRpZXM6XG4gKiAgICAgICAndXJsJzogKHN0cmluZykgVGhlIGltYWdlIHVybC5cbiAqICAgICAgICdoZWlnaHQnOiAobnVtYmVyKSBUaGUgaW1hZ2UgaGVpZ2h0LlxuICogICAgICAgJ3dpZHRoJzogKG51bWJlcikgVGhlIGltYWdlIHdpZHRoLlxuICogICAgICAgJ2FuY2hvcic6IChBcnJheSkgVGhlIGFuY2hvciBwb3NpdGlvbiBvZiB0aGUgbGFiZWwgdGV4dC5cbiAqICAgICAgICd0ZXh0Q29sb3InOiAoc3RyaW5nKSBUaGUgdGV4dCBjb2xvci5cbiAqICAgICAgICd0ZXh0U2l6ZSc6IChudW1iZXIpIFRoZSB0ZXh0IHNpemUuXG4gKiAgICAgICAnYmFja2dyb3VuZFBvc2l0aW9uJzogKHN0cmluZykgVGhlIHBvc2l0aW9uIG9mIHRoZSBiYWNrZ291bmQgeCwgeS5cbiAqICAgICAgICdpY29uQW5jaG9yJzogKEFycmF5KSBUaGUgYW5jaG9yIHBvc2l0aW9uIG9mIHRoZSBpY29uIHgsIHkuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3XG4gKi9cbmZ1bmN0aW9uIE1hcmtlckNsdXN0ZXJlcihtYXAsIG9wdF9tYXJrZXJzLCBvcHRfb3B0aW9ucykge1xuICAvLyBNYXJrZXJDbHVzdGVyZXIgaW1wbGVtZW50cyBnb29nbGUubWFwcy5PdmVybGF5VmlldyBpbnRlcmZhY2UuIFdlIHVzZSB0aGVcbiAgLy8gZXh0ZW5kIGZ1bmN0aW9uIHRvIGV4dGVuZCBNYXJrZXJDbHVzdGVyZXIgd2l0aCBnb29nbGUubWFwcy5PdmVybGF5Vmlld1xuICAvLyBiZWNhdXNlIGl0IG1pZ2h0IG5vdCBhbHdheXMgYmUgYXZhaWxhYmxlIHdoZW4gdGhlIGNvZGUgaXMgZGVmaW5lZCBzbyB3ZVxuICAvLyBsb29rIGZvciBpdCBhdCB0aGUgbGFzdCBwb3NzaWJsZSBtb21lbnQuIElmIGl0IGRvZXNuJ3QgZXhpc3Qgbm93IHRoZW5cbiAgLy8gdGhlcmUgaXMgbm8gcG9pbnQgZ29pbmcgYWhlYWQgOilcbiAgdGhpcy5leHRlbmQoTWFya2VyQ2x1c3RlcmVyLCBnb29nbGUubWFwcy5PdmVybGF5Vmlldyk7XG4gIHRoaXMubWFwXyA9IG1hcDtcblxuICAvKipcbiAgICogQHR5cGUge0FycmF5Ljxnb29nbGUubWFwcy5NYXJrZXI+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5tYXJrZXJzXyA9IFtdO1xuXG4gIC8qKlxuICAgKiAgQHR5cGUge0FycmF5LjxDbHVzdGVyPn1cbiAgICovXG4gIHRoaXMuY2x1c3RlcnNfID0gW107XG5cbiAgdGhpcy5zaXplcyA9IFs1MywgNTYsIDY2LCA3OCwgOTBdO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5zdHlsZXNfID0gW107XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5yZWFkeV8gPSBmYWxzZTtcblxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5ncmlkU2l6ZV8gPSBvcHRpb25zWydncmlkU2l6ZSddIHx8IDYwO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5taW5DbHVzdGVyU2l6ZV8gPSBvcHRpb25zWydtaW5pbXVtQ2x1c3RlclNpemUnXSB8fCAyO1xuXG5cbiAgLyoqXG4gICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5tYXhab29tXyA9IG9wdGlvbnNbJ21heFpvb20nXSB8fCBudWxsO1xuXG4gIHRoaXMuc3R5bGVzXyA9IG9wdGlvbnNbJ3N0eWxlcyddIHx8IFtdO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5pbWFnZVBhdGhfID0gb3B0aW9uc1snaW1hZ2VQYXRoJ10gfHxcbiAgICAgIHRoaXMuTUFSS0VSX0NMVVNURVJfSU1BR0VfUEFUSF87XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLmltYWdlRXh0ZW5zaW9uXyA9IG9wdGlvbnNbJ2ltYWdlRXh0ZW5zaW9uJ10gfHxcbiAgICAgIHRoaXMuTUFSS0VSX0NMVVNURVJfSU1BR0VfRVhURU5TSU9OXztcblxuICAvKipcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnpvb21PbkNsaWNrXyA9IHRydWU7XG5cbiAgaWYgKG9wdGlvbnNbJ3pvb21PbkNsaWNrJ10gIT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy56b29tT25DbGlja18gPSBvcHRpb25zWyd6b29tT25DbGljayddO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5hdmVyYWdlQ2VudGVyXyA9IGZhbHNlO1xuXG4gIGlmIChvcHRpb25zWydhdmVyYWdlQ2VudGVyJ10gIT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5hdmVyYWdlQ2VudGVyXyA9IG9wdGlvbnNbJ2F2ZXJhZ2VDZW50ZXInXTtcbiAgfVxuXG4gIHRoaXMuc2V0dXBTdHlsZXNfKCk7XG5cbiAgdGhpcy5zZXRNYXAobWFwKTtcblxuICAvKipcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMucHJldlpvb21fID0gdGhpcy5tYXBfLmdldFpvb20oKTtcblxuICAvLyBBZGQgdGhlIG1hcCBldmVudCBsaXN0ZW5lcnNcbiAgdmFyIHRoYXQgPSB0aGlzO1xuICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcF8sICd6b29tX2NoYW5nZWQnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgem9vbSA9IHRoYXQubWFwXy5nZXRab29tKCk7XG5cbiAgICBpZiAodGhhdC5wcmV2Wm9vbV8gIT0gem9vbSkge1xuICAgICAgdGhhdC5wcmV2Wm9vbV8gPSB6b29tO1xuICAgICAgdGhhdC5yZXNldFZpZXdwb3J0KCk7XG4gICAgfVxuICB9KTtcblxuICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcF8sICdpZGxlJywgZnVuY3Rpb24oKSB7XG4gICAgdGhhdC5yZWRyYXcoKTtcbiAgfSk7XG5cbiAgLy8gRmluYWxseSwgYWRkIHRoZSBtYXJrZXJzXG4gIGlmIChvcHRfbWFya2VycyAmJiBvcHRfbWFya2Vycy5sZW5ndGgpIHtcbiAgICB0aGlzLmFkZE1hcmtlcnMob3B0X21hcmtlcnMsIGZhbHNlKTtcbiAgfVxufVxuXG5cbi8qKlxuICogVGhlIG1hcmtlciBjbHVzdGVyIGltYWdlIHBhdGguXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuTUFSS0VSX0NMVVNURVJfSU1BR0VfUEFUSF8gPVxuICAgICdodHRwOi8vZ29vZ2xlLW1hcHMtdXRpbGl0eS1saWJyYXJ5LXYzLmdvb2dsZWNvZGUuY29tL3N2bi90cnVuay9tYXJrZXJjbHVzdGVyZXIvJyArXG4gICAgJ2ltYWdlcy9tJztcblxuXG4vKipcbiAqIFRoZSBtYXJrZXIgY2x1c3RlciBpbWFnZSBwYXRoLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLk1BUktFUl9DTFVTVEVSX0lNQUdFX0VYVEVOU0lPTl8gPSAncG5nJztcblxuXG4vKipcbiAqIEV4dGVuZHMgYSBvYmplY3RzIHByb3RvdHlwZSBieSBhbm90aGVycy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkLlxuICogQHBhcmFtIHtPYmplY3R9IG9iajIgVGhlIG9iamVjdCB0byBleHRlbmQgd2l0aC5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIG5ldyBleHRlbmRlZCBvYmplY3QuXG4gKiBAaWdub3JlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24ob2JqMSwgb2JqMikge1xuICByZXR1cm4gKGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iamVjdC5wcm90b3R5cGUpIHtcbiAgICAgIHRoaXMucHJvdG90eXBlW3Byb3BlcnR5XSA9IG9iamVjdC5wcm90b3R5cGVbcHJvcGVydHldO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSkuYXBwbHkob2JqMSwgW29iajJdKTtcbn07XG5cblxuLyoqXG4gKiBJbXBsZW1lbnRhaW9uIG9mIHRoZSBpbnRlcmZhY2UgbWV0aG9kLlxuICogQGlnbm9yZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLm9uQWRkID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuc2V0UmVhZHlfKHRydWUpO1xufTtcblxuLyoqXG4gKiBJbXBsZW1lbnRhaW9uIG9mIHRoZSBpbnRlcmZhY2UgbWV0aG9kLlxuICogQGlnbm9yZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbigpIHt9O1xuXG4vKipcbiAqIFNldHMgdXAgdGhlIHN0eWxlcyBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXR1cFN0eWxlc18gPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuc3R5bGVzXy5sZW5ndGgpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKHZhciBpID0gMCwgc2l6ZTsgc2l6ZSA9IHRoaXMuc2l6ZXNbaV07IGkrKykge1xuICAgIHRoaXMuc3R5bGVzXy5wdXNoKHtcbiAgICAgIHVybDogdGhpcy5pbWFnZVBhdGhfICsgKGkgKyAxKSArICcuJyArIHRoaXMuaW1hZ2VFeHRlbnNpb25fLFxuICAgICAgaGVpZ2h0OiBzaXplLFxuICAgICAgd2lkdGg6IHNpemVcbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiAgRml0IHRoZSBtYXAgdG8gdGhlIGJvdW5kcyBvZiB0aGUgbWFya2VycyBpbiB0aGUgY2x1c3RlcmVyLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmZpdE1hcFRvTWFya2VycyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgbWFya2VycyA9IHRoaXMuZ2V0TWFya2VycygpO1xuICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2ldOyBpKyspIHtcbiAgICBib3VuZHMuZXh0ZW5kKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbiAgfVxuXG4gIHRoaXMubWFwXy5maXRCb3VuZHMoYm91bmRzKTtcbn07XG5cblxuLyoqXG4gKiAgU2V0cyB0aGUgc3R5bGVzLlxuICpcbiAqICBAcGFyYW0ge09iamVjdH0gc3R5bGVzIFRoZSBzdHlsZSB0byBzZXQuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0U3R5bGVzID0gZnVuY3Rpb24oc3R5bGVzKSB7XG4gIHRoaXMuc3R5bGVzXyA9IHN0eWxlcztcbn07XG5cblxuLyoqXG4gKiAgR2V0cyB0aGUgc3R5bGVzLlxuICpcbiAqICBAcmV0dXJuIHtPYmplY3R9IFRoZSBzdHlsZXMgb2JqZWN0LlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldFN0eWxlcyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5zdHlsZXNfO1xufTtcblxuXG4vKipcbiAqIFdoZXRoZXIgem9vbSBvbiBjbGljayBpcyBzZXQuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB6b29tT25DbGlja18gaXMgc2V0LlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmlzWm9vbU9uQ2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuem9vbU9uQ2xpY2tfO1xufTtcblxuLyoqXG4gKiBXaGV0aGVyIGF2ZXJhZ2UgY2VudGVyIGlzIHNldC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGF2ZXJhZ2VDZW50ZXJfIGlzIHNldC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5pc0F2ZXJhZ2VDZW50ZXIgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuYXZlcmFnZUNlbnRlcl87XG59O1xuXG5cbi8qKlxuICogIFJldHVybnMgdGhlIGFycmF5IG9mIG1hcmtlcnMgaW4gdGhlIGNsdXN0ZXJlci5cbiAqXG4gKiAgQHJldHVybiB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj59IFRoZSBtYXJrZXJzLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldE1hcmtlcnMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMubWFya2Vyc187XG59O1xuXG5cbi8qKlxuICogIFJldHVybnMgdGhlIG51bWJlciBvZiBtYXJrZXJzIGluIHRoZSBjbHVzdGVyZXJcbiAqXG4gKiAgQHJldHVybiB7TnVtYmVyfSBUaGUgbnVtYmVyIG9mIG1hcmtlcnMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0VG90YWxNYXJrZXJzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLm1hcmtlcnNfLmxlbmd0aDtcbn07XG5cblxuLyoqXG4gKiAgU2V0cyB0aGUgbWF4IHpvb20gZm9yIHRoZSBjbHVzdGVyZXIuXG4gKlxuICogIEBwYXJhbSB7bnVtYmVyfSBtYXhab29tIFRoZSBtYXggem9vbSBsZXZlbC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRNYXhab29tID0gZnVuY3Rpb24obWF4Wm9vbSkge1xuICB0aGlzLm1heFpvb21fID0gbWF4Wm9vbTtcbn07XG5cblxuLyoqXG4gKiAgR2V0cyB0aGUgbWF4IHpvb20gZm9yIHRoZSBjbHVzdGVyZXIuXG4gKlxuICogIEByZXR1cm4ge251bWJlcn0gVGhlIG1heCB6b29tIGxldmVsLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMubWF4Wm9vbV87XG59O1xuXG5cbi8qKlxuICogIFRoZSBmdW5jdGlvbiBmb3IgY2FsY3VsYXRpbmcgdGhlIGNsdXN0ZXIgaWNvbiBpbWFnZS5cbiAqXG4gKiAgQHBhcmFtIHtBcnJheS48Z29vZ2xlLm1hcHMuTWFya2VyPn0gbWFya2VycyBUaGUgbWFya2VycyBpbiB0aGUgY2x1c3RlcmVyLlxuICogIEBwYXJhbSB7bnVtYmVyfSBudW1TdHlsZXMgVGhlIG51bWJlciBvZiBzdHlsZXMgYXZhaWxhYmxlLlxuICogIEByZXR1cm4ge09iamVjdH0gQSBvYmplY3QgcHJvcGVydGllczogJ3RleHQnIChzdHJpbmcpIGFuZCAnaW5kZXgnIChudW1iZXIpLlxuICogIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuY2FsY3VsYXRvcl8gPSBmdW5jdGlvbihtYXJrZXJzLCBudW1TdHlsZXMpIHtcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIGNvdW50ID0gbWFya2Vycy5sZW5ndGg7XG4gIHZhciBkdiA9IGNvdW50O1xuICB3aGlsZSAoZHYgIT09IDApIHtcbiAgICBkdiA9IHBhcnNlSW50KGR2IC8gMTAsIDEwKTtcbiAgICBpbmRleCsrO1xuICB9XG5cbiAgaW5kZXggPSBNYXRoLm1pbihpbmRleCwgbnVtU3R5bGVzKTtcbiAgcmV0dXJuIHtcbiAgICB0ZXh0OiBjb3VudCxcbiAgICBpbmRleDogaW5kZXhcbiAgfTtcbn07XG5cblxuLyoqXG4gKiBTZXQgdGhlIGNhbGN1bGF0b3IgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbihBcnJheSwgbnVtYmVyKX0gY2FsY3VsYXRvciBUaGUgZnVuY3Rpb24gdG8gc2V0IGFzIHRoZVxuICogICAgIGNhbGN1bGF0b3IuIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgb2JqZWN0IHByb3BlcnRpZXM6XG4gKiAgICAgJ3RleHQnIChzdHJpbmcpIGFuZCAnaW5kZXgnIChudW1iZXIpLlxuICpcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRDYWxjdWxhdG9yID0gZnVuY3Rpb24oY2FsY3VsYXRvcikge1xuICB0aGlzLmNhbGN1bGF0b3JfID0gY2FsY3VsYXRvcjtcbn07XG5cblxuLyoqXG4gKiBHZXQgdGhlIGNhbGN1bGF0b3IgZnVuY3Rpb24uXG4gKlxuICogQHJldHVybiB7ZnVuY3Rpb24oQXJyYXksIG51bWJlcil9IHRoZSBjYWxjdWxhdG9yIGZ1bmN0aW9uLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldENhbGN1bGF0b3IgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuY2FsY3VsYXRvcl87XG59O1xuXG5cbi8qKlxuICogQWRkIGFuIGFycmF5IG9mIG1hcmtlcnMgdG8gdGhlIGNsdXN0ZXJlci5cbiAqXG4gKiBAcGFyYW0ge0FycmF5Ljxnb29nbGUubWFwcy5NYXJrZXI+fSBtYXJrZXJzIFRoZSBtYXJrZXJzIHRvIGFkZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ub2RyYXcgV2hldGhlciB0byByZWRyYXcgdGhlIGNsdXN0ZXJzLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmFkZE1hcmtlcnMgPSBmdW5jdGlvbihtYXJrZXJzLCBvcHRfbm9kcmF3KSB7XG4gIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNbaV07IGkrKykge1xuICAgIHRoaXMucHVzaE1hcmtlclRvXyhtYXJrZXIpO1xuICB9XG4gIGlmICghb3B0X25vZHJhdykge1xuICAgIHRoaXMucmVkcmF3KCk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBQdXNoZXMgYSBtYXJrZXIgdG8gdGhlIGNsdXN0ZXJlci5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gYWRkLlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5wdXNoTWFya2VyVG9fID0gZnVuY3Rpb24obWFya2VyKSB7XG4gIG1hcmtlci5pc0FkZGVkID0gZmFsc2U7XG4gIGlmIChtYXJrZXJbJ2RyYWdnYWJsZSddKSB7XG4gICAgLy8gSWYgdGhlIG1hcmtlciBpcyBkcmFnZ2FibGUgYWRkIGEgbGlzdGVuZXIgc28gd2UgdXBkYXRlIHRoZSBjbHVzdGVycyBvblxuICAgIC8vIHRoZSBkcmFnIGVuZC5cbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnZHJhZ2VuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgbWFya2VyLmlzQWRkZWQgPSBmYWxzZTtcbiAgICAgIHRoYXQucmVwYWludCgpO1xuICAgIH0pO1xuICB9XG4gIHRoaXMubWFya2Vyc18ucHVzaChtYXJrZXIpO1xufTtcblxuXG4vKipcbiAqIEFkZHMgYSBtYXJrZXIgdG8gdGhlIGNsdXN0ZXJlciBhbmQgcmVkcmF3cyBpZiBuZWVkZWQuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGFkZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ub2RyYXcgV2hldGhlciB0byByZWRyYXcgdGhlIGNsdXN0ZXJzLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmFkZE1hcmtlciA9IGZ1bmN0aW9uKG1hcmtlciwgb3B0X25vZHJhdykge1xuICB0aGlzLnB1c2hNYXJrZXJUb18obWFya2VyKTtcbiAgaWYgKCFvcHRfbm9kcmF3KSB7XG4gICAgdGhpcy5yZWRyYXcoKTtcbiAgfVxufTtcblxuXG4vKipcbiAqIFJlbW92ZXMgYSBtYXJrZXIgYW5kIHJldHVybnMgdHJ1ZSBpZiByZW1vdmVkLCBmYWxzZSBpZiBub3RcbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gcmVtb3ZlXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBtYXJrZXIgd2FzIHJlbW92ZWQgb3Igbm90XG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlbW92ZU1hcmtlcl8gPSBmdW5jdGlvbihtYXJrZXIpIHtcbiAgdmFyIGluZGV4ID0gLTE7XG4gIGlmICh0aGlzLm1hcmtlcnNfLmluZGV4T2YpIHtcbiAgICBpbmRleCA9IHRoaXMubWFya2Vyc18uaW5kZXhPZihtYXJrZXIpO1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgPSAwLCBtOyBtID0gdGhpcy5tYXJrZXJzX1tpXTsgaSsrKSB7XG4gICAgICBpZiAobSA9PSBtYXJrZXIpIHtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoaW5kZXggPT0gLTEpIHtcbiAgICAvLyBNYXJrZXIgaXMgbm90IGluIG91ciBsaXN0IG9mIG1hcmtlcnMuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgbWFya2VyLnNldE1hcChudWxsKTtcblxuICB0aGlzLm1hcmtlcnNfLnNwbGljZShpbmRleCwgMSk7XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlIGEgbWFya2VyIGZyb20gdGhlIGNsdXN0ZXIuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIHJlbW92ZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ub2RyYXcgT3B0aW9uYWwgYm9vbGVhbiB0byBmb3JjZSBubyByZWRyYXcuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBtYXJrZXIgd2FzIHJlbW92ZWQuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVtb3ZlTWFya2VyID0gZnVuY3Rpb24obWFya2VyLCBvcHRfbm9kcmF3KSB7XG4gIHZhciByZW1vdmVkID0gdGhpcy5yZW1vdmVNYXJrZXJfKG1hcmtlcik7XG5cbiAgaWYgKCFvcHRfbm9kcmF3ICYmIHJlbW92ZWQpIHtcbiAgICB0aGlzLnJlc2V0Vmlld3BvcnQoKTtcbiAgICB0aGlzLnJlZHJhdygpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2Uge1xuICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlcyBhbiBhcnJheSBvZiBtYXJrZXJzIGZyb20gdGhlIGNsdXN0ZXIuXG4gKlxuICogQHBhcmFtIHtBcnJheS48Z29vZ2xlLm1hcHMuTWFya2VyPn0gbWFya2VycyBUaGUgbWFya2VycyB0byByZW1vdmUuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfbm9kcmF3IE9wdGlvbmFsIGJvb2xlYW4gdG8gZm9yY2Ugbm8gcmVkcmF3LlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlbW92ZU1hcmtlcnMgPSBmdW5jdGlvbihtYXJrZXJzLCBvcHRfbm9kcmF3KSB7XG4gIHZhciByZW1vdmVkID0gZmFsc2U7XG5cbiAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gbWFya2Vyc1tpXTsgaSsrKSB7XG4gICAgdmFyIHIgPSB0aGlzLnJlbW92ZU1hcmtlcl8obWFya2VyKTtcbiAgICByZW1vdmVkID0gcmVtb3ZlZCB8fCByO1xuICB9XG5cbiAgaWYgKCFvcHRfbm9kcmF3ICYmIHJlbW92ZWQpIHtcbiAgICB0aGlzLnJlc2V0Vmlld3BvcnQoKTtcbiAgICB0aGlzLnJlZHJhdygpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG5cbi8qKlxuICogU2V0cyB0aGUgY2x1c3RlcmVyJ3MgcmVhZHkgc3RhdGUuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSByZWFkeSBUaGUgc3RhdGUuXG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldFJlYWR5XyA9IGZ1bmN0aW9uKHJlYWR5KSB7XG4gIGlmICghdGhpcy5yZWFkeV8pIHtcbiAgICB0aGlzLnJlYWR5XyA9IHJlYWR5O1xuICAgIHRoaXMuY3JlYXRlQ2x1c3RlcnNfKCk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgY2x1c3RlcnMgaW4gdGhlIGNsdXN0ZXJlci5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgY2x1c3RlcnMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0VG90YWxDbHVzdGVycyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5jbHVzdGVyc18ubGVuZ3RoO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIGdvb2dsZSBtYXAgdGhhdCB0aGUgY2x1c3RlcmVyIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqXG4gKiBAcmV0dXJuIHtnb29nbGUubWFwcy5NYXB9IFRoZSBtYXAuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLm1hcF87XG59O1xuXG5cbi8qKlxuICogU2V0cyB0aGUgZ29vZ2xlIG1hcCB0aGF0IHRoZSBjbHVzdGVyZXIgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFwfSBtYXAgVGhlIG1hcC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbihtYXApIHtcbiAgdGhpcy5tYXBfID0gbWFwO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNpemUgb2YgdGhlIGdyaWQuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZ3JpZCBzaXplLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldEdyaWRTaXplID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmdyaWRTaXplXztcbn07XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBzaXplIG9mIHRoZSBncmlkLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIFRoZSBncmlkIHNpemUuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0R3JpZFNpemUgPSBmdW5jdGlvbihzaXplKSB7XG4gIHRoaXMuZ3JpZFNpemVfID0gc2l6ZTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtaW4gY2x1c3RlciBzaXplLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGdyaWQgc2l6ZS5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRNaW5DbHVzdGVyU2l6ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5taW5DbHVzdGVyU2l6ZV87XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIG1pbiBjbHVzdGVyIHNpemUuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHNpemUgVGhlIGdyaWQgc2l6ZS5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRNaW5DbHVzdGVyU2l6ZSA9IGZ1bmN0aW9uKHNpemUpIHtcbiAgdGhpcy5taW5DbHVzdGVyU2l6ZV8gPSBzaXplO1xufTtcblxuXG4vKipcbiAqIEV4dGVuZHMgYSBib3VuZHMgb2JqZWN0IGJ5IHRoZSBncmlkIHNpemUuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5MYXRMbmdCb3VuZHN9IGJvdW5kcyBUaGUgYm91bmRzIHRvIGV4dGVuZC5cbiAqIEByZXR1cm4ge2dvb2dsZS5tYXBzLkxhdExuZ0JvdW5kc30gVGhlIGV4dGVuZGVkIGJvdW5kcy5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRFeHRlbmRlZEJvdW5kcyA9IGZ1bmN0aW9uKGJvdW5kcykge1xuICB2YXIgcHJvamVjdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuXG4gIC8vIFR1cm4gdGhlIGJvdW5kcyBpbnRvIGxhdGxuZy5cbiAgdmFyIHRyID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhib3VuZHMuZ2V0Tm9ydGhFYXN0KCkubGF0KCksXG4gICAgICBib3VuZHMuZ2V0Tm9ydGhFYXN0KCkubG5nKCkpO1xuICB2YXIgYmwgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGJvdW5kcy5nZXRTb3V0aFdlc3QoKS5sYXQoKSxcbiAgICAgIGJvdW5kcy5nZXRTb3V0aFdlc3QoKS5sbmcoKSk7XG5cbiAgLy8gQ29udmVydCB0aGUgcG9pbnRzIHRvIHBpeGVscyBhbmQgdGhlIGV4dGVuZCBvdXQgYnkgdGhlIGdyaWQgc2l6ZS5cbiAgdmFyIHRyUGl4ID0gcHJvamVjdGlvbi5mcm9tTGF0TG5nVG9EaXZQaXhlbCh0cik7XG4gIHRyUGl4LnggKz0gdGhpcy5ncmlkU2l6ZV87XG4gIHRyUGl4LnkgLT0gdGhpcy5ncmlkU2l6ZV87XG5cbiAgdmFyIGJsUGl4ID0gcHJvamVjdGlvbi5mcm9tTGF0TG5nVG9EaXZQaXhlbChibCk7XG4gIGJsUGl4LnggLT0gdGhpcy5ncmlkU2l6ZV87XG4gIGJsUGl4LnkgKz0gdGhpcy5ncmlkU2l6ZV87XG5cbiAgLy8gQ29udmVydCB0aGUgcGl4ZWwgcG9pbnRzIGJhY2sgdG8gTGF0TG5nXG4gIHZhciBuZSA9IHByb2plY3Rpb24uZnJvbURpdlBpeGVsVG9MYXRMbmcodHJQaXgpO1xuICB2YXIgc3cgPSBwcm9qZWN0aW9uLmZyb21EaXZQaXhlbFRvTGF0TG5nKGJsUGl4KTtcblxuICAvLyBFeHRlbmQgdGhlIGJvdW5kcyB0byBjb250YWluIHRoZSBuZXcgYm91bmRzLlxuICBib3VuZHMuZXh0ZW5kKG5lKTtcbiAgYm91bmRzLmV4dGVuZChzdyk7XG5cbiAgcmV0dXJuIGJvdW5kcztcbn07XG5cblxuLyoqXG4gKiBEZXRlcm1pbnMgaWYgYSBtYXJrZXIgaXMgY29udGFpbmVkIGluIGEgYm91bmRzLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFya2VyfSBtYXJrZXIgVGhlIG1hcmtlciB0byBjaGVjay5cbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzfSBib3VuZHMgVGhlIGJvdW5kcyB0byBjaGVjayBhZ2FpbnN0LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWFya2VyIGlzIGluIHRoZSBib3VuZHMuXG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmlzTWFya2VySW5Cb3VuZHNfID0gZnVuY3Rpb24obWFya2VyLCBib3VuZHMpIHtcbiAgcmV0dXJuIGJvdW5kcy5jb250YWlucyhtYXJrZXIuZ2V0UG9zaXRpb24oKSk7XG59O1xuXG5cbi8qKlxuICogQ2xlYXJzIGFsbCBjbHVzdGVycyBhbmQgbWFya2VycyBmcm9tIHRoZSBjbHVzdGVyZXIuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuY2xlYXJNYXJrZXJzID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMucmVzZXRWaWV3cG9ydCh0cnVlKTtcblxuICAvLyBTZXQgdGhlIG1hcmtlcnMgYSBlbXB0eSBhcnJheS5cbiAgdGhpcy5tYXJrZXJzXyA9IFtdO1xufTtcblxuXG4vKipcbiAqIENsZWFycyBhbGwgZXhpc3RpbmcgY2x1c3RlcnMgYW5kIHJlY3JlYXRlcyB0aGVtLlxuICogQHBhcmFtIHtib29sZWFufSBvcHRfaGlkZSBUbyBhbHNvIGhpZGUgdGhlIG1hcmtlci5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZXNldFZpZXdwb3J0ID0gZnVuY3Rpb24ob3B0X2hpZGUpIHtcbiAgLy8gUmVtb3ZlIGFsbCB0aGUgY2x1c3RlcnNcbiAgZm9yICh2YXIgaSA9IDAsIGNsdXN0ZXI7IGNsdXN0ZXIgPSB0aGlzLmNsdXN0ZXJzX1tpXTsgaSsrKSB7XG4gICAgY2x1c3Rlci5yZW1vdmUoKTtcbiAgfVxuXG4gIC8vIFJlc2V0IHRoZSBtYXJrZXJzIHRvIG5vdCBiZSBhZGRlZCBhbmQgdG8gYmUgaW52aXNpYmxlLlxuICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSB0aGlzLm1hcmtlcnNfW2ldOyBpKyspIHtcbiAgICBtYXJrZXIuaXNBZGRlZCA9IGZhbHNlO1xuICAgIGlmIChvcHRfaGlkZSkge1xuICAgICAgbWFya2VyLnNldE1hcChudWxsKTtcbiAgICB9XG4gIH1cblxuICB0aGlzLmNsdXN0ZXJzXyA9IFtdO1xufTtcblxuLyoqXG4gKlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlcGFpbnQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIG9sZENsdXN0ZXJzID0gdGhpcy5jbHVzdGVyc18uc2xpY2UoKTtcbiAgdGhpcy5jbHVzdGVyc18ubGVuZ3RoID0gMDtcbiAgdGhpcy5yZXNldFZpZXdwb3J0KCk7XG4gIHRoaXMucmVkcmF3KCk7XG5cbiAgLy8gUmVtb3ZlIHRoZSBvbGQgY2x1c3RlcnMuXG4gIC8vIERvIGl0IGluIGEgdGltZW91dCBzbyB0aGUgb3RoZXIgY2x1c3RlcnMgaGF2ZSBiZWVuIGRyYXduIGZpcnN0LlxuICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgY2x1c3RlcjsgY2x1c3RlciA9IG9sZENsdXN0ZXJzW2ldOyBpKyspIHtcbiAgICAgIGNsdXN0ZXIucmVtb3ZlKCk7XG4gICAgfVxuICB9LCAwKTtcbn07XG5cblxuLyoqXG4gKiBSZWRyYXdzIHRoZSBjbHVzdGVycy5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZWRyYXcgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jcmVhdGVDbHVzdGVyc18oKTtcbn07XG5cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byBsYXRsbmcgbG9jYXRpb25zIGluIGttLlxuICogQHNlZSBodHRwOi8vd3d3Lm1vdmFibGUtdHlwZS5jby51ay9zY3JpcHRzL2xhdGxvbmcuaHRtbFxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTGF0TG5nfSBwMSBUaGUgZmlyc3QgbGF0IGxuZyBwb2ludC5cbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTGF0TG5nfSBwMiBUaGUgc2Vjb25kIGxhdCBsbmcgcG9pbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSB0d28gcG9pbnRzIGluIGttLlxuICogQHByaXZhdGVcbiovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmRpc3RhbmNlQmV0d2VlblBvaW50c18gPSBmdW5jdGlvbihwMSwgcDIpIHtcbiAgaWYgKCFwMSB8fCAhcDIpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHZhciBSID0gNjM3MTsgLy8gUmFkaXVzIG9mIHRoZSBFYXJ0aCBpbiBrbVxuICB2YXIgZExhdCA9IChwMi5sYXQoKSAtIHAxLmxhdCgpKSAqIE1hdGguUEkgLyAxODA7XG4gIHZhciBkTG9uID0gKHAyLmxuZygpIC0gcDEubG5nKCkpICogTWF0aC5QSSAvIDE4MDtcbiAgdmFyIGEgPSBNYXRoLnNpbihkTGF0IC8gMikgKiBNYXRoLnNpbihkTGF0IC8gMikgK1xuICAgIE1hdGguY29zKHAxLmxhdCgpICogTWF0aC5QSSAvIDE4MCkgKiBNYXRoLmNvcyhwMi5sYXQoKSAqIE1hdGguUEkgLyAxODApICpcbiAgICBNYXRoLnNpbihkTG9uIC8gMikgKiBNYXRoLnNpbihkTG9uIC8gMik7XG4gIHZhciBjID0gMiAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMSAtIGEpKTtcbiAgdmFyIGQgPSBSICogYztcbiAgcmV0dXJuIGQ7XG59O1xuXG5cbi8qKlxuICogQWRkIGEgbWFya2VyIHRvIGEgY2x1c3Rlciwgb3IgY3JlYXRlcyBhIG5ldyBjbHVzdGVyLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFya2VyfSBtYXJrZXIgVGhlIG1hcmtlciB0byBhZGQuXG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmFkZFRvQ2xvc2VzdENsdXN0ZXJfID0gZnVuY3Rpb24obWFya2VyKSB7XG4gIHZhciBkaXN0YW5jZSA9IDQwMDAwOyAvLyBTb21lIGxhcmdlIG51bWJlclxuICB2YXIgY2x1c3RlclRvQWRkVG8gPSBudWxsO1xuICB2YXIgcG9zID0gbWFya2VyLmdldFBvc2l0aW9uKCk7XG4gIGZvciAodmFyIGkgPSAwLCBjbHVzdGVyOyBjbHVzdGVyID0gdGhpcy5jbHVzdGVyc19baV07IGkrKykge1xuICAgIHZhciBjZW50ZXIgPSBjbHVzdGVyLmdldENlbnRlcigpO1xuICAgIGlmIChjZW50ZXIpIHtcbiAgICAgIHZhciBkID0gdGhpcy5kaXN0YW5jZUJldHdlZW5Qb2ludHNfKGNlbnRlciwgbWFya2VyLmdldFBvc2l0aW9uKCkpO1xuICAgICAgaWYgKGQgPCBkaXN0YW5jZSkge1xuICAgICAgICBkaXN0YW5jZSA9IGQ7XG4gICAgICAgIGNsdXN0ZXJUb0FkZFRvID0gY2x1c3RlcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoY2x1c3RlclRvQWRkVG8gJiYgY2x1c3RlclRvQWRkVG8uaXNNYXJrZXJJbkNsdXN0ZXJCb3VuZHMobWFya2VyKSkge1xuICAgIGNsdXN0ZXJUb0FkZFRvLmFkZE1hcmtlcihtYXJrZXIpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjbHVzdGVyID0gbmV3IENsdXN0ZXIodGhpcyk7XG4gICAgY2x1c3Rlci5hZGRNYXJrZXIobWFya2VyKTtcbiAgICB0aGlzLmNsdXN0ZXJzXy5wdXNoKGNsdXN0ZXIpO1xuICB9XG59O1xuXG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgY2x1c3RlcnMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5jcmVhdGVDbHVzdGVyc18gPSBmdW5jdGlvbigpIHtcbiAgaWYgKCF0aGlzLnJlYWR5Xykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEdldCBvdXIgY3VycmVudCBtYXAgdmlldyBib3VuZHMuXG4gIC8vIENyZWF0ZSBhIG5ldyBib3VuZHMgb2JqZWN0IHNvIHdlIGRvbid0IGFmZmVjdCB0aGUgbWFwLlxuICB2YXIgbWFwQm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyh0aGlzLm1hcF8uZ2V0Qm91bmRzKCkuZ2V0U291dGhXZXN0KCksXG4gICAgICB0aGlzLm1hcF8uZ2V0Qm91bmRzKCkuZ2V0Tm9ydGhFYXN0KCkpO1xuICB2YXIgYm91bmRzID0gdGhpcy5nZXRFeHRlbmRlZEJvdW5kcyhtYXBCb3VuZHMpO1xuXG4gIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IHRoaXMubWFya2Vyc19baV07IGkrKykge1xuICAgIGlmICghbWFya2VyLmlzQWRkZWQgJiYgdGhpcy5pc01hcmtlckluQm91bmRzXyhtYXJrZXIsIGJvdW5kcykpIHtcbiAgICAgIHRoaXMuYWRkVG9DbG9zZXN0Q2x1c3Rlcl8obWFya2VyKTtcbiAgICB9XG4gIH1cbn07XG5cblxuLyoqXG4gKiBBIGNsdXN0ZXIgdGhhdCBjb250YWlucyBtYXJrZXJzLlxuICpcbiAqIEBwYXJhbSB7TWFya2VyQ2x1c3RlcmVyfSBtYXJrZXJDbHVzdGVyZXIgVGhlIG1hcmtlcmNsdXN0ZXJlciB0aGF0IHRoaXNcbiAqICAgICBjbHVzdGVyIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGlnbm9yZVxuICovXG5mdW5jdGlvbiBDbHVzdGVyKG1hcmtlckNsdXN0ZXJlcikge1xuICB0aGlzLm1hcmtlckNsdXN0ZXJlcl8gPSBtYXJrZXJDbHVzdGVyZXI7XG4gIHRoaXMubWFwXyA9IG1hcmtlckNsdXN0ZXJlci5nZXRNYXAoKTtcbiAgdGhpcy5ncmlkU2l6ZV8gPSBtYXJrZXJDbHVzdGVyZXIuZ2V0R3JpZFNpemUoKTtcbiAgdGhpcy5taW5DbHVzdGVyU2l6ZV8gPSBtYXJrZXJDbHVzdGVyZXIuZ2V0TWluQ2x1c3RlclNpemUoKTtcbiAgdGhpcy5hdmVyYWdlQ2VudGVyXyA9IG1hcmtlckNsdXN0ZXJlci5pc0F2ZXJhZ2VDZW50ZXIoKTtcbiAgdGhpcy5jZW50ZXJfID0gbnVsbDtcbiAgdGhpcy5tYXJrZXJzXyA9IFtdO1xuICB0aGlzLmJvdW5kc18gPSBudWxsO1xuICB0aGlzLmNsdXN0ZXJJY29uXyA9IG5ldyBDbHVzdGVySWNvbih0aGlzLCBtYXJrZXJDbHVzdGVyZXIuZ2V0U3R5bGVzKCksXG4gICAgICBtYXJrZXJDbHVzdGVyZXIuZ2V0R3JpZFNpemUoKSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5zIGlmIGEgbWFya2VyIGlzIGFscmVhZHkgYWRkZWQgdG8gdGhlIGNsdXN0ZXIuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWFya2VyIGlzIGFscmVhZHkgYWRkZWQuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmlzTWFya2VyQWxyZWFkeUFkZGVkID0gZnVuY3Rpb24obWFya2VyKSB7XG4gIGlmICh0aGlzLm1hcmtlcnNfLmluZGV4T2YpIHtcbiAgICByZXR1cm4gdGhpcy5tYXJrZXJzXy5pbmRleE9mKG1hcmtlcikgIT0gLTE7XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIG07IG0gPSB0aGlzLm1hcmtlcnNfW2ldOyBpKyspIHtcbiAgICAgIGlmIChtID09IG1hcmtlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuXG4vKipcbiAqIEFkZCBhIG1hcmtlciB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gYWRkLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWFya2VyIHdhcyBhZGRlZC5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuYWRkTWFya2VyID0gZnVuY3Rpb24obWFya2VyKSB7XG4gIGlmICh0aGlzLmlzTWFya2VyQWxyZWFkeUFkZGVkKG1hcmtlcikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIXRoaXMuY2VudGVyXykge1xuICAgIHRoaXMuY2VudGVyXyA9IG1hcmtlci5nZXRQb3NpdGlvbigpO1xuICAgIHRoaXMuY2FsY3VsYXRlQm91bmRzXygpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0aGlzLmF2ZXJhZ2VDZW50ZXJfKSB7XG4gICAgICB2YXIgbCA9IHRoaXMubWFya2Vyc18ubGVuZ3RoICsgMTtcbiAgICAgIHZhciBsYXQgPSAodGhpcy5jZW50ZXJfLmxhdCgpICogKGwtMSkgKyBtYXJrZXIuZ2V0UG9zaXRpb24oKS5sYXQoKSkgLyBsO1xuICAgICAgdmFyIGxuZyA9ICh0aGlzLmNlbnRlcl8ubG5nKCkgKiAobC0xKSArIG1hcmtlci5nZXRQb3NpdGlvbigpLmxuZygpKSAvIGw7XG4gICAgICB0aGlzLmNlbnRlcl8gPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxhdCwgbG5nKTtcbiAgICAgIHRoaXMuY2FsY3VsYXRlQm91bmRzXygpO1xuICAgIH1cbiAgfVxuXG4gIG1hcmtlci5pc0FkZGVkID0gdHJ1ZTtcbiAgdGhpcy5tYXJrZXJzXy5wdXNoKG1hcmtlcik7XG5cbiAgdmFyIGxlbiA9IHRoaXMubWFya2Vyc18ubGVuZ3RoO1xuICBpZiAobGVuIDwgdGhpcy5taW5DbHVzdGVyU2l6ZV8gJiYgbWFya2VyLmdldE1hcCgpICE9IHRoaXMubWFwXykge1xuICAgIC8vIE1pbiBjbHVzdGVyIHNpemUgbm90IHJlYWNoZWQgc28gc2hvdyB0aGUgbWFya2VyLlxuICAgIG1hcmtlci5zZXRNYXAodGhpcy5tYXBfKTtcbiAgfVxuXG4gIGlmIChsZW4gPT0gdGhpcy5taW5DbHVzdGVyU2l6ZV8pIHtcbiAgICAvLyBIaWRlIHRoZSBtYXJrZXJzIHRoYXQgd2VyZSBzaG93aW5nLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRoaXMubWFya2Vyc19baV0uc2V0TWFwKG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChsZW4gPj0gdGhpcy5taW5DbHVzdGVyU2l6ZV8pIHtcbiAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuICB9XG5cbiAgdGhpcy51cGRhdGVJY29uKCk7XG4gIHJldHVybiB0cnVlO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIG1hcmtlciBjbHVzdGVyZXIgdGhhdCB0aGUgY2x1c3RlciBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKlxuICogQHJldHVybiB7TWFya2VyQ2x1c3RlcmVyfSBUaGUgYXNzb2NpYXRlZCBtYXJrZXIgY2x1c3RlcmVyLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5nZXRNYXJrZXJDbHVzdGVyZXIgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMubWFya2VyQ2x1c3RlcmVyXztcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBib3VuZHMgb2YgdGhlIGNsdXN0ZXIuXG4gKlxuICogQHJldHVybiB7Z29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzfSB0aGUgY2x1c3RlciBib3VuZHMuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmdldEJvdW5kcyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyh0aGlzLmNlbnRlcl8sIHRoaXMuY2VudGVyXyk7XG4gIHZhciBtYXJrZXJzID0gdGhpcy5nZXRNYXJrZXJzKCk7XG4gIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNbaV07IGkrKykge1xuICAgIGJvdW5kcy5leHRlbmQobWFya2VyLmdldFBvc2l0aW9uKCkpO1xuICB9XG4gIHJldHVybiBib3VuZHM7XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgY2x1c3RlclxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jbHVzdGVySWNvbl8ucmVtb3ZlKCk7XG4gIHRoaXMubWFya2Vyc18ubGVuZ3RoID0gMDtcbiAgZGVsZXRlIHRoaXMubWFya2Vyc187XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgY2VudGVyIG9mIHRoZSBjbHVzdGVyLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGNsdXN0ZXIgY2VudGVyLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLm1hcmtlcnNfLmxlbmd0aDtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjZW50ZXIgb2YgdGhlIGNsdXN0ZXIuXG4gKlxuICogQHJldHVybiB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj59IFRoZSBjbHVzdGVyIGNlbnRlci5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuZ2V0TWFya2VycyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5tYXJrZXJzXztcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjZW50ZXIgb2YgdGhlIGNsdXN0ZXIuXG4gKlxuICogQHJldHVybiB7Z29vZ2xlLm1hcHMuTGF0TG5nfSBUaGUgY2x1c3RlciBjZW50ZXIuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmdldENlbnRlciA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5jZW50ZXJfO1xufTtcblxuXG4vKipcbiAqIENhbGN1bGF0ZWQgdGhlIGV4dGVuZGVkIGJvdW5kcyBvZiB0aGUgY2x1c3RlciB3aXRoIHRoZSBncmlkLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmNhbGN1bGF0ZUJvdW5kc18gPSBmdW5jdGlvbigpIHtcbiAgdmFyIGJvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHModGhpcy5jZW50ZXJfLCB0aGlzLmNlbnRlcl8pO1xuICB0aGlzLmJvdW5kc18gPSB0aGlzLm1hcmtlckNsdXN0ZXJlcl8uZ2V0RXh0ZW5kZWRCb3VuZHMoYm91bmRzKTtcbn07XG5cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGEgbWFya2VyIGxpZXMgaW4gdGhlIGNsdXN0ZXJzIGJvdW5kcy5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBtYXJrZXIgbGllcyBpbiB0aGUgYm91bmRzLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5pc01hcmtlckluQ2x1c3RlckJvdW5kcyA9IGZ1bmN0aW9uKG1hcmtlcikge1xuICByZXR1cm4gdGhpcy5ib3VuZHNfLmNvbnRhaW5zKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXAgdGhhdCB0aGUgY2x1c3RlciBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKlxuICogQHJldHVybiB7Z29vZ2xlLm1hcHMuTWFwfSBUaGUgbWFwLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5nZXRNYXAgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMubWFwXztcbn07XG5cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBjbHVzdGVyIGljb25cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUudXBkYXRlSWNvbiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgem9vbSA9IHRoaXMubWFwXy5nZXRab29tKCk7XG4gIHZhciBteiA9IHRoaXMubWFya2VyQ2x1c3RlcmVyXy5nZXRNYXhab29tKCk7XG5cbiAgaWYgKG16ICYmIHpvb20gPiBteikge1xuICAgIC8vIFRoZSB6b29tIGlzIGdyZWF0ZXIgdGhhbiBvdXIgbWF4IHpvb20gc28gc2hvdyBhbGwgdGhlIG1hcmtlcnMgaW4gY2x1c3Rlci5cbiAgICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSB0aGlzLm1hcmtlcnNfW2ldOyBpKyspIHtcbiAgICAgIG1hcmtlci5zZXRNYXAodGhpcy5tYXBfKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHRoaXMubWFya2Vyc18ubGVuZ3RoIDwgdGhpcy5taW5DbHVzdGVyU2l6ZV8pIHtcbiAgICAvLyBNaW4gY2x1c3RlciBzaXplIG5vdCB5ZXQgcmVhY2hlZC5cbiAgICB0aGlzLmNsdXN0ZXJJY29uXy5oaWRlKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG51bVN0eWxlcyA9IHRoaXMubWFya2VyQ2x1c3RlcmVyXy5nZXRTdHlsZXMoKS5sZW5ndGg7XG4gIHZhciBzdW1zID0gdGhpcy5tYXJrZXJDbHVzdGVyZXJfLmdldENhbGN1bGF0b3IoKSh0aGlzLm1hcmtlcnNfLCBudW1TdHlsZXMpO1xuICB0aGlzLmNsdXN0ZXJJY29uXy5zZXRDZW50ZXIodGhpcy5jZW50ZXJfKTtcbiAgdGhpcy5jbHVzdGVySWNvbl8uc2V0U3VtcyhzdW1zKTtcbiAgdGhpcy5jbHVzdGVySWNvbl8uc2hvdygpO1xufTtcblxuXG4vKipcbiAqIEEgY2x1c3RlciBpY29uXG4gKlxuICogQHBhcmFtIHtDbHVzdGVyfSBjbHVzdGVyIFRoZSBjbHVzdGVyIHRvIGJlIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzdHlsZXMgQW4gb2JqZWN0IHRoYXQgaGFzIHN0eWxlIHByb3BlcnRpZXM6XG4gKiAgICAgJ3VybCc6IChzdHJpbmcpIFRoZSBpbWFnZSB1cmwuXG4gKiAgICAgJ2hlaWdodCc6IChudW1iZXIpIFRoZSBpbWFnZSBoZWlnaHQuXG4gKiAgICAgJ3dpZHRoJzogKG51bWJlcikgVGhlIGltYWdlIHdpZHRoLlxuICogICAgICdhbmNob3InOiAoQXJyYXkpIFRoZSBhbmNob3IgcG9zaXRpb24gb2YgdGhlIGxhYmVsIHRleHQuXG4gKiAgICAgJ3RleHRDb2xvcic6IChzdHJpbmcpIFRoZSB0ZXh0IGNvbG9yLlxuICogICAgICd0ZXh0U2l6ZSc6IChudW1iZXIpIFRoZSB0ZXh0IHNpemUuXG4gKiAgICAgJ2JhY2tncm91bmRQb3NpdGlvbjogKHN0cmluZykgVGhlIGJhY2tncm91bmQgcG9zdGl0aW9uIHgsIHkuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9wYWRkaW5nIE9wdGlvbmFsIHBhZGRpbmcgdG8gYXBwbHkgdG8gdGhlIGNsdXN0ZXIgaWNvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXdcbiAqIEBpZ25vcmVcbiAqL1xuZnVuY3Rpb24gQ2x1c3Rlckljb24oY2x1c3Rlciwgc3R5bGVzLCBvcHRfcGFkZGluZykge1xuICBjbHVzdGVyLmdldE1hcmtlckNsdXN0ZXJlcigpLmV4dGVuZChDbHVzdGVySWNvbiwgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcpO1xuXG4gIHRoaXMuc3R5bGVzXyA9IHN0eWxlcztcbiAgdGhpcy5wYWRkaW5nXyA9IG9wdF9wYWRkaW5nIHx8IDA7XG4gIHRoaXMuY2x1c3Rlcl8gPSBjbHVzdGVyO1xuICB0aGlzLmNlbnRlcl8gPSBudWxsO1xuICB0aGlzLm1hcF8gPSBjbHVzdGVyLmdldE1hcCgpO1xuICB0aGlzLmRpdl8gPSBudWxsO1xuICB0aGlzLnN1bXNfID0gbnVsbDtcbiAgdGhpcy52aXNpYmxlXyA9IGZhbHNlO1xuXG4gIHRoaXMuc2V0TWFwKHRoaXMubWFwXyk7XG59XG5cblxuLyoqXG4gKiBUcmlnZ2VycyB0aGUgY2x1c3RlcmNsaWNrIGV2ZW50IGFuZCB6b29tJ3MgaWYgdGhlIG9wdGlvbiBpcyBzZXQuXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS50cmlnZ2VyQ2x1c3RlckNsaWNrID0gZnVuY3Rpb24oKSB7XG4gIHZhciBtYXJrZXJDbHVzdGVyZXIgPSB0aGlzLmNsdXN0ZXJfLmdldE1hcmtlckNsdXN0ZXJlcigpO1xuXG4gIC8vIFRyaWdnZXIgdGhlIGNsdXN0ZXJjbGljayBldmVudC5cbiAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihtYXJrZXJDbHVzdGVyZXIsICdjbHVzdGVyY2xpY2snLCB0aGlzLmNsdXN0ZXJfKTtcblxuICBpZiAobWFya2VyQ2x1c3RlcmVyLmlzWm9vbU9uQ2xpY2soKSkge1xuICAgIC8vIFpvb20gaW50byB0aGUgY2x1c3Rlci5cbiAgICB0aGlzLm1hcF8uZml0Qm91bmRzKHRoaXMuY2x1c3Rlcl8uZ2V0Qm91bmRzKCkpO1xuICB9XG59O1xuXG5cbi8qKlxuICogQWRkaW5nIHRoZSBjbHVzdGVyIGljb24gdG8gdGhlIGRvbS5cbiAqIEBpZ25vcmVcbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLm9uQWRkID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZGl2XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICBpZiAodGhpcy52aXNpYmxlXykge1xuICAgIHZhciBwb3MgPSB0aGlzLmdldFBvc0Zyb21MYXRMbmdfKHRoaXMuY2VudGVyXyk7XG4gICAgdGhpcy5kaXZfLnN0eWxlLmNzc1RleHQgPSB0aGlzLmNyZWF0ZUNzcyhwb3MpO1xuICAgIHRoaXMuZGl2Xy5pbm5lckhUTUwgPSB0aGlzLnN1bXNfLnRleHQ7XG4gIH1cblxuICB2YXIgcGFuZXMgPSB0aGlzLmdldFBhbmVzKCk7XG4gIHBhbmVzLm92ZXJsYXlNb3VzZVRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmRpdl8pO1xuXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIodGhpcy5kaXZfLCAnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICB0aGF0LnRyaWdnZXJDbHVzdGVyQ2xpY2soKTtcbiAgfSk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgcG9zaXRpb24gdG8gcGxhY2UgdGhlIGRpdiBkZW5kaW5nIG9uIHRoZSBsYXRsbmcuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5MYXRMbmd9IGxhdGxuZyBUaGUgcG9zaXRpb24gaW4gbGF0bG5nLlxuICogQHJldHVybiB7Z29vZ2xlLm1hcHMuUG9pbnR9IFRoZSBwb3NpdGlvbiBpbiBwaXhlbHMuXG4gKiBAcHJpdmF0ZVxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUuZ2V0UG9zRnJvbUxhdExuZ18gPSBmdW5jdGlvbihsYXRsbmcpIHtcbiAgdmFyIHBvcyA9IHRoaXMuZ2V0UHJvamVjdGlvbigpLmZyb21MYXRMbmdUb0RpdlBpeGVsKGxhdGxuZyk7XG5cbiAgaWYgKHR5cGVvZiB0aGlzLmljb25BbmNob3JfID09PSAnb2JqZWN0JyAmJiB0aGlzLmljb25BbmNob3JfLmxlbmd0aCA9PT0gMikge1xuICAgIHBvcy54IC09IHRoaXMuaWNvbkFuY2hvcl9bMF07XG4gICAgcG9zLnkgLT0gdGhpcy5pY29uQW5jaG9yX1sxXTtcbiAgfSBlbHNlIHtcbiAgICBwb3MueCAtPSBwYXJzZUludCh0aGlzLndpZHRoXyAvIDIsIDEwKTtcbiAgICBwb3MueSAtPSBwYXJzZUludCh0aGlzLmhlaWdodF8gLyAyLCAxMCk7XG4gIH1cbiAgcmV0dXJuIHBvcztcbn07XG5cblxuLyoqXG4gKiBEcmF3IHRoZSBpY29uLlxuICogQGlnbm9yZVxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy52aXNpYmxlXykge1xuICAgIHZhciBwb3MgPSB0aGlzLmdldFBvc0Zyb21MYXRMbmdfKHRoaXMuY2VudGVyXyk7XG4gICAgdGhpcy5kaXZfLnN0eWxlLnRvcCA9IHBvcy55ICsgJ3B4JztcbiAgICB0aGlzLmRpdl8uc3R5bGUubGVmdCA9IHBvcy54ICsgJ3B4JztcbiAgfVxufTtcblxuXG4vKipcbiAqIEhpZGUgdGhlIGljb24uXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmRpdl8pIHtcbiAgICB0aGlzLmRpdl8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfVxuICB0aGlzLnZpc2libGVfID0gZmFsc2U7XG59O1xuXG5cbi8qKlxuICogUG9zaXRpb24gYW5kIHNob3cgdGhlIGljb24uXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmRpdl8pIHtcbiAgICB2YXIgcG9zID0gdGhpcy5nZXRQb3NGcm9tTGF0TG5nXyh0aGlzLmNlbnRlcl8pO1xuICAgIHRoaXMuZGl2Xy5zdHlsZS5jc3NUZXh0ID0gdGhpcy5jcmVhdGVDc3MocG9zKTtcbiAgICB0aGlzLmRpdl8uc3R5bGUuZGlzcGxheSA9ICcnO1xuICB9XG4gIHRoaXMudmlzaWJsZV8gPSB0cnVlO1xufTtcblxuXG4vKipcbiAqIFJlbW92ZSB0aGUgaWNvbiBmcm9tIHRoZSBtYXBcbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnNldE1hcChudWxsKTtcbn07XG5cblxuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgb25SZW1vdmUgaW50ZXJmYWNlLlxuICogQGlnbm9yZVxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUub25SZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuZGl2XyAmJiB0aGlzLmRpdl8ucGFyZW50Tm9kZSkge1xuICAgIHRoaXMuaGlkZSgpO1xuICAgIHRoaXMuZGl2Xy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZGl2Xyk7XG4gICAgdGhpcy5kaXZfID0gbnVsbDtcbiAgfVxufTtcblxuXG4vKipcbiAqIFNldCB0aGUgc3VtcyBvZiB0aGUgaWNvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc3VtcyBUaGUgc3VtcyBjb250YWluaW5nOlxuICogICAndGV4dCc6IChzdHJpbmcpIFRoZSB0ZXh0IHRvIGRpc3BsYXkgaW4gdGhlIGljb24uXG4gKiAgICdpbmRleCc6IChudW1iZXIpIFRoZSBzdHlsZSBpbmRleCBvZiB0aGUgaWNvbi5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLnNldFN1bXMgPSBmdW5jdGlvbihzdW1zKSB7XG4gIHRoaXMuc3Vtc18gPSBzdW1zO1xuICB0aGlzLnRleHRfID0gc3Vtcy50ZXh0O1xuICB0aGlzLmluZGV4XyA9IHN1bXMuaW5kZXg7XG4gIGlmICh0aGlzLmRpdl8pIHtcbiAgICB0aGlzLmRpdl8uaW5uZXJIVE1MID0gc3Vtcy50ZXh0O1xuICB9XG5cbiAgdGhpcy51c2VTdHlsZSgpO1xufTtcblxuXG4vKipcbiAqIFNldHMgdGhlIGljb24gdG8gdGhlIHRoZSBzdHlsZXMuXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS51c2VTdHlsZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaW5kZXggPSBNYXRoLm1heCgwLCB0aGlzLnN1bXNfLmluZGV4IC0gMSk7XG4gIGluZGV4ID0gTWF0aC5taW4odGhpcy5zdHlsZXNfLmxlbmd0aCAtIDEsIGluZGV4KTtcbiAgdmFyIHN0eWxlID0gdGhpcy5zdHlsZXNfW2luZGV4XTtcbiAgdGhpcy51cmxfID0gc3R5bGVbJ3VybCddO1xuICB0aGlzLmhlaWdodF8gPSBzdHlsZVsnaGVpZ2h0J107XG4gIHRoaXMud2lkdGhfID0gc3R5bGVbJ3dpZHRoJ107XG4gIHRoaXMudGV4dENvbG9yXyA9IHN0eWxlWyd0ZXh0Q29sb3InXTtcbiAgdGhpcy5hbmNob3JfID0gc3R5bGVbJ2FuY2hvciddO1xuICB0aGlzLnRleHRTaXplXyA9IHN0eWxlWyd0ZXh0U2l6ZSddO1xuICB0aGlzLmJhY2tncm91bmRQb3NpdGlvbl8gPSBzdHlsZVsnYmFja2dyb3VuZFBvc2l0aW9uJ107XG4gIHRoaXMuaWNvbkFuY2hvcl8gPSBzdHlsZVsnaWNvbkFuY2hvciddO1xufTtcblxuXG4vKipcbiAqIFNldHMgdGhlIGNlbnRlciBvZiB0aGUgaWNvbi5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLkxhdExuZ30gY2VudGVyIFRoZSBsYXRsbmcgdG8gc2V0IGFzIHRoZSBjZW50ZXIuXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5zZXRDZW50ZXIgPSBmdW5jdGlvbihjZW50ZXIpIHtcbiAgdGhpcy5jZW50ZXJfID0gY2VudGVyO1xufTtcblxuXG4vKipcbiAqIENyZWF0ZSB0aGUgY3NzIHRleHQgYmFzZWQgb24gdGhlIHBvc2l0aW9uIG9mIHRoZSBpY29uLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuUG9pbnR9IHBvcyBUaGUgcG9zaXRpb24uXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjc3Mgc3R5bGUgdGV4dC5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLmNyZWF0ZUNzcyA9IGZ1bmN0aW9uKHBvcykge1xuICB2YXIgc3R5bGUgPSBbXTtcbiAgc3R5bGUucHVzaCgnYmFja2dyb3VuZC1pbWFnZTp1cmwoJyArIHRoaXMudXJsXyArICcpOycpO1xuICB2YXIgYmFja2dyb3VuZFBvc2l0aW9uID0gdGhpcy5iYWNrZ3JvdW5kUG9zaXRpb25fID8gdGhpcy5iYWNrZ3JvdW5kUG9zaXRpb25fIDogJzAgMCc7XG4gIHN0eWxlLnB1c2goJ2JhY2tncm91bmQtcG9zaXRpb246JyArIGJhY2tncm91bmRQb3NpdGlvbiArICc7Jyk7XG5cbiAgaWYgKHR5cGVvZiB0aGlzLmFuY2hvcl8gPT09ICdvYmplY3QnKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmFuY2hvcl9bMF0gPT09ICdudW1iZXInICYmIHRoaXMuYW5jaG9yX1swXSA+IDAgJiZcbiAgICAgICAgdGhpcy5hbmNob3JfWzBdIDwgdGhpcy5oZWlnaHRfKSB7XG4gICAgICBzdHlsZS5wdXNoKCdoZWlnaHQ6JyArICh0aGlzLmhlaWdodF8gLSB0aGlzLmFuY2hvcl9bMF0pICtcbiAgICAgICAgICAncHg7IHBhZGRpbmctdG9wOicgKyB0aGlzLmFuY2hvcl9bMF0gKyAncHg7Jyk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5hbmNob3JfWzBdID09PSAnbnVtYmVyJyAmJiB0aGlzLmFuY2hvcl9bMF0gPCAwICYmXG4gICAgICAgIC10aGlzLmFuY2hvcl9bMF0gPCB0aGlzLmhlaWdodF8pIHtcbiAgICAgIHN0eWxlLnB1c2goJ2hlaWdodDonICsgdGhpcy5oZWlnaHRfICsgJ3B4OyBsaW5lLWhlaWdodDonICsgKHRoaXMuaGVpZ2h0XyArIHRoaXMuYW5jaG9yX1swXSkgK1xuICAgICAgICAgICdweDsnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUucHVzaCgnaGVpZ2h0OicgKyB0aGlzLmhlaWdodF8gKyAncHg7IGxpbmUtaGVpZ2h0OicgKyB0aGlzLmhlaWdodF8gK1xuICAgICAgICAgICdweDsnKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0aGlzLmFuY2hvcl9bMV0gPT09ICdudW1iZXInICYmIHRoaXMuYW5jaG9yX1sxXSA+IDAgJiZcbiAgICAgICAgdGhpcy5hbmNob3JfWzFdIDwgdGhpcy53aWR0aF8pIHtcbiAgICAgIHN0eWxlLnB1c2goJ3dpZHRoOicgKyAodGhpcy53aWR0aF8gLSB0aGlzLmFuY2hvcl9bMV0pICtcbiAgICAgICAgICAncHg7IHBhZGRpbmctbGVmdDonICsgdGhpcy5hbmNob3JfWzFdICsgJ3B4OycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5wdXNoKCd3aWR0aDonICsgdGhpcy53aWR0aF8gKyAncHg7IHRleHQtYWxpZ246Y2VudGVyOycpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5wdXNoKCdoZWlnaHQ6JyArIHRoaXMuaGVpZ2h0XyArICdweDsgbGluZS1oZWlnaHQ6JyArXG4gICAgICAgIHRoaXMuaGVpZ2h0XyArICdweDsgd2lkdGg6JyArIHRoaXMud2lkdGhfICsgJ3B4OyB0ZXh0LWFsaWduOmNlbnRlcjsnKTtcbiAgfVxuXG4gIHZhciB0eHRDb2xvciA9IHRoaXMudGV4dENvbG9yXyA/IHRoaXMudGV4dENvbG9yXyA6ICdibGFjayc7XG4gIHZhciB0eHRTaXplID0gdGhpcy50ZXh0U2l6ZV8gPyB0aGlzLnRleHRTaXplXyA6IDExO1xuXG4gIHN0eWxlLnB1c2goJ2N1cnNvcjpwb2ludGVyOyB0b3A6JyArIHBvcy55ICsgJ3B4OyBsZWZ0OicgK1xuICAgICAgcG9zLnggKyAncHg7IGNvbG9yOicgKyB0eHRDb2xvciArICc7IHBvc2l0aW9uOmFic29sdXRlOyBmb250LXNpemU6JyArXG4gICAgICB0eHRTaXplICsgJ3B4OyBmb250LWZhbWlseTpBcmlhbCxzYW5zLXNlcmlmOyBmb250LXdlaWdodDpib2xkJyk7XG4gIHJldHVybiBzdHlsZS5qb2luKCcnKTtcbn07XG5cblxuLy8gRXhwb3J0IFN5bWJvbHMgZm9yIENsb3N1cmVcbi8vIElmIHlvdSBhcmUgbm90IGdvaW5nIHRvIGNvbXBpbGUgd2l0aCBjbG9zdXJlIHRoZW4geW91IGNhbiByZW1vdmUgdGhlXG4vLyBjb2RlIGJlbG93Llxud2luZG93WydNYXJrZXJDbHVzdGVyZXInXSA9IE1hcmtlckNsdXN0ZXJlcjtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2FkZE1hcmtlciddID0gTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5hZGRNYXJrZXI7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydhZGRNYXJrZXJzJ10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmFkZE1hcmtlcnM7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydjbGVhck1hcmtlcnMnXSA9XG4gICAgTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5jbGVhck1hcmtlcnM7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydmaXRNYXBUb01hcmtlcnMnXSA9XG4gICAgTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5maXRNYXBUb01hcmtlcnM7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydnZXRDYWxjdWxhdG9yJ10gPVxuICAgIE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0Q2FsY3VsYXRvcjtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2dldEdyaWRTaXplJ10gPVxuICAgIE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0R3JpZFNpemU7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydnZXRFeHRlbmRlZEJvdW5kcyddID1cbiAgICBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldEV4dGVuZGVkQm91bmRzO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnZ2V0TWFwJ10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldE1hcDtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2dldE1hcmtlcnMnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0TWFya2Vycztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2dldE1heFpvb20nXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0TWF4Wm9vbTtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2dldFN0eWxlcyddID0gTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRTdHlsZXM7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydnZXRUb3RhbENsdXN0ZXJzJ10gPVxuICAgIE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0VG90YWxDbHVzdGVycztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2dldFRvdGFsTWFya2VycyddID1cbiAgICBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldFRvdGFsTWFya2Vycztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ3JlZHJhdyddID0gTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZWRyYXc7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydyZW1vdmVNYXJrZXInXSA9XG4gICAgTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZW1vdmVNYXJrZXI7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydyZW1vdmVNYXJrZXJzJ10gPVxuICAgIE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVtb3ZlTWFya2Vycztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ3Jlc2V0Vmlld3BvcnQnXSA9XG4gICAgTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZXNldFZpZXdwb3J0O1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsncmVwYWludCddID1cbiAgICBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlcGFpbnQ7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydzZXRDYWxjdWxhdG9yJ10gPVxuICAgIE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0Q2FsY3VsYXRvcjtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ3NldEdyaWRTaXplJ10gPVxuICAgIE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0R3JpZFNpemU7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydzZXRNYXhab29tJ10gPVxuICAgIE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0TWF4Wm9vbTtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ29uQWRkJ10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLm9uQWRkO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnZHJhdyddID0gTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5kcmF3O1xuXG5DbHVzdGVyLnByb3RvdHlwZVsnZ2V0Q2VudGVyJ10gPSBDbHVzdGVyLnByb3RvdHlwZS5nZXRDZW50ZXI7XG5DbHVzdGVyLnByb3RvdHlwZVsnZ2V0U2l6ZSddID0gQ2x1c3Rlci5wcm90b3R5cGUuZ2V0U2l6ZTtcbkNsdXN0ZXIucHJvdG90eXBlWydnZXRNYXJrZXJzJ10gPSBDbHVzdGVyLnByb3RvdHlwZS5nZXRNYXJrZXJzO1xuXG5DbHVzdGVySWNvbi5wcm90b3R5cGVbJ29uQWRkJ10gPSBDbHVzdGVySWNvbi5wcm90b3R5cGUub25BZGQ7XG5DbHVzdGVySWNvbi5wcm90b3R5cGVbJ2RyYXcnXSA9IENsdXN0ZXJJY29uLnByb3RvdHlwZS5kcmF3O1xuQ2x1c3Rlckljb24ucHJvdG90eXBlWydvblJlbW92ZSddID0gQ2x1c3Rlckljb24ucHJvdG90eXBlLm9uUmVtb3ZlO1xuXG5cblxuLyoqKiBFWFBPUlRTIEZST00gZXhwb3J0cy1sb2FkZXIgKioqL1xuZXhwb3J0c1tcIkNsYXNzXCJdID0gKE1hcmtlckNsdXN0ZXJlcik7XG5leHBvcnRzW1wiZ29vZ2xlXCJdID0gKGdvb2dsZSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZXhwb3J0cy1sb2FkZXI/Q2xhc3M9TWFya2VyQ2x1c3RlcmVyLGdvb2dsZT1nb29nbGUhLi9+L2ltcG9ydHMtbG9hZGVyP2dvb2dsZT0+e30hLi9+L2pzLW1hcmtlci1jbHVzdGVyZXIvc3JjL21hcmtlcmNsdXN0ZXJlci5qc1xuICoqIG1vZHVsZSBpZCA9IDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 5 */
/*!***********************************************!*\
  !*** ./~/webOptimizer/browserAPI.compiled.js ***!
  \***********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(__dirname) {// #!/usr/bin/env node\n\n// -*- coding: utf-8 -*-\n'use strict';\n/* !\n    region header\n    Copyright Torben Sickert (info[\"~at~\"]torben.website) 16.12.2012\n\n    License\n    -------\n\n    This library written by Torben Sickert stand under a creative commons naming\n    3.0 unported license. see http://creativecommons.org/licenses/by/3.0/deed.de\n    endregion\n*/\n// region imports\n/* eslint-disable no-unused-vars */\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\n// endregion\n// region variables\n\n/* eslint-enable no-unused-vars */\n// endregion\n// region declaration\nconst onCreatedListener = [];\nlet browserAPI;\n// endregion\n// region ensure presence of common browser environment\nif (typeof TARGET === 'undefined' || TARGET === 'node') {\n    // region mock browser environment\n    const fileSystem = __webpack_require__(/*! fs */ 7);\n    const path = __webpack_require__(/*! path */ 10);\n    const metaDOM = __webpack_require__(/*! jsdom */ 9);\n    const virtualConsole = metaDOM.createVirtualConsole().sendTo(console, { omitJsdomErrors: true });\n    virtualConsole.on('jsdomError', error => {\n        if (!browserAPI.debug && ['XMLHttpRequest', 'resource loading'\n        // IgnoreTypeCheck\n        ].includes(error.type)) console.warn(`Loading resource failed: ${ error.toString() }.`);else console.error(error);\n    });\n    let templateFilePath = path.join(__dirname, 'test.compiled.html');\n    try {\n        fileSystem.accessSync(templateFilePath, fileSystem.F_OK);\n    } catch (error) {\n        templateFilePath = path.join(process.cwd(), __dirname, 'node_modules/webOptimizer/test.compiled.html');\n    }\n    metaDOM.env({\n        created: (error, window) => {\n            browserAPI = {\n                debug: false, domContentLoaded: false, metaDOM, window };\n            browserAPI.window.document.addEventListener('DOMContentLoaded', () => {\n                browserAPI.domContentLoaded = true;\n            });\n            if (error) throw error;else for (const callback of onCreatedListener) callback(browserAPI, false);\n        },\n        features: {\n            FetchExternalResources: ['script', 'frame', 'iframe', 'link', 'img'],\n            ProcessExternalResources: ['script'],\n            SkipExternalResources: false\n        },\n        html: fileSystem.readFileSync(templateFilePath, { encoding: 'utf-8' }),\n        resourceLoader: (resource, callback) => {\n            if (resource.url.hostname === 'localhost') {\n                resource.url.host = resource.url.hostname = '';\n                resource.url.port = null;\n                resource.url.protocol = 'file:';\n                resource.url.href = resource.url.href.replace(/^[a-zA-Z]+:\\/\\/localhost(?::[0-9]+)?/, `file://${ process.cwd() }`);\n                resource.url.path = resource.url.pathname = path.join(process.cwd(), resource.url.path);\n            }\n            if (browserAPI.debug) console.info(`Load resource \"${ resource.url.href }\".`);\n            return resource.defaultFetch(function (error) {\n                if (!error) callback.apply(this, arguments);\n            });\n        },\n        url: 'http://localhost',\n        virtualConsole\n    });\n    // endregion\n} else {\n        browserAPI = { debug: false, domContentLoaded: false, metaDOM: null, window };\n        window.document.addEventListener('DOMContentLoaded', () => {\n            browserAPI.domContentLoaded = true;\n            for (const callback of onCreatedListener) callback(browserAPI, false);\n        });\n    }\n// endregion\n\nexports.default = (callback, clear = true) => {\n    // region initialize global context\n    /*\n        NOTE: We have to define window globally before anything is loaded to\n        ensure that all future instances share the same window object.\n    */\n    if (clear && typeof global !== 'undefined' && global !== browserAPI.window) {\n        global.window = browserAPI.window;\n        for (const key in browserAPI.window) if (browserAPI.window.hasOwnProperty(key) && !global.hasOwnProperty(key)) global[key] = browserAPI.window[key];\n    }\n    // endregion\n    if (typeof TARGET === 'undefined' || TARGET === 'node') return browserAPI ? callback(browserAPI, true) : onCreatedListener.push(callback);\n    return browserAPI.domContentLoaded ? callback(browserAPI, true) : onCreatedListener.push(callback);\n};\n// region vim modline\n// vim: set tabstop=4 shiftwidth=4 expandtab:\n// vim: foldmethod=marker foldmarker=region,endregion:\n// endregion\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJyb3dzZXJBUEkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVdBO0FBQ0E7Ozs7OztBQU9BO0FBQ0E7O0FBTkE7QUFDQztBQUNEO0FBS0EsTUFBTSxvQkFBb0MsRUFBMUM7QUFDQSxJQUFJLFVBQUo7QUFDQTtBQUNBO0FBQ0EsSUFBSSxPQUFPLE1BQVAsS0FBa0IsV0FBbEIsSUFBaUMsV0FBVyxNQUFoRCxFQUF3RDtBQUNwRDtBQUNBLFVBQU0sYUFBb0IsUUFBUSxJQUFSLENBQTFCO0FBQ0EsVUFBTSxPQUFjLFFBQVEsTUFBUixDQUFwQjtBQUNBLFVBQU0sVUFBaUIsUUFBUSxPQUFSLENBQXZCO0FBQ0EsVUFBTSxpQkFBd0IsUUFBUSxvQkFBUixHQUErQixNQUEvQixDQUMxQixPQUQwQixFQUNqQixFQUFDLGlCQUFpQixJQUFsQixFQURpQixDQUE5QjtBQUVBLG1CQUFlLEVBQWYsQ0FBa0IsWUFBbEIsRUFBaUMsS0FBRCxJQUFzQjtBQUNsRCxZQUFJLENBQUMsV0FBVyxLQUFaLElBQXFCLENBQ3JCLGdCQURxQixFQUNIO0FBQ3RCO0FBRnlCLFVBR3ZCLFFBSHVCLENBR2QsTUFBTSxJQUhRLENBQXpCLEVBSUksUUFBUSxJQUFSLENBQWMsNkJBQTJCLE1BQU0sUUFBTixFQUFpQixJQUExRCxFQUpKLEtBTUksUUFBUSxLQUFSLENBQWMsS0FBZDtBQUNQLEtBUkQ7QUFTQSxRQUFJLG1CQUEwQixLQUFLLElBQUwsQ0FBVSxTQUFWLEVBQXFCLG9CQUFyQixDQUE5QjtBQUNBLFFBQUk7QUFDQSxtQkFBVyxVQUFYLENBQXNCLGdCQUF0QixFQUF3QyxXQUFXLElBQW5EO0FBQ0gsS0FGRCxDQUVFLE9BQU8sS0FBUCxFQUFjO0FBQ1osMkJBQW1CLEtBQUssSUFBTCxDQUNmLFFBQVEsR0FBUixFQURlLEVBQ0EsU0FEQSxFQUVmLDhDQUZlLENBQW5CO0FBR0g7QUFDRCxZQUFRLEdBQVIsQ0FBWTtBQUNSLGlCQUFTLENBQUMsS0FBRCxFQUFlLE1BQWYsS0FBc0M7QUFDM0MseUJBQWE7QUFDVCx1QkFBTyxLQURFLEVBQ0ssa0JBQWtCLEtBRHZCLEVBQzhCLE9BRDlCLEVBQ3VDLE1BRHZDLEVBQWI7QUFFQSx1QkFBVyxNQUFYLENBQWtCLFFBQWxCLENBQTJCLGdCQUEzQixDQUE0QyxrQkFBNUMsRUFBZ0UsTUFDdEQ7QUFDTiwyQkFBVyxnQkFBWCxHQUE4QixJQUE5QjtBQUNILGFBSEQ7QUFJQSxnQkFBSSxLQUFKLEVBQ0ksTUFBTSxLQUFOLENBREosS0FHSSxLQUFLLE1BQU0sUUFBWCxJQUFnQyxpQkFBaEMsRUFDSSxTQUFTLFVBQVQsRUFBcUIsS0FBckI7QUFDWCxTQWJPO0FBY1Isa0JBQVU7QUFDTixvQ0FBd0IsQ0FDcEIsUUFEb0IsRUFDVixPQURVLEVBQ0QsUUFEQyxFQUNTLE1BRFQsRUFDaUIsS0FEakIsQ0FEbEI7QUFJTixzQ0FBMEIsQ0FBQyxRQUFELENBSnBCO0FBS04sbUNBQXVCO0FBTGpCLFNBZEY7QUFxQlIsY0FBTSxXQUFXLFlBQVgsQ0FBd0IsZ0JBQXhCLEVBQTBDLEVBQUMsVUFBVSxPQUFYLEVBQTFDLENBckJFO0FBc0JSLHdCQUFnQixDQUNaLFFBRFksRUFpQlQsUUFqQlMsS0FrQk47QUFDTixnQkFBSSxTQUFTLEdBQVQsQ0FBYSxRQUFiLEtBQTBCLFdBQTlCLEVBQTJDO0FBQ3ZDLHlCQUFTLEdBQVQsQ0FBYSxJQUFiLEdBQW9CLFNBQVMsR0FBVCxDQUFhLFFBQWIsR0FBd0IsRUFBNUM7QUFDQSx5QkFBUyxHQUFULENBQWEsSUFBYixHQUFvQixJQUFwQjtBQUNBLHlCQUFTLEdBQVQsQ0FBYSxRQUFiLEdBQXdCLE9BQXhCO0FBQ0EseUJBQVMsR0FBVCxDQUFhLElBQWIsR0FBb0IsU0FBUyxHQUFULENBQWEsSUFBYixDQUFrQixPQUFsQixDQUNoQixzQ0FEZ0IsRUFFZixXQUFTLFFBQVEsR0FBUixFQUFjLEdBRlIsQ0FBcEI7QUFHQSx5QkFBUyxHQUFULENBQWEsSUFBYixHQUFvQixTQUFTLEdBQVQsQ0FBYSxRQUFiLEdBQXdCLEtBQUssSUFBTCxDQUN4QyxRQUFRLEdBQVIsRUFEd0MsRUFDekIsU0FBUyxHQUFULENBQWEsSUFEWSxDQUE1QztBQUVIO0FBQ0QsZ0JBQUksV0FBVyxLQUFmLEVBQ0ksUUFBUSxJQUFSLENBQWMsbUJBQWlCLFNBQVMsR0FBVCxDQUFhLElBQUssS0FBakQ7QUFDSixtQkFBTyxTQUFTLFlBQVQsQ0FBc0IsVUFBUyxLQUFULEVBQTRCO0FBQ3JELG9CQUFJLENBQUMsS0FBTCxFQUNJLFNBQVMsS0FBVCxDQUFlLElBQWYsRUFBcUIsU0FBckI7QUFDUCxhQUhNLENBQVA7QUFJSCxTQXpETztBQTBEUixhQUFLLGtCQTFERztBQTJEUjtBQTNEUSxLQUFaO0FBNkRBO0FBQ0gsQ0F0RkQsTUFzRk87QUFDSCxxQkFBYSxFQUFDLE9BQU8sS0FBUixFQUFlLGtCQUFrQixLQUFqQyxFQUF3QyxTQUFTLElBQWpELEVBQXVELE1BQXZELEVBQWI7QUFDQSxlQUFPLFFBQVAsQ0FBZ0IsZ0JBQWhCLENBQWlDLGtCQUFqQyxFQUFxRCxNQUFXO0FBQzVELHVCQUFXLGdCQUFYLEdBQThCLElBQTlCO0FBQ0EsaUJBQUssTUFBTSxRQUFYLElBQWdDLGlCQUFoQyxFQUNJLFNBQVMsVUFBVCxFQUFxQixLQUFyQjtBQUNQLFNBSkQ7QUFLSDtBQUNEOztrQkFDZSxDQUFDLFFBQUQsRUFBb0IsUUFBZ0IsSUFBcEMsS0FBaUQ7QUFDNUQ7QUFDQTs7OztBQUlBLFFBQ0ksU0FBUyxPQUFPLE1BQVAsS0FBa0IsV0FBM0IsSUFBMEMsV0FBVyxXQUFXLE1BRHBFLEVBRUU7QUFDRSxlQUFPLE1BQVAsR0FBZ0IsV0FBVyxNQUEzQjtBQUNBLGFBQUssTUFBTSxHQUFYLElBQWtCLFdBQVcsTUFBN0IsRUFDSSxJQUFJLFdBQVcsTUFBWCxDQUFrQixjQUFsQixDQUNBLEdBREEsS0FFQyxDQUFDLE9BQU8sY0FBUCxDQUFzQixHQUF0QixDQUZOLEVBR0ksT0FBTyxHQUFQLElBQWMsV0FBVyxNQUFYLENBQWtCLEdBQWxCLENBQWQ7QUFDWDtBQUNEO0FBQ0EsUUFBSSxPQUFPLE1BQVAsS0FBa0IsV0FBbEIsSUFBaUMsV0FBVyxNQUFoRCxFQUNJLE9BQVEsVUFBRCxHQUFlLFNBQ2xCLFVBRGtCLEVBQ04sSUFETSxDQUFmLEdBRUgsa0JBQWtCLElBQWxCLENBQXVCLFFBQXZCLENBRko7QUFHSixXQUFRLFdBQVcsZ0JBQVosR0FBZ0MsU0FDbkMsVUFEbUMsRUFDdkIsSUFEdUIsQ0FBaEMsR0FFSCxrQkFBa0IsSUFBbEIsQ0FBdUIsUUFBdkIsQ0FGSjtBQUdILEM7QUFDRDtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJicm93c2VyQVBJLmNvbXBpbGVkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gIyEvdXNyL2Jpbi9lbnYgbm9kZVxuLy8gQGZsb3dcbi8vIC0qLSBjb2Rpbmc6IHV0Zi04IC0qLVxuJ3VzZSBzdHJpY3QnXG4vKiAhXG4gICAgcmVnaW9uIGhlYWRlclxuICAgIENvcHlyaWdodCBUb3JiZW4gU2lja2VydCAoaW5mb1tcIn5hdH5cIl10b3JiZW4ud2Vic2l0ZSkgMTYuMTIuMjAxMlxuXG4gICAgTGljZW5zZVxuICAgIC0tLS0tLS1cblxuICAgIFRoaXMgbGlicmFyeSB3cml0dGVuIGJ5IFRvcmJlbiBTaWNrZXJ0IHN0YW5kIHVuZGVyIGEgY3JlYXRpdmUgY29tbW9ucyBuYW1pbmdcbiAgICAzLjAgdW5wb3J0ZWQgbGljZW5zZS4gc2VlIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMC9kZWVkLmRlXG4gICAgZW5kcmVnaW9uXG4qL1xuLy8gcmVnaW9uIGltcG9ydHNcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5pbXBvcnQgdHlwZSB7QnJvd3NlckFQSSwgRG9tTm9kZSwgV2luZG93fSBmcm9tICcuL3R5cGUnXG4vKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzICovXG4gLy8gZW5kcmVnaW9uXG4vLyByZWdpb24gZGVjbGFyYXRpb25cbmRlY2xhcmUgdmFyIFRBUkdFVDpzdHJpbmdcbmRlY2xhcmUgdmFyIHdpbmRvdzpXaW5kb3dcbi8vIGVuZHJlZ2lvblxuLy8gcmVnaW9uIHZhcmlhYmxlc1xuY29uc3Qgb25DcmVhdGVkTGlzdGVuZXI6QXJyYXk8RnVuY3Rpb24+ID0gW11cbmxldCBicm93c2VyQVBJOkJyb3dzZXJBUElcbi8vIGVuZHJlZ2lvblxuLy8gcmVnaW9uIGVuc3VyZSBwcmVzZW5jZSBvZiBjb21tb24gYnJvd3NlciBlbnZpcm9ubWVudFxuaWYgKHR5cGVvZiBUQVJHRVQgPT09ICd1bmRlZmluZWQnIHx8IFRBUkdFVCA9PT0gJ25vZGUnKSB7XG4gICAgLy8gcmVnaW9uIG1vY2sgYnJvd3NlciBlbnZpcm9ubWVudFxuICAgIGNvbnN0IGZpbGVTeXN0ZW06T2JqZWN0ID0gcmVxdWlyZSgnZnMnKVxuICAgIGNvbnN0IHBhdGg6T2JqZWN0ID0gcmVxdWlyZSgncGF0aCcpXG4gICAgY29uc3QgbWV0YURPTTpPYmplY3QgPSByZXF1aXJlKCdqc2RvbScpXG4gICAgY29uc3QgdmlydHVhbENvbnNvbGU6T2JqZWN0ID0gbWV0YURPTS5jcmVhdGVWaXJ0dWFsQ29uc29sZSgpLnNlbmRUbyhcbiAgICAgICAgY29uc29sZSwge29taXRKc2RvbUVycm9yczogdHJ1ZX0pXG4gICAgdmlydHVhbENvbnNvbGUub24oJ2pzZG9tRXJyb3InLCAoZXJyb3I6RXJyb3IpOnZvaWQgPT4ge1xuICAgICAgICBpZiAoIWJyb3dzZXJBUEkuZGVidWcgJiYgW1xuICAgICAgICAgICAgJ1hNTEh0dHBSZXF1ZXN0JywgJ3Jlc291cmNlIGxvYWRpbmcnXG4gICAgICAgIC8vIElnbm9yZVR5cGVDaGVja1xuICAgICAgICBdLmluY2x1ZGVzKGVycm9yLnR5cGUpKVxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBMb2FkaW5nIHJlc291cmNlIGZhaWxlZDogJHtlcnJvci50b1N0cmluZygpfS5gKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuICAgIH0pXG4gICAgbGV0IHRlbXBsYXRlRmlsZVBhdGg6c3RyaW5nID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJ3Rlc3QuY29tcGlsZWQuaHRtbCcpXG4gICAgdHJ5IHtcbiAgICAgICAgZmlsZVN5c3RlbS5hY2Nlc3NTeW5jKHRlbXBsYXRlRmlsZVBhdGgsIGZpbGVTeXN0ZW0uRl9PSylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0ZW1wbGF0ZUZpbGVQYXRoID0gcGF0aC5qb2luKFxuICAgICAgICAgICAgcHJvY2Vzcy5jd2QoKSwgX19kaXJuYW1lLFxuICAgICAgICAgICAgJ25vZGVfbW9kdWxlcy93ZWJPcHRpbWl6ZXIvdGVzdC5jb21waWxlZC5odG1sJylcbiAgICB9XG4gICAgbWV0YURPTS5lbnYoe1xuICAgICAgICBjcmVhdGVkOiAoZXJyb3I6P0Vycm9yLCB3aW5kb3c6T2JqZWN0KTp2b2lkID0+IHtcbiAgICAgICAgICAgIGJyb3dzZXJBUEkgPSB7XG4gICAgICAgICAgICAgICAgZGVidWc6IGZhbHNlLCBkb21Db250ZW50TG9hZGVkOiBmYWxzZSwgbWV0YURPTSwgd2luZG93fVxuICAgICAgICAgICAgYnJvd3NlckFQSS53aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIChcbiAgICAgICAgICAgICk6dm9pZCA9PiB7XG4gICAgICAgICAgICAgICAgYnJvd3NlckFQSS5kb21Db250ZW50TG9hZGVkID0gdHJ1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2s6RnVuY3Rpb24gb2Ygb25DcmVhdGVkTGlzdGVuZXIpXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGJyb3dzZXJBUEksIGZhbHNlKVxuICAgICAgICB9LFxuICAgICAgICBmZWF0dXJlczoge1xuICAgICAgICAgICAgRmV0Y2hFeHRlcm5hbFJlc291cmNlczogW1xuICAgICAgICAgICAgICAgICdzY3JpcHQnLCAnZnJhbWUnLCAnaWZyYW1lJywgJ2xpbmsnLCAnaW1nJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFByb2Nlc3NFeHRlcm5hbFJlc291cmNlczogWydzY3JpcHQnXSxcbiAgICAgICAgICAgIFNraXBFeHRlcm5hbFJlc291cmNlczogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgaHRtbDogZmlsZVN5c3RlbS5yZWFkRmlsZVN5bmModGVtcGxhdGVGaWxlUGF0aCwge2VuY29kaW5nOiAndXRmLTgnfSksXG4gICAgICAgIHJlc291cmNlTG9hZGVyOiAoXG4gICAgICAgICAgICByZXNvdXJjZTp7XG4gICAgICAgICAgICAgICAgZWxlbWVudDpEb21Ob2RlO1xuICAgICAgICAgICAgICAgIHVybDp7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RuYW1lOnN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgaG9zdDpzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIHBvcnQ6P3N0cmluZztcbiAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6c3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICBocmVmOnN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgcGF0aDpzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIHBhdGhuYW1lOnN0cmluZztcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvb2tpZTpzdHJpbmc7XG4gICAgICAgICAgICAgICAgYmFzZVVybDpzdHJpbmc7XG4gICAgICAgICAgICAgICAgZGVmYXVsdEZldGNoOihjYWxsYmFjazooXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOj9FcnJvciwgYm9keTpzdHJpbmdcbiAgICAgICAgICAgICAgICApID0+IHZvaWQpID0+IHZvaWRcbiAgICAgICAgICAgIH0sIGNhbGxiYWNrOihlcnJvcjo/RXJyb3IsIGJvZHk6c3RyaW5nKSA9PiB2b2lkXG4gICAgICAgICk6dm9pZCA9PiB7XG4gICAgICAgICAgICBpZiAocmVzb3VyY2UudXJsLmhvc3RuYW1lID09PSAnbG9jYWxob3N0Jykge1xuICAgICAgICAgICAgICAgIHJlc291cmNlLnVybC5ob3N0ID0gcmVzb3VyY2UudXJsLmhvc3RuYW1lID0gJydcbiAgICAgICAgICAgICAgICByZXNvdXJjZS51cmwucG9ydCA9IG51bGxcbiAgICAgICAgICAgICAgICByZXNvdXJjZS51cmwucHJvdG9jb2wgPSAnZmlsZTonXG4gICAgICAgICAgICAgICAgcmVzb3VyY2UudXJsLmhyZWYgPSByZXNvdXJjZS51cmwuaHJlZi5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAvXlthLXpBLVpdKzpcXC9cXC9sb2NhbGhvc3QoPzo6WzAtOV0rKT8vLFxuICAgICAgICAgICAgICAgICAgICBgZmlsZTovLyR7cHJvY2Vzcy5jd2QoKX1gKVxuICAgICAgICAgICAgICAgIHJlc291cmNlLnVybC5wYXRoID0gcmVzb3VyY2UudXJsLnBhdGhuYW1lID0gcGF0aC5qb2luKFxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmN3ZCgpLCByZXNvdXJjZS51cmwucGF0aClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChicm93c2VyQVBJLmRlYnVnKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhgTG9hZCByZXNvdXJjZSBcIiR7cmVzb3VyY2UudXJsLmhyZWZ9XCIuYClcbiAgICAgICAgICAgIHJldHVybiByZXNvdXJjZS5kZWZhdWx0RmV0Y2goZnVuY3Rpb24oZXJyb3I6P0Vycm9yKTp2b2lkIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVycm9yKVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0JyxcbiAgICAgICAgdmlydHVhbENvbnNvbGVcbiAgICB9KVxuICAgIC8vIGVuZHJlZ2lvblxufSBlbHNlIHtcbiAgICBicm93c2VyQVBJID0ge2RlYnVnOiBmYWxzZSwgZG9tQ29udGVudExvYWRlZDogZmFsc2UsIG1ldGFET006IG51bGwsIHdpbmRvd31cbiAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpOnZvaWQgPT4ge1xuICAgICAgICBicm93c2VyQVBJLmRvbUNvbnRlbnRMb2FkZWQgPSB0cnVlXG4gICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2s6RnVuY3Rpb24gb2Ygb25DcmVhdGVkTGlzdGVuZXIpXG4gICAgICAgICAgICBjYWxsYmFjayhicm93c2VyQVBJLCBmYWxzZSlcbiAgICB9KVxufVxuLy8gZW5kcmVnaW9uXG5leHBvcnQgZGVmYXVsdCAoY2FsbGJhY2s6RnVuY3Rpb24sIGNsZWFyOmJvb2xlYW4gPSB0cnVlKTphbnkgPT4ge1xuICAgIC8vIHJlZ2lvbiBpbml0aWFsaXplIGdsb2JhbCBjb250ZXh0XG4gICAgLypcbiAgICAgICAgTk9URTogV2UgaGF2ZSB0byBkZWZpbmUgd2luZG93IGdsb2JhbGx5IGJlZm9yZSBhbnl0aGluZyBpcyBsb2FkZWQgdG9cbiAgICAgICAgZW5zdXJlIHRoYXQgYWxsIGZ1dHVyZSBpbnN0YW5jZXMgc2hhcmUgdGhlIHNhbWUgd2luZG93IG9iamVjdC5cbiAgICAqL1xuICAgIGlmIChcbiAgICAgICAgY2xlYXIgJiYgdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsICE9PSBicm93c2VyQVBJLndpbmRvd1xuICAgICkge1xuICAgICAgICBnbG9iYWwud2luZG93ID0gYnJvd3NlckFQSS53aW5kb3dcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gYnJvd3NlckFQSS53aW5kb3cpXG4gICAgICAgICAgICBpZiAoYnJvd3NlckFQSS53aW5kb3cuaGFzT3duUHJvcGVydHkoXG4gICAgICAgICAgICAgICAga2V5XG4gICAgICAgICAgICApICYmICFnbG9iYWwuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgICAgICBnbG9iYWxba2V5XSA9IGJyb3dzZXJBUEkud2luZG93W2tleV1cbiAgICB9XG4gICAgLy8gZW5kcmVnaW9uXG4gICAgaWYgKHR5cGVvZiBUQVJHRVQgPT09ICd1bmRlZmluZWQnIHx8IFRBUkdFVCA9PT0gJ25vZGUnKVxuICAgICAgICByZXR1cm4gKGJyb3dzZXJBUEkpID8gY2FsbGJhY2soXG4gICAgICAgICAgICBicm93c2VyQVBJLCB0cnVlXG4gICAgICAgICkgOiBvbkNyZWF0ZWRMaXN0ZW5lci5wdXNoKGNhbGxiYWNrKVxuICAgIHJldHVybiAoYnJvd3NlckFQSS5kb21Db250ZW50TG9hZGVkKSA/IGNhbGxiYWNrKFxuICAgICAgICBicm93c2VyQVBJLCB0cnVlXG4gICAgKSA6IG9uQ3JlYXRlZExpc3RlbmVyLnB1c2goY2FsbGJhY2spXG59XG4vLyByZWdpb24gdmltIG1vZGxpbmVcbi8vIHZpbTogc2V0IHRhYnN0b3A9NCBzaGlmdHdpZHRoPTQgZXhwYW5kdGFiOlxuLy8gdmltOiBmb2xkbWV0aG9kPW1hcmtlciBmb2xkbWFya2VyPXJlZ2lvbixlbmRyZWdpb246XG4vLyBlbmRyZWdpb25cbiJdfQ==\n/* WEBPACK VAR INJECTION */}.call(exports, \"/\"))\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vd2ViT3B0aW1pemVyL2Jyb3dzZXJBUEkuY29tcGlsZWQuanM/ODljYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAjIS91c3IvYmluL2VudiBub2RlXG5cbi8vIC0qLSBjb2Rpbmc6IHV0Zi04IC0qLVxuJ3VzZSBzdHJpY3QnO1xuLyogIVxuICAgIHJlZ2lvbiBoZWFkZXJcbiAgICBDb3B5cmlnaHQgVG9yYmVuIFNpY2tlcnQgKGluZm9bXCJ+YXR+XCJddG9yYmVuLndlYnNpdGUpIDE2LjEyLjIwMTJcblxuICAgIExpY2Vuc2VcbiAgICAtLS0tLS0tXG5cbiAgICBUaGlzIGxpYnJhcnkgd3JpdHRlbiBieSBUb3JiZW4gU2lja2VydCBzdGFuZCB1bmRlciBhIGNyZWF0aXZlIGNvbW1vbnMgbmFtaW5nXG4gICAgMy4wIHVucG9ydGVkIGxpY2Vuc2UuIHNlZSBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS8zLjAvZGVlZC5kZVxuICAgIGVuZHJlZ2lvblxuKi9cbi8vIHJlZ2lvbiBpbXBvcnRzXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbi8vIGVuZHJlZ2lvblxuLy8gcmVnaW9uIHZhcmlhYmxlc1xuXG4vKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzICovXG4vLyBlbmRyZWdpb25cbi8vIHJlZ2lvbiBkZWNsYXJhdGlvblxuY29uc3Qgb25DcmVhdGVkTGlzdGVuZXIgPSBbXTtcbmxldCBicm93c2VyQVBJO1xuLy8gZW5kcmVnaW9uXG4vLyByZWdpb24gZW5zdXJlIHByZXNlbmNlIG9mIGNvbW1vbiBicm93c2VyIGVudmlyb25tZW50XG5pZiAodHlwZW9mIFRBUkdFVCA9PT0gJ3VuZGVmaW5lZCcgfHwgVEFSR0VUID09PSAnbm9kZScpIHtcbiAgICAvLyByZWdpb24gbW9jayBicm93c2VyIGVudmlyb25tZW50XG4gICAgY29uc3QgZmlsZVN5c3RlbSA9IHJlcXVpcmUoJ2ZzJyk7XG4gICAgY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbiAgICBjb25zdCBtZXRhRE9NID0gcmVxdWlyZSgnanNkb20nKTtcbiAgICBjb25zdCB2aXJ0dWFsQ29uc29sZSA9IG1ldGFET00uY3JlYXRlVmlydHVhbENvbnNvbGUoKS5zZW5kVG8oY29uc29sZSwgeyBvbWl0SnNkb21FcnJvcnM6IHRydWUgfSk7XG4gICAgdmlydHVhbENvbnNvbGUub24oJ2pzZG9tRXJyb3InLCBlcnJvciA9PiB7XG4gICAgICAgIGlmICghYnJvd3NlckFQSS5kZWJ1ZyAmJiBbJ1hNTEh0dHBSZXF1ZXN0JywgJ3Jlc291cmNlIGxvYWRpbmcnXG4gICAgICAgIC8vIElnbm9yZVR5cGVDaGVja1xuICAgICAgICBdLmluY2x1ZGVzKGVycm9yLnR5cGUpKSBjb25zb2xlLndhcm4oYExvYWRpbmcgcmVzb3VyY2UgZmFpbGVkOiAkeyBlcnJvci50b1N0cmluZygpIH0uYCk7ZWxzZSBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9KTtcbiAgICBsZXQgdGVtcGxhdGVGaWxlUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICd0ZXN0LmNvbXBpbGVkLmh0bWwnKTtcbiAgICB0cnkge1xuICAgICAgICBmaWxlU3lzdGVtLmFjY2Vzc1N5bmModGVtcGxhdGVGaWxlUGF0aCwgZmlsZVN5c3RlbS5GX09LKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0ZW1wbGF0ZUZpbGVQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIF9fZGlybmFtZSwgJ25vZGVfbW9kdWxlcy93ZWJPcHRpbWl6ZXIvdGVzdC5jb21waWxlZC5odG1sJyk7XG4gICAgfVxuICAgIG1ldGFET00uZW52KHtcbiAgICAgICAgY3JlYXRlZDogKGVycm9yLCB3aW5kb3cpID0+IHtcbiAgICAgICAgICAgIGJyb3dzZXJBUEkgPSB7XG4gICAgICAgICAgICAgICAgZGVidWc6IGZhbHNlLCBkb21Db250ZW50TG9hZGVkOiBmYWxzZSwgbWV0YURPTSwgd2luZG93IH07XG4gICAgICAgICAgICBicm93c2VyQVBJLndpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGJyb3dzZXJBUEkuZG9tQ29udGVudExvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7ZWxzZSBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIG9uQ3JlYXRlZExpc3RlbmVyKSBjYWxsYmFjayhicm93c2VyQVBJLCBmYWxzZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZlYXR1cmVzOiB7XG4gICAgICAgICAgICBGZXRjaEV4dGVybmFsUmVzb3VyY2VzOiBbJ3NjcmlwdCcsICdmcmFtZScsICdpZnJhbWUnLCAnbGluaycsICdpbWcnXSxcbiAgICAgICAgICAgIFByb2Nlc3NFeHRlcm5hbFJlc291cmNlczogWydzY3JpcHQnXSxcbiAgICAgICAgICAgIFNraXBFeHRlcm5hbFJlc291cmNlczogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgaHRtbDogZmlsZVN5c3RlbS5yZWFkRmlsZVN5bmModGVtcGxhdGVGaWxlUGF0aCwgeyBlbmNvZGluZzogJ3V0Zi04JyB9KSxcbiAgICAgICAgcmVzb3VyY2VMb2FkZXI6IChyZXNvdXJjZSwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGlmIChyZXNvdXJjZS51cmwuaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UudXJsLmhvc3QgPSByZXNvdXJjZS51cmwuaG9zdG5hbWUgPSAnJztcbiAgICAgICAgICAgICAgICByZXNvdXJjZS51cmwucG9ydCA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UudXJsLnByb3RvY29sID0gJ2ZpbGU6JztcbiAgICAgICAgICAgICAgICByZXNvdXJjZS51cmwuaHJlZiA9IHJlc291cmNlLnVybC5ocmVmLnJlcGxhY2UoL15bYS16QS1aXSs6XFwvXFwvbG9jYWxob3N0KD86OlswLTldKyk/LywgYGZpbGU6Ly8keyBwcm9jZXNzLmN3ZCgpIH1gKTtcbiAgICAgICAgICAgICAgICByZXNvdXJjZS51cmwucGF0aCA9IHJlc291cmNlLnVybC5wYXRobmFtZSA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCByZXNvdXJjZS51cmwucGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYnJvd3NlckFQSS5kZWJ1ZykgY29uc29sZS5pbmZvKGBMb2FkIHJlc291cmNlIFwiJHsgcmVzb3VyY2UudXJsLmhyZWYgfVwiLmApO1xuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlLmRlZmF1bHRGZXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVycm9yKSBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3QnLFxuICAgICAgICB2aXJ0dWFsQ29uc29sZVxuICAgIH0pO1xuICAgIC8vIGVuZHJlZ2lvblxufSBlbHNlIHtcbiAgICAgICAgYnJvd3NlckFQSSA9IHsgZGVidWc6IGZhbHNlLCBkb21Db250ZW50TG9hZGVkOiBmYWxzZSwgbWV0YURPTTogbnVsbCwgd2luZG93IH07XG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgYnJvd3NlckFQSS5kb21Db250ZW50TG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2Ygb25DcmVhdGVkTGlzdGVuZXIpIGNhbGxiYWNrKGJyb3dzZXJBUEksIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuLy8gZW5kcmVnaW9uXG5cbmV4cG9ydHMuZGVmYXVsdCA9IChjYWxsYmFjaywgY2xlYXIgPSB0cnVlKSA9PiB7XG4gICAgLy8gcmVnaW9uIGluaXRpYWxpemUgZ2xvYmFsIGNvbnRleHRcbiAgICAvKlxuICAgICAgICBOT1RFOiBXZSBoYXZlIHRvIGRlZmluZSB3aW5kb3cgZ2xvYmFsbHkgYmVmb3JlIGFueXRoaW5nIGlzIGxvYWRlZCB0b1xuICAgICAgICBlbnN1cmUgdGhhdCBhbGwgZnV0dXJlIGluc3RhbmNlcyBzaGFyZSB0aGUgc2FtZSB3aW5kb3cgb2JqZWN0LlxuICAgICovXG4gICAgaWYgKGNsZWFyICYmIHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbCAhPT0gYnJvd3NlckFQSS53aW5kb3cpIHtcbiAgICAgICAgZ2xvYmFsLndpbmRvdyA9IGJyb3dzZXJBUEkud2luZG93O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBicm93c2VyQVBJLndpbmRvdykgaWYgKGJyb3dzZXJBUEkud2luZG93Lmhhc093blByb3BlcnR5KGtleSkgJiYgIWdsb2JhbC5oYXNPd25Qcm9wZXJ0eShrZXkpKSBnbG9iYWxba2V5XSA9IGJyb3dzZXJBUEkud2luZG93W2tleV07XG4gICAgfVxuICAgIC8vIGVuZHJlZ2lvblxuICAgIGlmICh0eXBlb2YgVEFSR0VUID09PSAndW5kZWZpbmVkJyB8fCBUQVJHRVQgPT09ICdub2RlJykgcmV0dXJuIGJyb3dzZXJBUEkgPyBjYWxsYmFjayhicm93c2VyQVBJLCB0cnVlKSA6IG9uQ3JlYXRlZExpc3RlbmVyLnB1c2goY2FsbGJhY2spO1xuICAgIHJldHVybiBicm93c2VyQVBJLmRvbUNvbnRlbnRMb2FkZWQgPyBjYWxsYmFjayhicm93c2VyQVBJLCB0cnVlKSA6IG9uQ3JlYXRlZExpc3RlbmVyLnB1c2goY2FsbGJhY2spO1xufTtcbi8vIHJlZ2lvbiB2aW0gbW9kbGluZVxuLy8gdmltOiBzZXQgdGFic3RvcD00IHNoaWZ0d2lkdGg9NCBleHBhbmR0YWI6XG4vLyB2aW06IGZvbGRtZXRob2Q9bWFya2VyIGZvbGRtYXJrZXI9cmVnaW9uLGVuZHJlZ2lvbjpcbi8vIGVuZHJlZ2lvblxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSW1KeWIzZHpaWEpCVUVrdWFuTWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUU3TzBGQlJVRTdRVUZEUVR0QlFVTkJPenM3T3pzN096czdPenRCUVZkQk8wRkJRMEU3T3pzN096dEJRVTlCTzBGQlEwRTdPMEZCVGtFN1FVRkRRenRCUVVORU8wRkJTMEVzVFVGQlRTeHZRa0ZCYjBNc1JVRkJNVU03UVVGRFFTeEpRVUZKTEZWQlFVbzdRVUZEUVR0QlFVTkJPMEZCUTBFc1NVRkJTU3hQUVVGUExFMUJRVkFzUzBGQmEwSXNWMEZCYkVJc1NVRkJhVU1zVjBGQlZ5eE5RVUZvUkN4RlFVRjNSRHRCUVVOd1JEdEJRVU5CTEZWQlFVMHNZVUZCYjBJc1VVRkJVU3hKUVVGU0xFTkJRVEZDTzBGQlEwRXNWVUZCVFN4UFFVRmpMRkZCUVZFc1RVRkJVaXhEUVVGd1FqdEJRVU5CTEZWQlFVMHNWVUZCYVVJc1VVRkJVU3hQUVVGU0xFTkJRWFpDTzBGQlEwRXNWVUZCVFN4cFFrRkJkMElzVVVGQlVTeHZRa0ZCVWl4SFFVRXJRaXhOUVVFdlFpeERRVU14UWl4UFFVUXdRaXhGUVVOcVFpeEZRVUZETEdsQ1FVRnBRaXhKUVVGc1FpeEZRVVJwUWl4RFFVRTVRanRCUVVWQkxHMUNRVUZsTEVWQlFXWXNRMEZCYTBJc1dVRkJiRUlzUlVGQmFVTXNTMEZCUkN4SlFVRnpRanRCUVVOc1JDeFpRVUZKTEVOQlFVTXNWMEZCVnl4TFFVRmFMRWxCUVhGQ0xFTkJRM0pDTEdkQ1FVUnhRaXhGUVVOSU8wRkJRM1JDTzBGQlJubENMRlZCUjNaQ0xGRkJTSFZDTEVOQlIyUXNUVUZCVFN4SlFVaFJMRU5CUVhwQ0xFVkJTVWtzVVVGQlVTeEpRVUZTTEVOQlFXTXNOa0pCUVRKQ0xFMUJRVTBzVVVGQlRpeEZRVUZwUWl4SlFVRXhSQ3hGUVVwS0xFdEJUVWtzVVVGQlVTeExRVUZTTEVOQlFXTXNTMEZCWkR0QlFVTlFMRXRCVWtRN1FVRlRRU3hSUVVGSkxHMUNRVUV3UWl4TFFVRkxMRWxCUVV3c1EwRkJWU3hUUVVGV0xFVkJRWEZDTEc5Q1FVRnlRaXhEUVVFNVFqdEJRVU5CTEZGQlFVazdRVUZEUVN4dFFrRkJWeXhWUVVGWUxFTkJRWE5DTEdkQ1FVRjBRaXhGUVVGM1F5eFhRVUZYTEVsQlFXNUVPMEZCUTBnc1MwRkdSQ3hEUVVWRkxFOUJRVThzUzBGQlVDeEZRVUZqTzBGQlExb3NNa0pCUVcxQ0xFdEJRVXNzU1VGQlRDeERRVU5tTEZGQlFWRXNSMEZCVWl4RlFVUmxMRVZCUTBFc1UwRkVRU3hGUVVWbUxEaERRVVpsTEVOQlFXNUNPMEZCUjBnN1FVRkRSQ3haUVVGUkxFZEJRVklzUTBGQldUdEJRVU5TTEdsQ1FVRlRMRU5CUVVNc1MwRkJSQ3hGUVVGbExFMUJRV1lzUzBGQmMwTTdRVUZETTBNc2VVSkJRV0U3UVVGRFZDeDFRa0ZCVHl4TFFVUkZMRVZCUTBzc2EwSkJRV3RDTEV0QlJIWkNMRVZCUXpoQ0xFOUJSRGxDTEVWQlEzVkRMRTFCUkhaRExFVkJRV0k3UVVGRlFTeDFRa0ZCVnl4TlFVRllMRU5CUVd0Q0xGRkJRV3hDTEVOQlFUSkNMR2RDUVVFelFpeERRVUUwUXl4clFrRkJOVU1zUlVGQlowVXNUVUZEZEVRN1FVRkRUaXd5UWtGQlZ5eG5Ra0ZCV0N4SFFVRTRRaXhKUVVFNVFqdEJRVU5JTEdGQlNFUTdRVUZKUVN4blFrRkJTU3hMUVVGS0xFVkJRMGtzVFVGQlRTeExRVUZPTEVOQlJFb3NTMEZIU1N4TFFVRkxMRTFCUVUwc1VVRkJXQ3hKUVVGblF5eHBRa0ZCYUVNc1JVRkRTU3hUUVVGVExGVkJRVlFzUlVGQmNVSXNTMEZCY2tJN1FVRkRXQ3hUUVdKUE8wRkJZMUlzYTBKQlFWVTdRVUZEVGl4dlEwRkJkMElzUTBGRGNFSXNVVUZFYjBJc1JVRkRWaXhQUVVSVkxFVkJRMFFzVVVGRVF5eEZRVU5UTEUxQlJGUXNSVUZEYVVJc1MwRkVha0lzUTBGRWJFSTdRVUZKVGl4elEwRkJNRUlzUTBGQlF5eFJRVUZFTEVOQlNuQkNPMEZCUzA0c2JVTkJRWFZDTzBGQlRHcENMRk5CWkVZN1FVRnhRbElzWTBGQlRTeFhRVUZYTEZsQlFWZ3NRMEZCZDBJc1owSkJRWGhDTEVWQlFUQkRMRVZCUVVNc1ZVRkJWU3hQUVVGWUxFVkJRVEZETEVOQmNrSkZPMEZCYzBKU0xIZENRVUZuUWl4RFFVTmFMRkZCUkZrc1JVRnBRbFFzVVVGcVFsTXNTMEZyUWs0N1FVRkRUaXhuUWtGQlNTeFRRVUZUTEVkQlFWUXNRMEZCWVN4UlFVRmlMRXRCUVRCQ0xGZEJRVGxDTEVWQlFUSkRPMEZCUTNaRExIbENRVUZUTEVkQlFWUXNRMEZCWVN4SlFVRmlMRWRCUVc5Q0xGTkJRVk1zUjBGQlZDeERRVUZoTEZGQlFXSXNSMEZCZDBJc1JVRkJOVU03UVVGRFFTeDVRa0ZCVXl4SFFVRlVMRU5CUVdFc1NVRkJZaXhIUVVGdlFpeEpRVUZ3UWp0QlFVTkJMSGxDUVVGVExFZEJRVlFzUTBGQllTeFJRVUZpTEVkQlFYZENMRTlCUVhoQ08wRkJRMEVzZVVKQlFWTXNSMEZCVkN4RFFVRmhMRWxCUVdJc1IwRkJiMElzVTBGQlV5eEhRVUZVTEVOQlFXRXNTVUZCWWl4RFFVRnJRaXhQUVVGc1FpeERRVU5vUWl4elEwRkVaMElzUlVGRlppeFhRVUZUTEZGQlFWRXNSMEZCVWl4RlFVRmpMRWRCUmxJc1EwRkJjRUk3UVVGSFFTeDVRa0ZCVXl4SFFVRlVMRU5CUVdFc1NVRkJZaXhIUVVGdlFpeFRRVUZUTEVkQlFWUXNRMEZCWVN4UlFVRmlMRWRCUVhkQ0xFdEJRVXNzU1VGQlRDeERRVU40UXl4UlFVRlJMRWRCUVZJc1JVRkVkME1zUlVGRGVrSXNVMEZCVXl4SFFVRlVMRU5CUVdFc1NVRkVXU3hEUVVFMVF6dEJRVVZJTzBGQlEwUXNaMEpCUVVrc1YwRkJWeXhMUVVGbUxFVkJRMGtzVVVGQlVTeEpRVUZTTEVOQlFXTXNiVUpCUVdsQ0xGTkJRVk1zUjBGQlZDeERRVUZoTEVsQlFVc3NTMEZCYWtRN1FVRkRTaXh0UWtGQlR5eFRRVUZUTEZsQlFWUXNRMEZCYzBJc1ZVRkJVeXhMUVVGVUxFVkJRVFJDTzBGQlEzSkVMRzlDUVVGSkxFTkJRVU1zUzBGQlRDeEZRVU5KTEZOQlFWTXNTMEZCVkN4RFFVRmxMRWxCUVdZc1JVRkJjVUlzVTBGQmNrSTdRVUZEVUN4aFFVaE5MRU5CUVZBN1FVRkpTQ3hUUVhwRVR6dEJRVEJFVWl4aFFVRkxMR3RDUVRGRVJ6dEJRVEpFVWp0QlFUTkVVU3hMUVVGYU8wRkJOa1JCTzBGQlEwZ3NRMEYwUmtRc1RVRnpSazg3UVVGRFNDeHhRa0ZCWVN4RlFVRkRMRTlCUVU4c1MwRkJVaXhGUVVGbExHdENRVUZyUWl4TFFVRnFReXhGUVVGM1F5eFRRVUZUTEVsQlFXcEVMRVZCUVhWRUxFMUJRWFpFTEVWQlFXSTdRVUZEUVN4bFFVRlBMRkZCUVZBc1EwRkJaMElzWjBKQlFXaENMRU5CUVdsRExHdENRVUZxUXl4RlFVRnhSQ3hOUVVGWE8wRkJRelZFTEhWQ1FVRlhMR2RDUVVGWUxFZEJRVGhDTEVsQlFUbENPMEZCUTBFc2FVSkJRVXNzVFVGQlRTeFJRVUZZTEVsQlFXZERMR2xDUVVGb1F5eEZRVU5KTEZOQlFWTXNWVUZCVkN4RlFVRnhRaXhMUVVGeVFqdEJRVU5RTEZOQlNrUTdRVUZMU0R0QlFVTkVPenRyUWtGRFpTeERRVUZETEZGQlFVUXNSVUZCYjBJc1VVRkJaMElzU1VGQmNFTXNTMEZCYVVRN1FVRkROVVE3UVVGRFFUczdPenRCUVVsQkxGRkJRMGtzVTBGQlV5eFBRVUZQTEUxQlFWQXNTMEZCYTBJc1YwRkJNMElzU1VGQk1FTXNWMEZCVnl4WFFVRlhMRTFCUkhCRkxFVkJSVVU3UVVGRFJTeGxRVUZQTEUxQlFWQXNSMEZCWjBJc1YwRkJWeXhOUVVFelFqdEJRVU5CTEdGQlFVc3NUVUZCVFN4SFFVRllMRWxCUVd0Q0xGZEJRVmNzVFVGQk4wSXNSVUZEU1N4SlFVRkpMRmRCUVZjc1RVRkJXQ3hEUVVGclFpeGpRVUZzUWl4RFFVTkJMRWRCUkVFc1MwRkZReXhEUVVGRExFOUJRVThzWTBGQlVDeERRVUZ6UWl4SFFVRjBRaXhEUVVaT0xFVkJSMGtzVDBGQlR5eEhRVUZRTEVsQlFXTXNWMEZCVnl4TlFVRllMRU5CUVd0Q0xFZEJRV3hDTEVOQlFXUTdRVUZEV0R0QlFVTkVPMEZCUTBFc1VVRkJTU3hQUVVGUExFMUJRVkFzUzBGQmEwSXNWMEZCYkVJc1NVRkJhVU1zVjBGQlZ5eE5RVUZvUkN4RlFVTkpMRTlCUVZFc1ZVRkJSQ3hIUVVGbExGTkJRMnhDTEZWQlJHdENMRVZCUTA0c1NVRkVUU3hEUVVGbUxFZEJSVWdzYTBKQlFXdENMRWxCUVd4Q0xFTkJRWFZDTEZGQlFYWkNMRU5CUmtvN1FVRkhTaXhYUVVGUkxGZEJRVmNzWjBKQlFWb3NSMEZCWjBNc1UwRkRia01zVlVGRWJVTXNSVUZEZGtJc1NVRkVkVUlzUTBGQmFFTXNSMEZGU0N4clFrRkJhMElzU1VGQmJFSXNRMEZCZFVJc1VVRkJka0lzUTBGR1NqdEJRVWRJTEVNN1FVRkRSRHRCUVVOQk8wRkJRMEU3UVVGRFFTSXNJbVpwYkdVaU9pSmljbTkzYzJWeVFWQkpMbU52YlhCcGJHVmtMbXB6SWl3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2xzaUx5OGdJeUV2ZFhOeUwySnBiaTlsYm5ZZ2JtOWtaVnh1THk4Z1FHWnNiM2RjYmk4dklDMHFMU0JqYjJScGJtYzZJSFYwWmkwNElDMHFMVnh1SjNWelpTQnpkSEpwWTNRblhHNHZLaUFoWEc0Z0lDQWdjbVZuYVc5dUlHaGxZV1JsY2x4dUlDQWdJRU52Y0hseWFXZG9kQ0JVYjNKaVpXNGdVMmxqYTJWeWRDQW9hVzVtYjF0Y0luNWhkSDVjSWwxMGIzSmlaVzR1ZDJWaWMybDBaU2tnTVRZdU1USXVNakF4TWx4dVhHNGdJQ0FnVEdsalpXNXpaVnh1SUNBZ0lDMHRMUzB0TFMxY2JseHVJQ0FnSUZSb2FYTWdiR2xpY21GeWVTQjNjbWwwZEdWdUlHSjVJRlJ2Y21KbGJpQlRhV05yWlhKMElITjBZVzVrSUhWdVpHVnlJR0VnWTNKbFlYUnBkbVVnWTI5dGJXOXVjeUJ1WVcxcGJtZGNiaUFnSUNBekxqQWdkVzV3YjNKMFpXUWdiR2xqWlc1elpTNGdjMlZsSUdoMGRIQTZMeTlqY21WaGRHbDJaV052YlcxdmJuTXViM0puTDJ4cFkyVnVjMlZ6TDJKNUx6TXVNQzlrWldWa0xtUmxYRzRnSUNBZ1pXNWtjbVZuYVc5dVhHNHFMMXh1THk4Z2NtVm5hVzl1SUdsdGNHOXlkSE5jYmk4cUlHVnpiR2x1ZEMxa2FYTmhZbXhsSUc1dkxYVnVkWE5sWkMxMllYSnpJQ292WEc1cGJYQnZjblFnZEhsd1pTQjdRbkp2ZDNObGNrRlFTU3dnUkc5dFRtOWtaU3dnVjJsdVpHOTNmU0JtY205dElDY3VMM1I1Y0dVblhHNHZLaUJsYzJ4cGJuUXRaVzVoWW14bElHNXZMWFZ1ZFhObFpDMTJZWEp6SUNvdlhHNGdMeThnWlc1a2NtVm5hVzl1WEc0dkx5QnlaV2RwYjI0Z1pHVmpiR0Z5WVhScGIyNWNibVJsWTJ4aGNtVWdkbUZ5SUZSQlVrZEZWRHB6ZEhKcGJtZGNibVJsWTJ4aGNtVWdkbUZ5SUhkcGJtUnZkenBYYVc1a2IzZGNiaTh2SUdWdVpISmxaMmx2Ymx4dUx5OGdjbVZuYVc5dUlIWmhjbWxoWW14bGMxeHVZMjl1YzNRZ2IyNURjbVZoZEdWa1RHbHpkR1Z1WlhJNlFYSnlZWGs4Um5WdVkzUnBiMjQrSUQwZ1cxMWNibXhsZENCaWNtOTNjMlZ5UVZCSk9rSnliM2R6WlhKQlVFbGNiaTh2SUdWdVpISmxaMmx2Ymx4dUx5OGdjbVZuYVc5dUlHVnVjM1Z5WlNCd2NtVnpaVzVqWlNCdlppQmpiMjF0YjI0Z1luSnZkM05sY2lCbGJuWnBjbTl1YldWdWRGeHVhV1lnS0hSNWNHVnZaaUJVUVZKSFJWUWdQVDA5SUNkMWJtUmxabWx1WldRbklIeDhJRlJCVWtkRlZDQTlQVDBnSjI1dlpHVW5LU0I3WEc0Z0lDQWdMeThnY21WbmFXOXVJRzF2WTJzZ1luSnZkM05sY2lCbGJuWnBjbTl1YldWdWRGeHVJQ0FnSUdOdmJuTjBJR1pwYkdWVGVYTjBaVzA2VDJKcVpXTjBJRDBnY21WeGRXbHlaU2duWm5NbktWeHVJQ0FnSUdOdmJuTjBJSEJoZEdnNlQySnFaV04wSUQwZ2NtVnhkV2x5WlNnbmNHRjBhQ2NwWEc0Z0lDQWdZMjl1YzNRZ2JXVjBZVVJQVFRwUFltcGxZM1FnUFNCeVpYRjFhWEpsS0NkcWMyUnZiU2NwWEc0Z0lDQWdZMjl1YzNRZ2RtbHlkSFZoYkVOdmJuTnZiR1U2VDJKcVpXTjBJRDBnYldWMFlVUlBUUzVqY21WaGRHVldhWEowZFdGc1EyOXVjMjlzWlNncExuTmxibVJVYnloY2JpQWdJQ0FnSUNBZ1kyOXVjMjlzWlN3Z2UyOXRhWFJLYzJSdmJVVnljbTl5Y3pvZ2RISjFaWDBwWEc0Z0lDQWdkbWx5ZEhWaGJFTnZibk52YkdVdWIyNG9KMnB6Wkc5dFJYSnliM0luTENBb1pYSnliM0k2UlhKeWIzSXBPblp2YVdRZ1BUNGdlMXh1SUNBZ0lDQWdJQ0JwWmlBb0lXSnliM2R6WlhKQlVFa3VaR1ZpZFdjZ0ppWWdXMXh1SUNBZ0lDQWdJQ0FnSUNBZ0oxaE5URWgwZEhCU1pYRjFaWE4wSnl3Z0ozSmxjMjkxY21ObElHeHZZV1JwYm1jblhHNGdJQ0FnSUNBZ0lDOHZJRWxuYm05eVpWUjVjR1ZEYUdWamExeHVJQ0FnSUNBZ0lDQmRMbWx1WTJ4MVpHVnpLR1Z5Y205eUxuUjVjR1VwS1Z4dUlDQWdJQ0FnSUNBZ0lDQWdZMjl1YzI5c1pTNTNZWEp1S0dCTWIyRmthVzVuSUhKbGMyOTFjbU5sSUdaaGFXeGxaRG9nSkh0bGNuSnZjaTUwYjFOMGNtbHVaeWdwZlM1Z0tWeHVJQ0FnSUNBZ0lDQmxiSE5sWEc0Z0lDQWdJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExtVnljbTl5S0dWeWNtOXlLVnh1SUNBZ0lIMHBYRzRnSUNBZ2JHVjBJSFJsYlhCc1lYUmxSbWxzWlZCaGRHZzZjM1J5YVc1bklEMGdjR0YwYUM1cWIybHVLRjlmWkdseWJtRnRaU3dnSjNSbGMzUXVZMjl0Y0dsc1pXUXVhSFJ0YkNjcFhHNGdJQ0FnZEhKNUlIdGNiaUFnSUNBZ0lDQWdabWxzWlZONWMzUmxiUzVoWTJObGMzTlRlVzVqS0hSbGJYQnNZWFJsUm1sc1pWQmhkR2dzSUdacGJHVlRlWE4wWlcwdVJsOVBTeWxjYmlBZ0lDQjlJR05oZEdOb0lDaGxjbkp2Y2lrZ2UxeHVJQ0FnSUNBZ0lDQjBaVzF3YkdGMFpVWnBiR1ZRWVhSb0lEMGdjR0YwYUM1cWIybHVLRnh1SUNBZ0lDQWdJQ0FnSUNBZ2NISnZZMlZ6Y3k1amQyUW9LU3dnWDE5a2FYSnVZVzFsTEZ4dUlDQWdJQ0FnSUNBZ0lDQWdKMjV2WkdWZmJXOWtkV3hsY3k5M1pXSlBjSFJwYldsNlpYSXZkR1Z6ZEM1amIyMXdhV3hsWkM1b2RHMXNKeWxjYmlBZ0lDQjlYRzRnSUNBZ2JXVjBZVVJQVFM1bGJuWW9lMXh1SUNBZ0lDQWdJQ0JqY21WaGRHVmtPaUFvWlhKeWIzSTZQMFZ5Y205eUxDQjNhVzVrYjNjNlQySnFaV04wS1RwMmIybGtJRDArSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJR0p5YjNkelpYSkJVRWtnUFNCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1pHVmlkV2M2SUdaaGJITmxMQ0JrYjIxRGIyNTBaVzUwVEc5aFpHVmtPaUJtWVd4elpTd2diV1YwWVVSUFRTd2dkMmx1Wkc5M2ZWeHVJQ0FnSUNBZ0lDQWdJQ0FnWW5KdmQzTmxja0ZRU1M1M2FXNWtiM2N1Wkc5amRXMWxiblF1WVdSa1JYWmxiblJNYVhOMFpXNWxjaWduUkU5TlEyOXVkR1Z1ZEV4dllXUmxaQ2NzSUNoY2JpQWdJQ0FnSUNBZ0lDQWdJQ2s2ZG05cFpDQTlQaUI3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnWW5KdmQzTmxja0ZRU1M1a2IyMURiMjUwWlc1MFRHOWhaR1ZrSUQwZ2RISjFaVnh1SUNBZ0lDQWdJQ0FnSUNBZ2ZTbGNiaUFnSUNBZ0lDQWdJQ0FnSUdsbUlDaGxjbkp2Y2lsY2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCMGFISnZkeUJsY25KdmNseHVJQ0FnSUNBZ0lDQWdJQ0FnWld4elpWeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHWnZjaUFvWTI5dWMzUWdZMkZzYkdKaFkyczZSblZ1WTNScGIyNGdiMllnYjI1RGNtVmhkR1ZrVEdsemRHVnVaWElwWEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHTmhiR3hpWVdOcktHSnliM2R6WlhKQlVFa3NJR1poYkhObEtWeHVJQ0FnSUNBZ0lDQjlMRnh1SUNBZ0lDQWdJQ0JtWldGMGRYSmxjem9nZTF4dUlDQWdJQ0FnSUNBZ0lDQWdSbVYwWTJoRmVIUmxjbTVoYkZKbGMyOTFjbU5sY3pvZ1cxeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDZHpZM0pwY0hRbkxDQW5abkpoYldVbkxDQW5hV1p5WVcxbEp5d2dKMnhwYm1zbkxDQW5hVzFuSjF4dUlDQWdJQ0FnSUNBZ0lDQWdYU3hjYmlBZ0lDQWdJQ0FnSUNBZ0lGQnliMk5sYzNORmVIUmxjbTVoYkZKbGMyOTFjbU5sY3pvZ1d5ZHpZM0pwY0hRblhTeGNiaUFnSUNBZ0lDQWdJQ0FnSUZOcmFYQkZlSFJsY201aGJGSmxjMjkxY21ObGN6b2dabUZzYzJWY2JpQWdJQ0FnSUNBZ2ZTeGNiaUFnSUNBZ0lDQWdhSFJ0YkRvZ1ptbHNaVk41YzNSbGJTNXlaV0ZrUm1sc1pWTjVibU1vZEdWdGNHeGhkR1ZHYVd4bFVHRjBhQ3dnZTJWdVkyOWthVzVuT2lBbmRYUm1MVGduZlNrc1hHNGdJQ0FnSUNBZ0lISmxjMjkxY21ObFRHOWhaR1Z5T2lBb1hHNGdJQ0FnSUNBZ0lDQWdJQ0J5WlhOdmRYSmpaVHA3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnWld4bGJXVnVkRHBFYjIxT2IyUmxPMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJSFZ5YkRwN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJR2h2YzNSdVlXMWxPbk4wY21sdVp6dGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnYUc5emREcHpkSEpwYm1jN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJSEJ2Y25RNlAzTjBjbWx1Wnp0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdjSEp2ZEc5amIydzZjM1J5YVc1bk8xeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JvY21WbU9uTjBjbWx1Wnp0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdjR0YwYURwemRISnBibWM3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lIQmhkR2h1WVcxbE9uTjBjbWx1Wnp0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCOU8xeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHTnZiMnRwWlRwemRISnBibWM3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnWW1GelpWVnliRHB6ZEhKcGJtYzdYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdaR1ZtWVhWc2RFWmxkR05vT2loallXeHNZbUZqYXpvb1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJR1Z5Y205eU9qOUZjbkp2Y2l3Z1ltOWtlVHB6ZEhKcGJtZGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQXBJRDArSUhadmFXUXBJRDArSUhadmFXUmNiaUFnSUNBZ0lDQWdJQ0FnSUgwc0lHTmhiR3hpWVdOck9paGxjbkp2Y2pvL1JYSnliM0lzSUdKdlpIazZjM1J5YVc1bktTQTlQaUIyYjJsa1hHNGdJQ0FnSUNBZ0lDazZkbTlwWkNBOVBpQjdYRzRnSUNBZ0lDQWdJQ0FnSUNCcFppQW9jbVZ6YjNWeVkyVXVkWEpzTG1odmMzUnVZVzFsSUQwOVBTQW5iRzlqWVd4b2IzTjBKeWtnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUhKbGMyOTFjbU5sTG5WeWJDNW9iM04wSUQwZ2NtVnpiM1Z5WTJVdWRYSnNMbWh2YzNSdVlXMWxJRDBnSnlkY2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCeVpYTnZkWEpqWlM1MWNtd3VjRzl5ZENBOUlHNTFiR3hjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0J5WlhOdmRYSmpaUzUxY213dWNISnZkRzlqYjJ3Z1BTQW5abWxzWlRvblhHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ2NtVnpiM1Z5WTJVdWRYSnNMbWh5WldZZ1BTQnlaWE52ZFhKalpTNTFjbXd1YUhKbFppNXlaWEJzWVdObEtGeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0F2WGx0aExYcEJMVnBkS3pwY1hDOWNYQzlzYjJOaGJHaHZjM1FvUHpvNld6QXRPVjByS1Q4dkxGeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JnWm1sc1pUb3ZMeVI3Y0hKdlkyVnpjeTVqZDJRb0tYMWdLVnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJSEpsYzI5MWNtTmxMblZ5YkM1d1lYUm9JRDBnY21WemIzVnlZMlV1ZFhKc0xuQmhkR2h1WVcxbElEMGdjR0YwYUM1cWIybHVLRnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCd2NtOWpaWE56TG1OM1pDZ3BMQ0J5WlhOdmRYSmpaUzUxY213dWNHRjBhQ2xjYmlBZ0lDQWdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdJQ0FnSUdsbUlDaGljbTkzYzJWeVFWQkpMbVJsWW5WbktWeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHTnZibk52YkdVdWFXNW1ieWhnVEc5aFpDQnlaWE52ZFhKalpTQmNJaVI3Y21WemIzVnlZMlV1ZFhKc0xtaHlaV1o5WENJdVlDbGNiaUFnSUNBZ0lDQWdJQ0FnSUhKbGRIVnliaUJ5WlhOdmRYSmpaUzVrWldaaGRXeDBSbVYwWTJnb1puVnVZM1JwYjI0b1pYSnliM0k2UDBWeWNtOXlLVHAyYjJsa0lIdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQnBaaUFvSVdWeWNtOXlLVnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCallXeHNZbUZqYXk1aGNIQnNlU2gwYUdsekxDQmhjbWQxYldWdWRITXBYRzRnSUNBZ0lDQWdJQ0FnSUNCOUtWeHVJQ0FnSUNBZ0lDQjlMRnh1SUNBZ0lDQWdJQ0IxY213NklDZG9kSFJ3T2k4dmJHOWpZV3hvYjNOMEp5eGNiaUFnSUNBZ0lDQWdkbWx5ZEhWaGJFTnZibk52YkdWY2JpQWdJQ0I5S1Z4dUlDQWdJQzh2SUdWdVpISmxaMmx2Ymx4dWZTQmxiSE5sSUh0Y2JpQWdJQ0JpY205M2MyVnlRVkJKSUQwZ2UyUmxZblZuT2lCbVlXeHpaU3dnWkc5dFEyOXVkR1Z1ZEV4dllXUmxaRG9nWm1Gc2MyVXNJRzFsZEdGRVQwMDZJRzUxYkd3c0lIZHBibVJ2ZDMxY2JpQWdJQ0IzYVc1a2IzY3VaRzlqZFcxbGJuUXVZV1JrUlhabGJuUk1hWE4wWlc1bGNpZ25SRTlOUTI5dWRHVnVkRXh2WVdSbFpDY3NJQ2dwT25admFXUWdQVDRnZTF4dUlDQWdJQ0FnSUNCaWNtOTNjMlZ5UVZCSkxtUnZiVU52Ym5SbGJuUk1iMkZrWldRZ1BTQjBjblZsWEc0Z0lDQWdJQ0FnSUdadmNpQW9ZMjl1YzNRZ1kyRnNiR0poWTJzNlJuVnVZM1JwYjI0Z2IyWWdiMjVEY21WaGRHVmtUR2x6ZEdWdVpYSXBYRzRnSUNBZ0lDQWdJQ0FnSUNCallXeHNZbUZqYXloaWNtOTNjMlZ5UVZCSkxDQm1ZV3h6WlNsY2JpQWdJQ0I5S1Z4dWZWeHVMeThnWlc1a2NtVm5hVzl1WEc1bGVIQnZjblFnWkdWbVlYVnNkQ0FvWTJGc2JHSmhZMnM2Um5WdVkzUnBiMjRzSUdOc1pXRnlPbUp2YjJ4bFlXNGdQU0IwY25WbEtUcGhibmtnUFQ0Z2UxeHVJQ0FnSUM4dklISmxaMmx2YmlCcGJtbDBhV0ZzYVhwbElHZHNiMkpoYkNCamIyNTBaWGgwWEc0Z0lDQWdMeXBjYmlBZ0lDQWdJQ0FnVGs5VVJUb2dWMlVnYUdGMlpTQjBieUJrWldacGJtVWdkMmx1Wkc5M0lHZHNiMkpoYkd4NUlHSmxabTl5WlNCaGJubDBhR2x1WnlCcGN5QnNiMkZrWldRZ2RHOWNiaUFnSUNBZ0lDQWdaVzV6ZFhKbElIUm9ZWFFnWVd4c0lHWjFkSFZ5WlNCcGJuTjBZVzVqWlhNZ2MyaGhjbVVnZEdobElITmhiV1VnZDJsdVpHOTNJRzlpYW1WamRDNWNiaUFnSUNBcUwxeHVJQ0FnSUdsbUlDaGNiaUFnSUNBZ0lDQWdZMnhsWVhJZ0ppWWdkSGx3Wlc5bUlHZHNiMkpoYkNBaFBUMGdKM1Z1WkdWbWFXNWxaQ2NnSmlZZ1oyeHZZbUZzSUNFOVBTQmljbTkzYzJWeVFWQkpMbmRwYm1SdmQxeHVJQ0FnSUNrZ2UxeHVJQ0FnSUNBZ0lDQm5iRzlpWVd3dWQybHVaRzkzSUQwZ1luSnZkM05sY2tGUVNTNTNhVzVrYjNkY2JpQWdJQ0FnSUNBZ1ptOXlJQ2hqYjI1emRDQnJaWGtnYVc0Z1luSnZkM05sY2tGUVNTNTNhVzVrYjNjcFhHNGdJQ0FnSUNBZ0lDQWdJQ0JwWmlBb1luSnZkM05sY2tGUVNTNTNhVzVrYjNjdWFHRnpUM2R1VUhKdmNHVnlkSGtvWEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnYTJWNVhHNGdJQ0FnSUNBZ0lDQWdJQ0FwSUNZbUlDRm5iRzlpWVd3dWFHRnpUM2R1VUhKdmNHVnlkSGtvYTJWNUtTbGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQm5iRzlpWVd4YmEyVjVYU0E5SUdKeWIzZHpaWEpCVUVrdWQybHVaRzkzVzJ0bGVWMWNiaUFnSUNCOVhHNGdJQ0FnTHk4Z1pXNWtjbVZuYVc5dVhHNGdJQ0FnYVdZZ0tIUjVjR1Z2WmlCVVFWSkhSVlFnUFQwOUlDZDFibVJsWm1sdVpXUW5JSHg4SUZSQlVrZEZWQ0E5UFQwZ0oyNXZaR1VuS1Z4dUlDQWdJQ0FnSUNCeVpYUjFjbTRnS0dKeWIzZHpaWEpCVUVrcElEOGdZMkZzYkdKaFkyc29YRzRnSUNBZ0lDQWdJQ0FnSUNCaWNtOTNjMlZ5UVZCSkxDQjBjblZsWEc0Z0lDQWdJQ0FnSUNrZ09pQnZia055WldGMFpXUk1hWE4wWlc1bGNpNXdkWE5vS0dOaGJHeGlZV05yS1Z4dUlDQWdJSEpsZEhWeWJpQW9Zbkp2ZDNObGNrRlFTUzVrYjIxRGIyNTBaVzUwVEc5aFpHVmtLU0EvSUdOaGJHeGlZV05yS0Z4dUlDQWdJQ0FnSUNCaWNtOTNjMlZ5UVZCSkxDQjBjblZsWEc0Z0lDQWdLU0E2SUc5dVEzSmxZWFJsWkV4cGMzUmxibVZ5TG5CMWMyZ29ZMkZzYkdKaFkyc3BYRzU5WEc0dkx5QnlaV2RwYjI0Z2RtbHRJRzF2Wkd4cGJtVmNiaTh2SUhacGJUb2djMlYwSUhSaFluTjBiM0E5TkNCemFHbG1kSGRwWkhSb1BUUWdaWGh3WVc1a2RHRmlPbHh1THk4Z2RtbHRPaUJtYjJ4a2JXVjBhRzlrUFcxaGNtdGxjaUJtYjJ4a2JXRnlhMlZ5UFhKbFoybHZiaXhsYm1SeVpXZHBiMjQ2WEc0dkx5QmxibVJ5WldkcGIyNWNiaUpkZlE9PVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3dlYk9wdGltaXplci9icm93c2VyQVBJLmNvbXBpbGVkLmpzXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 6 */
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/***/ function(module, exports) {

	eval("module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanM/YzNjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xyXG5cdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xyXG5cdH1cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 7 */
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ function(module, exports) {

	eval("module.exports = require(\"fs\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImZzXCI/MmUwOSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwiZnNcIlxuICoqIG1vZHVsZSBpZCA9IDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 8 */
/*!*******************************!*\
  !*** external "jQuery-tools" ***!
  \*******************************/
/***/ function(module, exports) {

	eval("module.exports = require(\"jQuery-tools\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImpRdWVyeS10b29sc1wiPzRiYTQiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwialF1ZXJ5LXRvb2xzXCIpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJqUXVlcnktdG9vbHNcIlxuICoqIG1vZHVsZSBpZCA9IDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 9 */
/*!************************!*\
  !*** external "jsdom" ***!
  \************************/
/***/ function(module, exports) {

	eval("module.exports = require(\"jsdom\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImpzZG9tXCI/NDg3YiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJqc2RvbVwiKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwianNkb21cIlxuICoqIG1vZHVsZSBpZCA9IDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 10 */
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ function(module, exports) {

	eval("module.exports = require(\"path\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwYXRoXCI/NWIyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwYXRoXCIpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJwYXRoXCJcbiAqKiBtb2R1bGUgaWQgPSAxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 11 */
/*!****************************!*\
  !*** external "qunit-cli" ***!
  \****************************/
/***/ function(module, exports) {

	eval("module.exports = require(\"qunit-cli\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJxdW5pdC1jbGlcIj82MTU0Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInF1bml0LWNsaVwiKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwicXVuaXQtY2xpXCJcbiAqKiBtb2R1bGUgaWQgPSAxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }
/******/ ]);