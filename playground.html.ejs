<!doctype html>
<%_ /*
    region header
    Copyright Torben Sickert (info["~at~"]torben.website) 16.12.2012

    License
    -------

    This library written by Torben Sickert stand under a creative commons
    naming 3.0 unported license.
    See https://creativecommons.org/licenses/by/3.0/deed.de
    endregion
*/ _%>
<html>
    <head>
        <meta charset="utf-8">
        <!--Prevent browser caching-->
        <meta http-equiv="cache-control" content="no-cache">
        <meta http-equiv="expires" content="0">
        <meta http-equiv="pragma" content="no-cache">
        <title>playground</title>
        <!--region style-->
        <style>
            store-locator {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
            }
            store-locator > div {
                height: 100%;
            }
            store-locator input {
                margin-left: 10px;
                margin-top: 10px;
                width: 230px;
                height: 25px;
            }
            store-locator .store-locator-search-results div {
                border-bottom: 1px solid black;
            }
            store-locator .store-locator-search-results div .tools-mark {
                color: blue;
            }
        </style>
        <!--endregion-->
        <!--region polyfill-->
        <%-
            include(
                'web-component-wrapper/polyfill.html',
                {additionalFeatures: [
                    // MDC-Select - Throws about missing object.
                    'CustomEvent'
                ]}
            )
        %>
        <!--endregion-->
        <!--region script-->
        <script>
            window.onload = function() {
                storelocator.index.api.register()

                const markSearchResults = function(event) {
                    let changed = false
                    for (const marker of event.detail.target.markers)
                        if (
                            marker.hasOwnProperty('storeLocatorFoundWords') ||
                            this.currentSearchText === ''
                        ) {
                            if (marker.icon.url !== 'https://placeholdit.imgix.net/~text?txtsize=9&bg=0099ff&txtclr=ffffff&txt=match&w=50&h=50&fm=png') {
                                marker.icon.url = 'https://placeholdit.imgix.net/~text?txtsize=9&bg=0099ff&txtclr=ffffff&txt=match&w=50&h=50&fm=png'
                                changed = true
                            }
                        } else if (marker.icon.url !== 'https://placeholdit.imgix.net/~text?txtsize=9&txtclr=ffffff&txt=miss&w=50&h=50&fm=png') {
                            marker.icon.url = 'https://placeholdit.imgix.net/~text?txtsize=9&txtclr=ffffff&txt=miss&w=50&h=50&fm=png'
                            changed = true
                        }
                    if (changed)
                        event.detail.target.resetMarkerCluster()
                    return true
                }

                const storeLocatorDomNode =
                    document.querySelector('store-locator')

                storeLocatorDomNode
                    .addEventListener('addSearchResults', markSearchResults)
                storeLocatorDomNode
                    .addEventListener('removeSearchResults', markSearchResults)
            }
        </script>
        <!--endregion-->
    </head>
    <body>
        <store-locator configuration="{
            applicationInterface: {
                key: 'AIzaSyBAoKgqF4XaDblkRP4-94BITpUKzB767LQ'
            },
            ipToLocationApplicationInterface: {
                bounds: {
                    northEast: {latitude: 55.12, longitude: 14.89},
                    southWest: {latitude: 47.32, longitude: 5.50}
                },
                key: '11a62990a1424e894da6eec464a747e6'
            },
            limit: {
                bounds: {
                    northEast: {latitude: 55.12, longitude: 14.89},
                    southWest: {latitude: 47.32, longitude: 5.50}
                },
                zoom: {minimum: 5}
            },
            map: {zoom: 5},
            searchBox: {},
            defaultMarkerIconFileName: 'https://via.placeholder.com/50/0099ff/ffffff.png?text=match',
            // Automatically generated stores with option: {stores: bounds}
            stores: [
                {
                    address: 'Elgendorfer Str. 57, 56410 Montabaur, Deutschland',
                    eMailAddress: 'info@fake-1.de',
                    latitude: 50.4356,
                    longitude: 7.81226,
                    name: '1 & 1 Telecom GmbH',
                    phoneNumber: '+49 721 9600'
                },
                {
                    address: 'Freiheitsstr.1a, 53842 Troisdorf, Deutschland',
                    eMailAddress: '1a@demo.de',
                    latitude: 50.82791,
                    logoFile: {
                        hash: '512abb0d27ff2731017a0437059c117f',
                        name: '78192.jpeg'
                    },
                    longitude: 7.1219600000000005,
                    name: '1A-Bike&Parts GmbH',
                    phoneNumber: '02241 / 91 18 09 3',
                    websiteURL: 'http://www.1a-bike.bike'
                },
                {
                    address: 'Niederrheinische Str. 27, 34626 Neukirchen, Deutschland',
                    eMailAddress: 'tfddfa@de.de',
                    latitude: 50.871640000000006,
                    logoFile: {
                        hash: 'ece8f32f3b825ddf05c447008d396db7',
                        name: '18852.jpeg'
                    },
                    longitude: 9.337940000000001,
                    name: '1a Fahrradservice',
                    phoneNumber: '+49 (6694) 7878',
                    websiteURL: 'http://www.1a-fahrradservice-diegelmann.de'
                },
                {
                    address: 'Dener Strasse 73, 48653 Coesfeld, Deutschland',
                    eMailAddress: '12345@jobrad.org',
                    latitude: 51.93271000000001,
                    logoFile: {
                        hash: '8915ed56691b09a0158af336aae4e270',
                        name: '196.png'
                    },
                    name: '2-Rad-Baumeister',
                    phoneNumber: '+49 (2541) 2509',
                    websiteURL: 'www.2rad-baumeister.de'
                },
                {
                    address: 'Friedrichstr. 100, 47475 Kamp - Lintfort, Deutschland',
                    eMailAddress: 'test@jobrad.org',
                    latitude: 51.508750000000006,
                    logoFile: {
                        hash: '08bab9b7774b77bd1d503f786422f720',
                        name: '34619.jpeg'
                    },
                    longitude: 6.553020000000001,
                    name: '2 - Rad Behringer',
                    phoneNumber: '02842 / 42 471',
                    websiteURL: 'www.zweirad-behringer.de'
                },
                {
                    address: 'Werster Str. 86, 32549 Bad Oeynhausen, Deutschland',
                    eMailAddress: 'test@jobrad.org',
                    latitude: 52.215630000000004,
                    logoFile: {
                        hash: 'e4676ce3b22a9caf79cb76c2a9c2e224',
                        name: '190.jpeg'
                    },
                    longitude: 8.785,
                    name: '2Rad Berger Fahrradhandel & Tankstelle Marcus Berger',
                    phoneNumber: '+49 (5731) 28930',
                    websiteURL: 'www.2radberger.de'
                },
                {
                    address: 'Rauchstr. 16, 34454 Bad Arolsen, Deutschland',
                    eMailAddress: 'test@jobrad.org',
                    latitude: 51.38242,
                    logoFile: {
                        hash: 'a53fcd4aabfc64d76e8757b720c0bc13',
                        name: '24784.jpeg'
                    },
                    longitude: 9.01524,
                    name: '2Rad Br\u00fcne',
                    phoneNumber: '05691 / 2220',
                    websiteURL: 'http://2rad-bruene.de'
                },
                {
                    address: 'Schneiderstr.40, 46244 Bottrop, Deutschland',
                    latitude: 51.57477,
                    logoFile: {
                        hash: '40c11802365ea722109d41537a0925a8',
                        name: '83385.jpeg'
                    },
                    longitude: 6.90406,
                    name: '2 - Rad B\u00fcning',
                    phoneNumber: '02045 / 57 38',
                    websiteURL: 'http://www.2-rad-buening.de'
                },
                {
                    address: 'Butenwall 63, 46325 Borken, Deutschland',
                    eMailAddress: 'test@jobrad.org',
                    latitude: 51.846050000000005,
                    logoFile: {
                        hash: '0ec7668751c6cac94025d2e5304b0160',
                        name: '191.png'
                    },
                    longitude: 6.8543,
                    name: '2Rad Busch',
                    phoneNumber: '+49 (2861) 2692',
                    websiteURL: 'www.2rad-busch.de '
                },
                {
                    address: 'Herzebrockerstrasse 12, 33378 Rheda-WiedenbrÃ¼ck, Deutschland',
                    eMailAddress: 'test@jobrad.org',
                    latitude: 51.85799,
                    logoFile: {
                        hash: '5bd864762cae057d53dd9f4cbc61f04e',
                        name: '63636.jpeg'
                    },
                    longitude: 8.28283,
                    name: '2-rad Butschko',
                    phoneNumber: '05242 / 4 31 61',
                    websiteURL: 'http://www.zweirad-butschko.de'
                }
            ]
        }"><input slot="input" /></store-locator>
    </body>
<html>
<%_ /*
    region vim modline
    vim: set tabstop=4 shiftwidth=4 expandtab:
    vim: foldmethod=marker foldmarker=region,endregion:
    endregion
*/ _%>
